module.exports = {

"[externals]/next/dist/compiled/next-server/pages.runtime.dev.js [external] (next/dist/compiled/next-server/pages.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/pages.runtime.dev.js", () => require("next/dist/compiled/next-server/pages.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/react/jsx-runtime [external] (react/jsx-runtime, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("react/jsx-runtime", () => require("react/jsx-runtime"));

module.exports = mod;
}}),
"[externals]/react [external] (react, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("react", () => require("react"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("react/jsx-dev-runtime", () => require("react/jsx-dev-runtime"));

module.exports = mod;
}}),
"[project]/stonks/pages/_app.tsx [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>App)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
;
function App({ Component, pageProps }) {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(Component, {
        ...pageProps
    }, void 0, false, {
        fileName: "[project]/stonks/pages/_app.tsx",
        lineNumber: 4,
        columnNumber: 10
    }, this);
}
}}),
"[externals]/dayjs [external] (dayjs, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("dayjs", () => require("dayjs"));

module.exports = mod;
}}),
"[externals]/dayjs/plugin/utc.js [external] (dayjs/plugin/utc.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("dayjs/plugin/utc.js", () => require("dayjs/plugin/utc.js"));

module.exports = mod;
}}),
"[externals]/firebase/auth [external] (firebase/auth, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("firebase/auth");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/lodash/uniq.js [external] (lodash/uniq.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/uniq.js", () => require("lodash/uniq.js"));

module.exports = mod;
}}),
"[project]/web/lib/util/local.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "newInMemoryStore": (()=>newInMemoryStore),
    "safeLocalStorage": (()=>safeLocalStorage),
    "safeSessionStorage": (()=>safeSessionStorage)
});
function getStorageProxy(store) {
    try {
        store.setItem('test', '');
        store.getItem('test');
        store.removeItem('test');
    } catch (e) {
        console.warn(e);
        return undefined;
    }
    return {
        getItem: (key)=>store.getItem(key) ?? null,
        setItem: (key, value)=>{
            try {
                store.setItem(key, value);
            } catch (e) {
                store.clear();
                // try again
                store.setItem(key, value);
            }
        },
        removeItem: (key)=>store.removeItem(key)
    };
}
let safeLocalStorage;
let safeSessionStorage;
try {
    safeLocalStorage = getStorageProxy(localStorage);
} catch  {}
try {
    safeSessionStorage = getStorageProxy(sessionStorage);
} catch  {}
function newInMemoryStore() {
    const store = {};
    return {
        getItem: (key)=>store[key],
        setItem: (key, value)=>{
            store[key] = value;
        },
        removeItem: (key)=>{
            delete store[key];
        }
    };
}
}}),
"[project]/web/lib/native/post-message.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "postMessageToNative": (()=>postMessageToNative)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/is-native.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const postMessageToNative = (type, data)=>{
    const isNative = (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getIsNative"])();
    if (isNative && window.ReactNativeWebView && // NOTE: After the webview is killed on android due to OOM, postMessage will be undefined, see: https://github.com/react-native-webview/react-native-webview/issues/2680
    typeof window.ReactNativeWebView.postMessage === 'function') {
        ;
        window.ReactNativeWebView?.postMessage(JSON.stringify({
            type,
            data
        }));
    }
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/web/lib/native/native-messages.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "nativePassUsers": (()=>nativePassUsers),
    "nativeSignOut": (()=>nativeSignOut)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/post-message.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const nativePassUsers = (userJson)=>{
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["postMessageToNative"])('users', userJson);
};
const nativeSignOut = ()=>{
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["postMessageToNative"])('signOut', {});
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/firebase/storage [external] (firebase/storage, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("firebase/storage");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/firebase/app [external] (firebase/app, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("firebase/app");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/lodash/escapeRegExp.js [external] (lodash/escapeRegExp.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/escapeRegExp.js", () => require("lodash/escapeRegExp.js"));

module.exports = mod;
}}),
"[project]/common/src/envs/prod.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "PROD_CONFIG": (()=>PROD_CONFIG)
});
const PROD_CONFIG = {
    domain: 'manifold.markets',
    loveDomain: 'manifold.love',
    loveDomainAlternate: 'manifoldlove.com',
    amplitudeApiKey: '2d6509fd4185ebb8be29709842752a15',
    supabaseInstanceId: 'pxidrgkatumlvfqaxcll',
    supabaseAnonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB4aWRyZ2thdHVtbHZmcWF4Y2xsIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Njg5OTUzOTgsImV4cCI6MTk4NDU3MTM5OH0.d_yYtASLzAoIIGdXUBIgRAGLBnNow7JG2SoaNMQ8ySg',
    googleAnalyticsId: 'GTM-MLMPXHJ6',
    firebaseConfig: {
        apiKey: 'AIzaSyDp3J57vLeAZCzxLD-vcPaGIkAmBoGOSYw',
        authDomain: 'mantic-markets.firebaseapp.com',
        projectId: 'mantic-markets',
        region: 'us-central1',
        storageBucket: 'mantic-markets.appspot.com',
        privateBucket: 'mantic-markets-private',
        messagingSenderId: '128925704902',
        appId: '1:128925704902:web:f61f86944d8ffa2a642dc7',
        measurementId: 'G-SSFK1Q138D'
    },
    twitchBotEndpoint: 'https://twitch-bot.manifold.markets',
    apiEndpoint: 'api.manifold.markets',
    cloudRunId: 'nggbo3neva',
    cloudRunRegion: 'uc',
    adminIds: [
        'igi2zGXsfxYPgB0DJTXVJVmwCOr2',
        'tlmGNz9kjXc2EteizMORes4qvWl2',
        '0k1suGSJKVUnHbCPEhHNpgZPkUP2',
        'IPTOzEqrpkWmEzh6hwvAyY9PqFb2',
        'AJwLWoo3xue32XIiAVrL5SyR1WB2',
        'uglwf3YKOZNGjjEXKc5HampOFRE2',
        'GRwzCexe5PM6ThrSsodKZT9ziln2',
        '62TNqzdBx7X2q621HltsJm8UFht2',
        'z0cH5XmIM9XgWFOBAILQWt0fTHr1',
        'cA1JupYR5AR8btHUs2xvkui7jA93',
        'vuI5upWB8yU00rP7yxj95J2zd952',
        '8lZo8X5lewh4hnCoreI7iSc0GxK2',
        'mwaVAaKkabODsH8g5VrtbshsXz03'
    ],
    visibility: 'PUBLIC',
    moneyMoniker: 'Ṁ',
    spiceMoniker: 'P',
    bettor: 'trader',
    verbPastBet: 'traded',
    nounBet: 'trade',
    faviconPath: '/favicon.ico',
    newQuestionPlaceholders: [
        'Will anyone I know get engaged this year?',
        'Will humans set foot on Mars by the end of 2030?',
        'Will any cryptocurrency eclipse Bitcoin by market cap this year?',
        'Will the Democrats win the 2024 presidential election?'
    ],
    expoConfig: {
        iosClientId: '128925704902-n0ic4j1s5tk51t2vu8anu8glh3t5jimo.apps.googleusercontent.com',
        expoClientId: '128925704902-bpcbnlp2gt73au3rrjjtnup6cskr89p0.apps.googleusercontent.com',
        androidClientId: '128925704902-ur9hevfika2rs0sni6ju236u82hbct3i.apps.googleusercontent.com'
    }
};
}}),
"[project]/common/src/envs/dev.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "DEV_CONFIG": (()=>DEV_CONFIG)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$prod$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/prod.ts [ssr] (ecmascript)");
;
const DEV_CONFIG = {
    ...__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$prod$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["PROD_CONFIG"],
    domain: 'dev.manifold.markets',
    loveDomain: 'dev.manifold.love',
    loveDomainAlternate: 'dev.manifoldlove.com',
    googleAnalyticsId: '',
    firebaseConfig: {
        apiKey: 'AIzaSyBoq3rzUa8Ekyo3ZaTnlycQYPRCA26VpOw',
        authDomain: 'dev-mantic-markets.firebaseapp.com',
        projectId: 'dev-mantic-markets',
        region: 'us-central1',
        storageBucket: 'dev-mantic-markets.appspot.com',
        privateBucket: 'dev-mantic-markets-private',
        messagingSenderId: '134303100058',
        appId: '1:134303100058:web:27f9ea8b83347251f80323',
        measurementId: 'G-YJC9E37P37'
    },
    cloudRunId: 'w3txbmd3ba',
    cloudRunRegion: 'uc',
    amplitudeApiKey: 'fd8cbfd964b9a205b8678a39faae71b3',
    supabaseInstanceId: 'mfodonznyfxllcezufgr',
    supabaseAnonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mb2RvbnpueWZ4bGxjZXp1ZmdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Njc5ODgxNjcsImV4cCI6MTk4MzU2NDE2N30.RK8CA3G2_yccgiIFoxzweEuJ2XU5SoB7x7wBzMKitvo',
    twitchBotEndpoint: 'https://dev-twitch-bot.manifold.markets',
    apiEndpoint: 'api.dev.manifold.markets',
    expoConfig: {
        iosClientId: '134303100058-lioqb7auc8minvqt9iamuit2pg10pubt.apps.googleusercontent.com',
        expoClientId: '134303100058-2uvio555s8mnhde20b4old97ptjnji3u.apps.googleusercontent.com',
        androidClientId: '134303100058-mu6dbubhks8khpqi3dq0fokqnkbputiq.apps.googleusercontent.com'
    },
    adminIds: [
        'pfKxvtgSEua5DxoIfiPXxR4fAWd2',
        '6hHpzvRG0pMq8PNJs7RZj2qlZGn2',
        'MxyCh2xvsFMFywwjg3Az0w4xP5B3',
        '2cO953kN1sTBpfbhPVnTjRNqLJh2'
    ]
};
}}),
"[project]/common/src/envs/constants.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "APPLE_APP_URL": (()=>APPLE_APP_URL),
    "AUTH_COOKIE_NAME": (()=>AUTH_COOKIE_NAME),
    "BANNED_TRADING_USER_IDS": (()=>BANNED_TRADING_USER_IDS),
    "BEING_DEAD_HEADS": (()=>BEING_DEAD_HEADS),
    "BOT_USERNAMES": (()=>BOT_USERNAMES),
    "CASH_BETS_ENABLED": (()=>CASH_BETS_ENABLED),
    "CASH_SUFFIX": (()=>CASH_SUFFIX),
    "CASH_TO_CHARITY_DOLLARS": (()=>CASH_TO_CHARITY_DOLLARS),
    "CASH_TO_MANA_CONVERSION_RATE": (()=>CASH_TO_MANA_CONVERSION_RATE),
    "CHARITY_FEE": (()=>CHARITY_FEE),
    "CONFIGS": (()=>CONFIGS),
    "CORS_ORIGIN_CHARITY": (()=>CORS_ORIGIN_CHARITY),
    "CORS_ORIGIN_LOCALHOST": (()=>CORS_ORIGIN_LOCALHOST),
    "CORS_ORIGIN_MANIFOLD": (()=>CORS_ORIGIN_MANIFOLD),
    "CORS_ORIGIN_MANIFOLD_LOVE": (()=>CORS_ORIGIN_MANIFOLD_LOVE),
    "CORS_ORIGIN_MANIFOLD_LOVE_ALTERNATE": (()=>CORS_ORIGIN_MANIFOLD_LOVE_ALTERNATE),
    "CORS_ORIGIN_VERCEL": (()=>CORS_ORIGIN_VERCEL),
    "DESTINY_GROUP_SLUG": (()=>DESTINY_GROUP_SLUG),
    "DISCORD_BOT_INVITE_LINK": (()=>DISCORD_BOT_INVITE_LINK),
    "DISCORD_INVITE_LINK": (()=>DISCORD_INVITE_LINK),
    "DOLLAR_PURCHASE_LIMIT": (()=>DOLLAR_PURCHASE_LIMIT),
    "DOMAIN": (()=>DOMAIN),
    "ENV": (()=>ENV),
    "ENV_CONFIG": (()=>ENV_CONFIG),
    "EXTERNAL_REDIRECTS": (()=>EXTERNAL_REDIRECTS),
    "FIREBASE_CONFIG": (()=>FIREBASE_CONFIG),
    "GOOGLE_PLAY_APP_URL": (()=>GOOGLE_PLAY_APP_URL),
    "GROUP_SLUGS_TO_IGNORE_IN_MARKETS_EMAIL": (()=>GROUP_SLUGS_TO_IGNORE_IN_MARKETS_EMAIL),
    "GROUP_SLUGS_TO_NOT_INTRODUCE_IN_FEED": (()=>GROUP_SLUGS_TO_NOT_INTRODUCE_IN_FEED),
    "HIDE_FROM_LEADERBOARD_USER_IDS": (()=>HIDE_FROM_LEADERBOARD_USER_IDS),
    "HIDE_FROM_NEW_USER_SLUGS": (()=>HIDE_FROM_NEW_USER_SLUGS),
    "HOUSE_BOT_USERNAME": (()=>HOUSE_BOT_USERNAME),
    "INSTITUTIONAL_PARTNER_USER_IDS": (()=>INSTITUTIONAL_PARTNER_USER_IDS),
    "IS_PRIVATE_MANIFOLD": (()=>IS_PRIVATE_MANIFOLD),
    "LOVE_DOMAIN": (()=>LOVE_DOMAIN),
    "LOVE_DOMAIN_ALTERNATE": (()=>LOVE_DOMAIN_ALTERNATE),
    "MANA_PURCHASE_RATE_CHANGE_DATE": (()=>MANA_PURCHASE_RATE_CHANGE_DATE),
    "MANA_PURCHASE_RATE_REVERT_DATE": (()=>MANA_PURCHASE_RATE_REVERT_DATE),
    "MIN_CASH_DONATION": (()=>MIN_CASH_DONATION),
    "MIN_SPICE_DONATION": (()=>MIN_SPICE_DONATION),
    "MOD_IDS": (()=>MOD_IDS),
    "MVP": (()=>MVP),
    "NEW_USER_HERLPER_IDS": (()=>NEW_USER_HERLPER_IDS),
    "NY_FL_CASHOUT_LIMIT": (()=>NY_FL_CASHOUT_LIMIT),
    "OPTED_OUT_OF_LEAGUES": (()=>OPTED_OUT_OF_LEAGUES),
    "PARTNER_USER_IDS": (()=>PARTNER_USER_IDS),
    "PROD_MANIFOLD_LOVE_GROUP_SLUG": (()=>PROD_MANIFOLD_LOVE_GROUP_SLUG),
    "PROJECT_ID": (()=>PROJECT_ID),
    "RATING_GROUP_SLUGS": (()=>RATING_GROUP_SLUGS),
    "RESERVED_PATHS": (()=>RESERVED_PATHS),
    "SPICE_MARKET_TOOLTIP": (()=>SPICE_MARKET_TOOLTIP),
    "SPICE_NAME": (()=>SPICE_NAME),
    "SPICE_PRODUCTION_ENABLED": (()=>SPICE_PRODUCTION_ENABLED),
    "SPICE_TO_CHARITY_DOLLARS": (()=>SPICE_TO_CHARITY_DOLLARS),
    "SPICE_TO_MANA_CONVERSION_RATE": (()=>SPICE_TO_MANA_CONVERSION_RATE),
    "SWEEPIES_MARKET_TOOLTIP": (()=>SWEEPIES_MARKET_TOOLTIP),
    "SWEEPIES_NAME": (()=>SWEEPIES_NAME),
    "SWEEPSTAKES_MOD_IDS": (()=>SWEEPSTAKES_MOD_IDS),
    "TEN_YEARS_SECS": (()=>TEN_YEARS_SECS),
    "TRADED_TERM": (()=>TRADED_TERM),
    "TRADER_TERM": (()=>TRADER_TERM),
    "TRADE_TERM": (()=>TRADE_TERM),
    "TRADING_TERM": (()=>TRADING_TERM),
    "TWOMBA_CASHOUT_ENABLED": (()=>TWOMBA_CASHOUT_ENABLED),
    "VERIFIED_USERNAMES": (()=>VERIFIED_USERNAMES),
    "YES_GRAPH_COLOR": (()=>YES_GRAPH_COLOR),
    "isAdminId": (()=>isAdminId),
    "isModId": (()=>isModId),
    "isSweepstakesModId": (()=>isSweepstakesModId),
    "supabaseConsoleContractPath": (()=>supabaseConsoleContractPath),
    "supabaseConsoleTxnPath": (()=>supabaseConsoleTxnPath),
    "supabasePrivateUserConsolePath": (()=>supabasePrivateUserConsolePath),
    "supabaseUserConsolePath": (()=>supabaseUserConsolePath)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/escapeRegExp.js [external] (lodash/escapeRegExp.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$prod$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/prod.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$dev$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/dev.ts [ssr] (ecmascript)");
;
;
;
const ENV = process.env.NEXT_PUBLIC_FIREBASE_ENV ?? 'PROD';
const CONFIGS = {
    PROD: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$prod$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["PROD_CONFIG"],
    DEV: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$dev$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DEV_CONFIG"]
};
const CASH_BETS_ENABLED = true;
const TWOMBA_CASHOUT_ENABLED = true;
const SPICE_PRODUCTION_ENABLED = false;
const SPICE_TO_MANA_CONVERSION_RATE = 1;
const CASH_TO_MANA_CONVERSION_RATE = 100;
const MIN_CASH_DONATION = 25;
const MIN_SPICE_DONATION = 25000;
const CHARITY_FEE = 0.05;
const CASH_TO_CHARITY_DOLLARS = 1;
const SPICE_TO_CHARITY_DOLLARS = 1 / 1000 * (1 - CHARITY_FEE) // prize points -> dollars
;
const NY_FL_CASHOUT_LIMIT = 5000;
const DOLLAR_PURCHASE_LIMIT = 5000;
const SPICE_NAME = 'Prize Point';
const SWEEPIES_NAME = 'sweepcash';
const SPICE_MARKET_TOOLTIP = `Prize market! Earn ${SPICE_NAME}s on resolution`;
const SWEEPIES_MARKET_TOOLTIP = `Sweepstakes market! Win real cash prizes.`;
const CASH_SUFFIX = '--cash';
const TRADE_TERM = 'trade';
const TRADED_TERM = 'traded';
const TRADING_TERM = 'trading';
const TRADER_TERM = 'trader';
const ENV_CONFIG = CONFIGS[ENV];
function isAdminId(id) {
    return ENV_CONFIG.adminIds.includes(id);
}
function isModId(id) {
    return MOD_IDS.includes(id);
}
function isSweepstakesModId(id) {
    return SWEEPSTAKES_MOD_IDS.includes(id);
}
const DOMAIN = ENV_CONFIG.domain;
const LOVE_DOMAIN = ENV_CONFIG.loveDomain;
const LOVE_DOMAIN_ALTERNATE = ENV_CONFIG.loveDomainAlternate;
const FIREBASE_CONFIG = ENV_CONFIG.firebaseConfig;
const PROJECT_ID = ENV_CONFIG.firebaseConfig.projectId;
const IS_PRIVATE_MANIFOLD = ENV_CONFIG.visibility === 'PRIVATE';
const AUTH_COOKIE_NAME = `FBUSER_${PROJECT_ID.toUpperCase().replace(/-/g, '_')}`;
const CORS_ORIGIN_MANIFOLD = new RegExp('^https?://(?:[a-zA-Z0-9\\-]+\\.)*' + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__["default"])(ENV_CONFIG.domain) + '$');
const CORS_ORIGIN_MANIFOLD_LOVE = new RegExp('^https?://(?:[a-zA-Z0-9\\-]+\\.)*' + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__["default"])(ENV_CONFIG.loveDomain) + '$');
const CORS_ORIGIN_MANIFOLD_LOVE_ALTERNATE = new RegExp('^https?://(?:[a-zA-Z0-9\\-]+\\.)*' + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__["default"])(ENV_CONFIG.loveDomainAlternate) + '$');
const CORS_ORIGIN_CHARITY = new RegExp('^https?://(?:[a-zA-Z0-9\\-]+\\.)*' + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__["default"])('manifund.org') + '$');
const CORS_ORIGIN_VERCEL = new RegExp('^https?://[a-zA-Z0-9\\-]+' + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$escapeRegExp$2e$js__$5b$external$5d$__$28$lodash$2f$escapeRegExp$2e$js$2c$__cjs$29$__["default"])('mantic.vercel.app') + '$');
const CORS_ORIGIN_LOCALHOST = /^http:\/\/localhost:\d+$/;
const BOT_USERNAMES = [
    'TenShinoe908',
    'subooferbot',
    'pos',
    'v',
    'acc',
    'jerk',
    'snap',
    'ArbitrageBot',
    'MarketManagerBot',
    'Botlab',
    'JuniorBot',
    'ManifoldDream',
    'ManifoldBugs',
    'ACXBot',
    'JamesBot',
    'RyanBot',
    'trainbot',
    'runebot',
    'LiquidityBonusBot',
    '538',
    'FairlyRandom',
    'Anatolii',
    'JeremyK',
    'Botmageddon',
    'SmartBot',
    'ShifraGazsi',
    'NiciusBot',
    'Bot',
    'Mason',
    'VersusBot',
    'GPT4',
    'EntropyBot',
    'veat',
    'ms_test',
    'arb',
    'Turbot',
    'MetaculusBot',
    'burkebot',
    'Botflux',
    '7',
    'hyperkaehler',
    'NcyBot',
    'ithaca',
    'GigaGaussian',
    'BottieMcBotface',
    'Seldon',
    'OnePercentBot',
    'arrbit',
    'ManaMaximizer',
    'rita',
    'uhh',
    'ArkPoint',
    'EliBot',
    'manifestussy',
    'mirrorbot',
    'JakeBot',
    'loopsbot',
    'breezybot',
    'echo',
    'Sayaka',
    'cc7',
    'Yuna',
    'ManifoldLove',
    'chooterb0t',
    'bonkbot',
    'NermitBundaloy',
    'FirstBot',
    'bawt',
    'FireTheCEO',
    'JointBot',
    'WrenTec',
    'TigerMcBot',
    'Euclidean',
    'manakin',
    'LUCAtheory',
    'TunglBot',
    'timetraveler',
    'bayesianbot',
    'CharlesLienBot',
    'JaguarMcBot',
    'AImogus',
    'brake',
    'brontobot',
    'OracleBot',
    'spacedroplet',
    'AriZernerBot',
    'PV_bot'
];
const MOD_IDS = [
    'qnIAzz9RamaodeiJSiGZO6xRGC63',
    'srFlJRuVlGa7SEJDM4cY9B5k4Lj2',
    'EJQOCF3MfLTFYbhiKncrNefQDBz1',
    'MV9fTVHetcfp3h6CVYzpypIsbyN2',
    'HTbxWFlzWGeHUTiwZvvF0qm8W433',
    '9dAaZrNSx5OT0su6rpusDoG9WPN2',
    '5XMvQhA3YgcTzyoJRiNqGWyuB9k2',
    '946iB1LqFIR06G7d8q89um57PHh2',
    'hqdXgp0jK2YMMhPs067eFK4afEH3',
    'kbHiTAGBahXdX9Z4sW29JpNrB0l2',
    'W4yEF6idSMcNWEVUquowziSCZFI3',
    '2VhlvfTaRqZbFn2jqxk2Am9jgsE2',
    'cA1JupYR5AR8btHUs2xvkui7jA93',
    'YGZdZUSFQyM8j2YzPaBqki8NBz23',
    'cgrBqe2O3AU4Dnng7Nc9wuJHLKb2',
    '4juQfJkFnwX9nws3dFOpz4gc1mi2',
    'XeQf3ygmrGM1MxdsE3JSlmq8vL42',
    'eSqS9cD5mzYcP2o7FrST8aC5IWn2',
    'JlVpsgzLsbOUT4pajswVMr0ZzmM2',
    '7HhTMy4xECaVKvl5MmEAfVUkRCS2',
    'jO7sUhIDTQbAJ3w86akzncTlpRG2',
    'lkkqZxiWCpOgtJ9ztJcAKz4d9y33',
    'fSrex43BDjeneNZ4ZLfxllSb8b42',
    'BgCeVUcOzkexeJpSPRNomWQaQaD3',
    'KHX2ThSFtLQlau58hrjtCX7OL2h2',
    'hUM4SO8a8qhfqT1gEZ7ElTCGSEz2',
    'tO4DwIsujySUwtSnrr2hnU1WJtJ3',
    'oPxjIzlvC5fRbGCaVgkvAiyoXBB2'
];
const SWEEPSTAKES_MOD_IDS = [
    'uglwf3YKOZNGjjEXKc5HampOFRE2'
];
const MVP = [
    'Eliza',
    'Gabrielle',
    'jacksonpolack'
];
const VERIFIED_USERNAMES = [
    'EliezerYudkowsky',
    'ScottAlexander',
    'Aella',
    'ZviMowshowitz',
    'GavrielK',
    'CGPGrey',
    'LexFridman',
    'patio11',
    'RichardHanania',
    'Qualy',
    'Roko',
    'JonathanBlow',
    'DwarkeshPatel',
    'ByrneHobart',
    'RobertWiblin',
    'KelseyPiper',
    'SpencerGreenberg',
    'PaulChristiano',
    'BuckShlegeris',
    'Natalia',
    'zero',
    'OzzieGooen',
    'OliverHabryka',
    'Alicorn',
    'RazibKhan',
    'JamesMedlock',
    'Writer',
    'GeorgeHotz',
    'ShayneCoplan',
    'SanghyeonSeo',
    'KatjaGrace',
    'EmmettShear',
    'CateHall',
    'RobertSKMiles',
    'TarekMansour',
    'DylanMatthews',
    'RobinHanson',
    'KevinRoose18ac',
    'KnowNothing',
    'SantaPawsSSB',
    'AndersSandberg',
    'JosephWeisenthal',
    'LawrenceLessig',
    'NatFriedman',
    'patrissimo',
    'postjawline',
    'MatthewYglesias',
    'MatthewYglesiasvuyf',
    'BillyMcRascal',
    'kyootbot',
    'MaximLott',
    'liron',
    'LarsDoucet',
    'PeterWildeford',
    'SethWalder',
    'SneakySly',
    'ConorSen',
    'transmissions11',
    'DanHendrycks',
    'Cremieux',
    'tracewoodgrains',
    'LuigiMangione'
];
const BANNED_TRADING_USER_IDS = [
    'zgCIqq8AmRUYVu6AdQ9vVEJN8On1',
    'LIBAoi7tpqeNLYM1xxJ1QJBQqW32',
    'p3ADzwIUS3fk0ka80XYEE3OM3S32',
    '4JuXgDx47xPagH5mcLDqLzUSN5g2'
];
const PARTNER_USER_IDS = [
    'sTUV8ejuM2byukNZp7qKP2OKXMx2',
    'rFJu0EIdR6RP8d1vHKSh62pbnbH2',
    'cb6PJqGOSVPEUhprDHCKWWMuJqu1',
    'HTbxWFlzWGeHUTiwZvvF0qm8W433',
    'YGZdZUSFQyM8j2YzPaBqki8NBz23',
    'hDq0cvn68jbAUVd6aWIU9aSv9ZA2',
    'OEbsAczmbBc4Sl1bacYZNPJLLLc2',
    'JlVpsgzLsbOUT4pajswVMr0ZzmM2',
    'xQqqZqlgcoSxTgPe03BiXmVE2JJ2',
    'Iiok8KHMCRfUiwtMq1tl5PeDbA73',
    'SqOJYkeySMQjqP3UAypw6DxPx4Z2',
    'hqdXgp0jK2YMMhPs067eFK4afEH3',
    'BgCeVUcOzkexeJpSPRNomWQaQaD3',
    'X1xu1kvOxuevx09xuR2urWfzf7i1',
    '4juQfJkFnwX9nws3dFOpz4gc1mi2',
    '8WEiWcxUd7QLeiveyI8iqbSIffU2',
    'Iua2KQvL6KYcfGLGNI6PVeGkseo1',
    'GRaWlYn2fNah0bvr6OW28l28nFn1',
    'ZKkL3lFRFaYfiaT9ZOdiv2iUJBM2',
    'hRbPwezgxnat6GpJQxoFxq1xgUZ2',
    'iPQVGUbwOfT3MmWIZs3JaruVzhV2',
    'k9gKj9BgTLN5tkqYztHeNoSpwyl1',
    'foOeshHZOET3yMvRTMPINpnb8Bj2',
    'EBGhoFSxRtVBu4617SLZUe1FeJt1',
    'GPlNcdBrcfZ3PiAfhnI9mQfHZbm1',
    '4xOTMCIOkGesdJft50wVFZFb5IB3',
    'hUM4SO8a8qhfqT1gEZ7ElTCGSEz2',
    'srFlJRuVlGa7SEJDM4cY9B5k4Lj2',
    'H6b5PWELWfRV6HhyHAlCGq7yJJu2',
    'EJQOCF3MfLTFYbhiKncrNefQDBz1',
    '7HhTMy4xECaVKvl5MmEAfVUkRCS2',
    'oPxjIzlvC5fRbGCaVgkvAiyoXBB2'
];
const NEW_USER_HERLPER_IDS = [
    'cgrBqe2O3AU4Dnng7Nc9wuJHLKb2',
    '2VhlvfTaRqZbFn2jqxk2Am9jgsE2',
    '4juQfJkFnwX9nws3dFOpz4gc1mi2',
    'BgCeVUcOzkexeJpSPRNomWQaQaD3',
    'rQPOELuW5zaapaNPnBYQBMoonk92',
    'igi2zGXsfxYPgB0DJTXVJVmwCOr2',
    'tlmGNz9kjXc2EteizMORes4qvWl2',
    '0k1suGSJKVUnHbCPEhHNpgZPkUP2',
    'AJwLWoo3xue32XIiAVrL5SyR1WB2',
    'uglwf3YKOZNGjjEXKc5HampOFRE2',
    'GRwzCexe5PM6ThrSsodKZT9ziln2',
    'cA1JupYR5AR8btHUs2xvkui7jA93',
    'hUM4SO8a8qhfqT1gEZ7ElTCGSEz2',
    'JlVpsgzLsbOUT4pajswVMr0ZzmM2',
    'srFlJRuVlGa7SEJDM4cY9B5k4Lj2',
    'oPxjIzlvC5fRbGCaVgkvAiyoXBB2',
    'Gg7t9vPD4WPD1iPgj9RUFLYTxgH2',
    'OdBj5DW6PbYtnImvybpyZzfhb133'
];
const OPTED_OUT_OF_LEAGUES = [
    'vuI5upWB8yU00rP7yxj95J2zd952',
    '8lZo8X5lewh4hnCoreI7iSc0GxK2',
    'IPTOzEqrpkWmEzh6hwvAyY9PqFb2',
    'tRZZ6ihugZQLXPf6aPRneGpWLmz1',
    'BhNkw088bMNwIFF2Aq5Gg9NTPzz1',
    'JlVpsgzLsbOUT4pajswVMr0ZzmM2',
    'oPxjIzlvC5fRbGCaVgkvAiyoXBB2',
    'NndHcEmeJhPQ6n7e7yqAPa3Oiih2'
];
const HIDE_FROM_LEADERBOARD_USER_IDS = [
    'BhNkw088bMNwIFF2Aq5Gg9NTPzz1',
    'tRZZ6ihugZQLXPf6aPRneGpWLmz1'
];
const INSTITUTIONAL_PARTNER_USER_IDS = [];
const BEING_DEAD_HEADS = [
    '6hHpzvRG0pMq8PNJs7RZj2qlZGn2',
    'AJwLWoo3xue32XIiAVrL5SyR1WB2',
    'D8O4yNtFhEU8Y7Taf3BilznJOcu2',
    'tlmGNz9kjXc2EteizMORes4qvWl2'
];
const HOUSE_BOT_USERNAME = 'acc';
function supabaseUserConsolePath(userId) {
    const tableId = ENV === 'DEV' ? 19247 : 25916;
    return `https://supabase.com/dashboard/project/${ENV_CONFIG.supabaseInstanceId}/editor/${tableId}/?filter=id%3Aeq%3A${userId}`;
}
function supabasePrivateUserConsolePath(userId) {
    const tableId = ENV === 'DEV' ? 2189688 : 153495548;
    return `https://supabase.com/dashboard/project/${ENV_CONFIG.supabaseInstanceId}/editor/${tableId}/?filter=id%3Aeq%3A${userId}`;
}
function supabaseConsoleContractPath(contractId) {
    const tableId = ENV === 'DEV' ? 19254 : 25924;
    return `https://supabase.com/dashboard/project/${ENV_CONFIG.supabaseInstanceId}/editor/${tableId}?filter=id%3Aeq%3A${contractId}`;
}
function supabaseConsoleTxnPath(txnId) {
    const tableId = ENV === 'DEV' ? 20014 : 25940;
    return `https://supabase.com/dashboard/project/${ENV_CONFIG.supabaseInstanceId}/editor/${tableId}?filter=id%3Aeq%3A${txnId}`;
}
const GOOGLE_PLAY_APP_URL = 'https://play.google.com/store/apps/details?id=com.markets.manifold';
const APPLE_APP_URL = 'https://apps.apple.com/us/app/manifold-markets/id6444136749';
const TEN_YEARS_SECS = 60 * 60 * 24 * 365 * 10;
const DESTINY_GROUP_SLUG = 'destinygg';
const PROD_MANIFOLD_LOVE_GROUP_SLUG = 'manifoldlove-relationships';
const RATING_GROUP_SLUGS = [
    'nonpredictive',
    'unsubsidized'
];
const GROUP_SLUGS_TO_IGNORE_IN_MARKETS_EMAIL = [
    'manifold-6748e065087e',
    'manifold-features-25bad7c7792e',
    'bugs',
    'manifold-leagues',
    ...RATING_GROUP_SLUGS,
    DESTINY_GROUP_SLUG,
    PROD_MANIFOLD_LOVE_GROUP_SLUG
];
const HIDE_FROM_NEW_USER_SLUGS = [
    'fun',
    'selfresolving',
    'experimental',
    'trading-bots',
    'gambling',
    'free-money',
    'mana',
    'whale-watching',
    'spam',
    'test',
    'no-resolution',
    'eto',
    'friend-stocks',
    'ancient-markets',
    'jokes',
    'planecrash',
    'glowfic',
    'all-stonks',
    'the-market',
    'nonpredictive-profits',
    'personal-goals',
    'personal',
    'rationalussy',
    'nsfw',
    'manifold-6748e065087e',
    'bugs',
    'new-years-resolutions-2024',
    'metamarkets',
    'metaforecasting',
    'death-markets',
    ...GROUP_SLUGS_TO_IGNORE_IN_MARKETS_EMAIL
];
const GROUP_SLUGS_TO_NOT_INTRODUCE_IN_FEED = [
    'rationalussy',
    'nsfw',
    'planecrash',
    'glowfic',
    'no-resolution',
    'the-market',
    'spam',
    'test',
    'eto',
    'friend-stocks',
    'testing',
    'all-stonks',
    PROD_MANIFOLD_LOVE_GROUP_SLUG
];
const EXTERNAL_REDIRECTS = [
    '/umami'
];
const DISCORD_INVITE_LINK = 'https://discord.com/invite/eHQBNBqXuh';
const DISCORD_BOT_INVITE_LINK = 'https://discord.com/api/oauth2/authorize?client_id=1074829857537663098&permissions=328565385280&scope=bot%20applications.commands';
const YES_GRAPH_COLOR = '#11b981';
const RESERVED_PATHS = [
    '_next',
    'about',
    'ad',
    'add-funds',
    'ads',
    'analytics',
    'api',
    'browse',
    'calibration',
    'card',
    'cards',
    'career',
    'careers',
    'charity',
    'common',
    'contact',
    'contacts',
    'cowp',
    'create',
    'date-docs',
    'dashboard',
    'discord',
    'discord-bot',
    'dream',
    'embed',
    'facebook',
    'find',
    'github',
    'google',
    'group',
    'groups',
    'help',
    'home',
    'jobs',
    'leaderboard',
    'leaderboards',
    'league',
    'leagues',
    'link',
    'linkAccount',
    'links',
    'live',
    'login',
    'lootbox',
    'mana-auction',
    'manifest',
    'markets',
    'messages',
    'mtg',
    'news',
    'notifications',
    'og-test',
    'payments',
    'portfolio',
    'privacy',
    'profile',
    'public',
    'questions',
    'referral',
    'referrals',
    'send',
    'server-sitemap',
    'sign-in',
    'sign-in-waiting',
    'sitemap',
    'slack',
    'stats',
    'styles',
    'swipe',
    'team',
    'terms',
    'tournament',
    'tournaments',
    'twitch',
    'twitter',
    'umami',
    'user',
    'users',
    'versus',
    'web',
    'welcome'
];
const MANA_PURCHASE_RATE_CHANGE_DATE = new Date('2024-05-16T18:20:00Z');
const MANA_PURCHASE_RATE_REVERT_DATE = new Date('2024-09-17T17:06:00Z') // commit date of sweepcash - PR #2840 5e8b46d8
;
}}),
"[project]/web/lib/firebase/init.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "app": (()=>app),
    "privateStorage": (()=>privateStorage),
    "storage": (()=>storage)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/storage [external] (firebase/storage, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/app [external] (firebase/app, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
const app = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["getApps"])().length ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["getApp"])() : (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["initializeApp"])(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["FIREBASE_CONFIG"]);
const storage = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__["getStorage"])();
const privateStorage = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__["getStorage"])(app, 'gs://' + __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["FIREBASE_CONFIG"].privateBucket);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/web/lib/firebase/users.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "CACHED_REFERRAL_USERNAME_KEY": (()=>CACHED_REFERRAL_USERNAME_KEY),
    "auth": (()=>auth),
    "firebaseLogin": (()=>firebaseLogin),
    "firebaseLogout": (()=>firebaseLogout),
    "isContractBlocked": (()=>isContractBlocked),
    "loginWithApple": (()=>loginWithApple)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$dayjs__$5b$external$5d$__$28$dayjs$2c$__cjs$29$__ = __turbopack_import__("[externals]/dayjs [external] (dayjs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$dayjs$2f$plugin$2f$utc$2e$js__$5b$external$5d$__$28$dayjs$2f$plugin$2f$utc$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/dayjs/plugin/utc.js [external] (dayjs/plugin/utc.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/auth [external] (firebase/auth, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/is-native.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/native-messages.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/firebase/init.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/post-message.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
__TURBOPACK__imported__module__$5b$externals$5d2f$dayjs__$5b$external$5d$__$28$dayjs$2c$__cjs$29$__["default"].extend(__TURBOPACK__imported__module__$5b$externals$5d2f$dayjs$2f$plugin$2f$utc$2e$js__$5b$external$5d$__$28$dayjs$2f$plugin$2f$utc$2e$js$2c$__cjs$29$__["default"]);
const auth = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["getAuth"])(__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["app"]);
const CACHED_REFERRAL_USERNAME_KEY = 'CACHED_REFERRAL_KEY';
const CACHED_REFERRAL_CONTRACT_ID_KEY = 'CACHED_REFERRAL_CONTRACT_KEY';
async function firebaseLogin() {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getIsNative"])()) {
        // Post the message back to expo
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["postMessageToNative"])('loginClicked', {});
        return;
    }
    const provider = new __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["GoogleAuthProvider"]();
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["signInWithPopup"])(auth, provider).then(async (result)=>{
        return result;
    });
}
async function loginWithApple() {
    const provider = new __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["OAuthProvider"]('apple.com');
    provider.addScope('email');
    provider.addScope('name');
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["signInWithPopup"])(auth, provider).then((result)=>{
        return result;
    }).catch((error)=>{
        console.error(error);
    });
}
async function firebaseLogout() {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getIsNative"])()) (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["nativeSignOut"])();
    await auth.signOut();
}
const isContractBlocked = (privateUser, contract)=>{
    if (!privateUser) return false;
    const { blockedContractIds, blockedByUserIds, blockedUserIds, blockedGroupSlugs } = privateUser;
    return blockedContractIds?.includes(contract.id) || contract.groupSlugs?.some((slug)=>blockedGroupSlugs?.includes(slug)) || blockedByUserIds?.includes(contract.creatorId) || blockedUserIds?.includes(contract.creatorId);
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/lodash/forEach.js [external] (lodash/forEach.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/forEach.js", () => require("lodash/forEach.js"));

module.exports = mod;
}}),
"[externals]/zod [external] (zod, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("zod");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[project]/common/src/api/zod-types.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "DashboardItemSchema": (()=>DashboardItemSchema),
    "DashboardLinkItemSchema": (()=>DashboardLinkItemSchema),
    "DashboardQuestionItemSchema": (()=>DashboardQuestionItemSchema),
    "DashboardTextItemSchema": (()=>DashboardTextItemSchema),
    "coerceBoolean": (()=>coerceBoolean),
    "contentSchema": (()=>contentSchema)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const contentSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].lazy(()=>__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].intersection(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].record(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].any()), __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
        attrs: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].record(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].any()).optional(),
        content: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(contentSchema).optional(),
        marks: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].intersection(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].record(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].any()), __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            attrs: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].record(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].any()).optional()
        }))).optional(),
        text: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
    })));
const DashboardQuestionItemSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('question'),
    slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
}).strict();
const DashboardLinkItemSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('link'),
    url: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
}).strict();
const DashboardTextItemSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('text'),
    id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    content: contentSchema
}).strict();
const DashboardItemSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    DashboardQuestionItemSchema,
    DashboardLinkItemSchema,
    DashboardTextItemSchema
]);
const coerceBoolean = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean(),
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('true'),
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('false')
]).transform((value)=>value === true || value === 'true');
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/tier.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "getTierFromLiquidity": (()=>getTierFromLiquidity),
    "tiers": (()=>tiers)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/economy.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const tiers = [
    'play',
    'plus',
    'premium',
    'crystal'
];
function getTierFromLiquidity(contract, liquidity) {
    const { outcomeType } = contract;
    let numAnswers = undefined;
    if ('answers' in contract) {
        numAnswers = contract.answers.length;
    }
    const ante = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getAnte"])(outcomeType, numAnswers);
    // Iterate through the tiers from highest to lowest
    for(let i = tiers.length - 1; i >= 0; i--){
        const tier = tiers[i];
        const tierLiquidity = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTieredCost"])(ante, tier, outcomeType);
        // Return the first tier where the liquidity is greater or equal to the tier's requirement
        if (liquidity >= tierLiquidity) {
            return tier;
        }
    }
    // Default to the lowest tier if none of the conditions are met
    return 'play';
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/sum.js", () => require("lodash/sum.js"));

module.exports = mod;
}}),
"[project]/common/src/stonk.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "STONK_INITIAL_PROB": (()=>STONK_INITIAL_PROB),
    "STONK_NO": (()=>STONK_NO),
    "STONK_YES": (()=>STONK_YES),
    "getSharesFromStonkShares": (()=>getSharesFromStonkShares),
    "getStonkDisplayShares": (()=>getStonkDisplayShares),
    "getStonkPriceAtProb": (()=>getStonkPriceAtProb),
    "getStonkPriceMax": (()=>getStonkPriceMax)
});
const STONK_YES = 'BUY';
const STONK_NO = 'SHORT';
const STONK_INITIAL_PROB = 50;
const DEFAULT_STONK_MULTIPLIER = 500;
const getStonkPriceMax = ()=>{
    return Math.round(getStonkPriceAtProb({}, 1));
};
const getStonkPriceAtProb = (contract, prob)=>{
    const cappedProb = Math.min(Math.max(prob, 0.0001), 0.9999);
    const logTerm = Math.log(cappedProb / (1 - cappedProb));
    const maxTerm = Math.max(logTerm, cappedProb);
    const stonkPrice = maxTerm * DEFAULT_STONK_MULTIPLIER;
    return stonkPrice;
};
const getStonkDisplayShares = (contract, shares, precision)=>{
    if (precision !== undefined) {
        return Number((Math.floor(shares) / getStonkPriceAtProb(contract, 1)).toPrecision(2));
    }
    return Number((Math.floor(shares) / getStonkPriceAtProb(contract, 1)).toFixed(5));
};
const getSharesFromStonkShares = (contract, displayShares, totalShares)=>{
    const stonkShares = displayShares * getStonkPriceAtProb(contract, 1);
    if (Math.abs(totalShares - stonkShares) < 1) {
        return totalShares;
    }
    return stonkShares;
};
}}),
"[project]/common/src/util/format.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "SWEEPIES_MONIKER": (()=>SWEEPIES_MONIKER),
    "formatLargeNumber": (()=>formatLargeNumber),
    "formatMoney": (()=>formatMoney),
    "formatMoneyNoMoniker": (()=>formatMoneyNoMoniker),
    "formatMoneyNumber": (()=>formatMoneyNumber),
    "formatMoneyShort": (()=>formatMoneyShort),
    "formatMoneyToDecimal": (()=>formatMoneyToDecimal),
    "formatMoneyUSD": (()=>formatMoneyUSD),
    "formatMoneyWithDecimals": (()=>formatMoneyWithDecimals),
    "formatOutcomeLabel": (()=>formatOutcomeLabel),
    "formatPercent": (()=>formatPercent),
    "formatPercentNumber": (()=>formatPercentNumber),
    "formatPercentShort": (()=>formatPercentShort),
    "formatShares": (()=>formatShares),
    "formatSpice": (()=>formatSpice),
    "formatSweepies": (()=>formatSweepies),
    "formatSweepiesNumber": (()=>formatSweepiesNumber),
    "formatSweepsToUSD": (()=>formatSweepsToUSD),
    "formatWithCommas": (()=>formatWithCommas),
    "formatWithToken": (()=>formatWithToken),
    "getMoneyNumber": (()=>getMoneyNumber),
    "getMoneyNumberToDecimal": (()=>getMoneyNumberToDecimal),
    "getPercent": (()=>getPercent),
    "manaToUSD": (()=>manaToUSD),
    "maybePluralize": (()=>maybePluralize),
    "shortFormatNumber": (()=>shortFormatNumber),
    "toCamelCase": (()=>toCamelCase)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$stonk$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/stonk.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
;
;
const formatter = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    maximumFractionDigits: 0,
    minimumFractionDigits: 0
});
const formatterWithFraction = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    maximumFractionDigits: 2,
    minimumFractionDigits: 2
});
const SWEEPIES_MONIKER = '𝕊';
function formatWithToken(variables) {
    const { amount, token, toDecimal, short } = variables;
    if (token === 'CASH') {
        return formatSweepies(amount, {
            toDecimal,
            short
        });
    }
    if (toDecimal) {
        return formatMoneyWithDecimals(amount);
    }
    if (short) {
        return formatMoneyShort(amount);
    }
    return formatMoney(amount);
}
function formatMoney(amount, token) {
    if (token === 'CASH') {
        return formatSweepies(amount);
    }
    const newAmount = getMoneyNumber(amount);
    return formatter.format(newAmount).replace('$', __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].moneyMoniker);
}
function formatSweepies(amount, parameters) {
    const numberText = formatSweepiesNumber(amount, parameters);
    const negative = numberText.startsWith('-');
    return (negative ? '-' : '') + SWEEPIES_MONIKER + numberText.replace('-', '');
}
function formatSweepiesNumber(amount, parameters) {
    const { toDecimal, short } = parameters ?? {};
    if (short) {
        return formatLargeNumber(amount);
    }
    const toDecimalPlace = toDecimal ?? 2;
    // return amount.toFixed(toDecimal ?? 2)
    return amount.toLocaleString('en-US', {
        minimumFractionDigits: toDecimalPlace,
        maximumFractionDigits: toDecimalPlace
    });
}
function formatSpice(amount) {
    const newAmount = getMoneyNumber(amount);
    return formatter.format(newAmount).replace('$', 'P ');
}
function formatMoneyNoMoniker(amount) {
    const newAmount = getMoneyNumber(amount);
    return formatter.format(newAmount).replace('$', '');
}
function formatMoneyShort(amount) {
    const newAmount = getMoneyNumber(amount);
    return __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].moneyMoniker + formatLargeNumber(newAmount);
}
function formatMoneyUSD(amount, fraction) {
    if (fraction) {
        return formatterWithFraction.format(amount);
    }
    const newAmount = getMoneyNumber(amount);
    return formatter.format(newAmount);
}
function formatSweepsToUSD(amount) {
    return formatterWithFraction.format(amount);
}
function formatMoneyNumber(amount) {
    const newAmount = getMoneyNumber(amount);
    return formatter.format(newAmount).replace('$', '');
}
function getMoneyNumber(amount) {
    // Handle 499.9999999999999 case
    const plusEpsilon = (amount > 0 ? Math.floor : Math.ceil)(amount + 0.00000000001 * Math.sign(amount));
    return Math.round(plusEpsilon) === 0 ? 0 : plusEpsilon;
}
function getMoneyNumberToDecimal(amount) {
    return Math.abs(amount - Math.round(amount)) < 0.0001 ? Math.round(amount).toFixed(0) : amount.toFixed(1);
}
function formatMoneyWithDecimals(amount) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].moneyMoniker + amount.toFixed(2);
}
function formatMoneyToDecimal(amount) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].moneyMoniker + getMoneyNumberToDecimal(amount);
}
function formatWithCommas(amount) {
    return formatter.format(Math.floor(amount)).replace('$', '');
}
function formatShares(amount, isCashContract) {
    if (isCashContract) {
        return amount.toLocaleString('en-US', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        });
    } else {
        return formatWithCommas(amount);
    }
}
function manaToUSD(mana) {
    return (mana / 1000).toLocaleString('en-US', {
        style: 'currency',
        currency: 'USD'
    });
}
function formatPercentShort(zeroToOne) {
    return getPercent(zeroToOne).toFixed(0) + '%';
}
function getPercent(zeroToOne) {
    return Math.min(zeroToOne * 100, 99);
}
function getPercentDecimalPlaces(zeroToOne) {
    return zeroToOne < 0.02 || zeroToOne > 0.98 ? 1 : 0;
}
function formatPercent(zeroToOne) {
    // Show 1 decimal place if <2% or >98%, giving more resolution on the tails
    const decimalPlaces = getPercentDecimalPlaces(zeroToOne);
    const percent = zeroToOne * 100;
    return percent.toFixed(decimalPlaces) + '%';
}
function formatPercentNumber(zeroToOne) {
    // Show 1 decimal place if <2% or >98%, giving more resolution on the tails
    const decimalPlaces = getPercentDecimalPlaces(zeroToOne);
    return Number((zeroToOne * 100).toFixed(decimalPlaces));
}
const showPrecision = (x, sigfigs)=>// convert back to number for weird formatting reason
    `${Number(x.toPrecision(sigfigs))}`;
function formatLargeNumber(num, sigfigs = 2) {
    const absNum = Math.abs(num);
    if (absNum < 0.1) return showPrecision(num, 1);
    if (absNum < 1) return showPrecision(num, sigfigs);
    if (absNum < 100) return showPrecision(num, 2);
    if (absNum < 1000) return showPrecision(num, 3);
    if (absNum < 10000) return showPrecision(num, 4);
    const suffix = [
        '',
        'k',
        'm',
        'b',
        't',
        'q'
    ];
    const i = Math.floor(Math.log10(absNum) / 3);
    const numStr = showPrecision(num / Math.pow(10, 3 * i), sigfigs);
    return `${numStr}${suffix[i] ?? ''}`;
}
function shortFormatNumber(num) {
    if (num < 10 && num > -10) return showPrecision(num, 1);
    if (num < 100 && num > -100) return showPrecision(num, 2);
    if (num < 1000 && num > -1000) return showPrecision(num, 3);
    const suffix = [
        '',
        'k',
        'm',
        'b',
        't',
        'q'
    ];
    const i = Math.floor(Math.log10(Math.abs(num)) / 3);
    const numStr = showPrecision(num / Math.pow(10, 3 * i), 2);
    return `${numStr}${suffix[i] ?? ''}`;
}
function maybePluralize(word, num, plural = 's') {
    return num === 1 ? word : word + plural;
}
function toCamelCase(words) {
    const camelCase = words.split(' ').map((word)=>word.trim()).filter((word)=>word).map((word, index)=>index === 0 ? word : word[0].toLocaleUpperCase() + word.substring(1)).join('');
    // Remove non-alpha-numeric-underscore chars.
    const regex = /(?:^|\s)(?:[a-z0-9_]+)/gi;
    return (camelCase.match(regex) || [])[0] ?? '';
}
const formatOutcomeLabel = (contract, outcomeLabel, outcomePseudonym)=>{
    if (outcomePseudonym) {
        return outcomePseudonym;
    }
    if (contract.outcomeType === 'BINARY' || contract.mechanism === 'cpmm-multi-1') {
        return outcomeLabel;
    }
    if (contract.outcomeType === 'STONK') {
        return outcomeLabel === 'YES' ? __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$stonk$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["STONK_YES"] : __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$stonk$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["STONK_NO"];
    }
    return outcomeLabel === 'YES' ? 'HIGHER' : 'LOWER';
};
}}),
"[externals]/lodash/groupBy.js [external] (lodash/groupBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/groupBy.js", () => require("lodash/groupBy.js"));

module.exports = mod;
}}),
"[externals]/lodash/mapValues.js [external] (lodash/mapValues.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/mapValues.js", () => require("lodash/mapValues.js"));

module.exports = mod;
}}),
"[externals]/lodash/minBy.js [external] (lodash/minBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/minBy.js", () => require("lodash/minBy.js"));

module.exports = mod;
}}),
"[externals]/lodash/omitBy.js [external] (lodash/omitBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/omitBy.js", () => require("lodash/omitBy.js"));

module.exports = mod;
}}),
"[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/sumBy.js", () => require("lodash/sumBy.js"));

module.exports = mod;
}}),
"[externals]/lodash/isEqual.js [external] (lodash/isEqual.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/isEqual.js", () => require("lodash/isEqual.js"));

module.exports = mod;
}}),
"[externals]/lodash/union.js [external] (lodash/union.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/union.js", () => require("lodash/union.js"));

module.exports = mod;
}}),
"[project]/common/src/util/object.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "addObjects": (()=>addObjects),
    "hasChanges": (()=>hasChanges),
    "hasSignificantDeepChanges": (()=>hasSignificantDeepChanges),
    "removeNullOrUndefinedProps": (()=>removeNullOrUndefinedProps),
    "removeUndefinedProps": (()=>removeUndefinedProps),
    "subtractObjects": (()=>subtractObjects)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$isEqual$2e$js__$5b$external$5d$__$28$lodash$2f$isEqual$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/isEqual.js [external] (lodash/isEqual.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/mapValues.js [external] (lodash/mapValues.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$union$2e$js__$5b$external$5d$__$28$lodash$2f$union$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/union.js [external] (lodash/union.js, cjs)");
;
;
;
const removeUndefinedProps = (obj)=>{
    const newObj = {};
    for (const key of Object.keys(obj)){
        if (obj[key] !== undefined) newObj[key] = obj[key];
    }
    return newObj;
};
const removeNullOrUndefinedProps = (obj, exceptions)=>{
    const newObj = {};
    for (const key of Object.keys(obj)){
        if (obj[key] !== undefined && obj[key] !== null || (exceptions ?? []).includes(key)) newObj[key] = obj[key];
    }
    return newObj;
};
const addObjects = (obj1, obj2)=>{
    const keys = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$union$2e$js__$5b$external$5d$__$28$lodash$2f$union$2e$js$2c$__cjs$29$__["default"])(Object.keys(obj1), Object.keys(obj2));
    const newObj = {};
    for (const key of keys){
        newObj[key] = (obj1[key] ?? 0) + (obj2[key] ?? 0);
    }
    return newObj;
};
const subtractObjects = (obj1, obj2)=>{
    const keys = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$union$2e$js__$5b$external$5d$__$28$lodash$2f$union$2e$js$2c$__cjs$29$__["default"])(Object.keys(obj1), Object.keys(obj2));
    const newObj = {};
    for (const key of keys){
        newObj[key] = (obj1[key] ?? 0) - (obj2[key] ?? 0);
    }
    return newObj;
};
const hasChanges = (obj, partial)=>{
    const currValues = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(partial, (_, key)=>obj[key]);
    return !(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$isEqual$2e$js__$5b$external$5d$__$28$lodash$2f$isEqual$2e$js$2c$__cjs$29$__["default"])(currValues, partial);
};
const hasSignificantDeepChanges = (obj, partial, epsilonForNumbers)=>{
    const compareValues = (currValue, partialValue)=>{
        if (typeof currValue === 'number' && typeof partialValue === 'number') {
            return Math.abs(currValue - partialValue) > epsilonForNumbers;
        }
        if (typeof currValue === 'object' && typeof partialValue === 'object') {
            return hasSignificantDeepChanges(currValue, partialValue, epsilonForNumbers);
        }
        return !(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$isEqual$2e$js__$5b$external$5d$__$28$lodash$2f$isEqual$2e$js$2c$__cjs$29$__["default"])(currValue, partialValue);
    };
    for(const key in partial){
        if (Object.prototype.hasOwnProperty.call(partial, key)) {
            if (compareValues(obj[key], partial[key])) {
                return true;
            }
        }
    }
    return false;
};
}}),
"[project]/common/src/fees.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "DPM_CREATOR_FEE": (()=>DPM_CREATOR_FEE),
    "DPM_FEES": (()=>DPM_FEES),
    "DPM_PLATFORM_FEE": (()=>DPM_PLATFORM_FEE),
    "FEE_START_TIME": (()=>FEE_START_TIME),
    "FLAT_COMMENT_FEE": (()=>FLAT_COMMENT_FEE),
    "FLAT_TRADE_FEE": (()=>FLAT_TRADE_FEE),
    "getFeeTotal": (()=>getFeeTotal),
    "getFeesSplit": (()=>getFeesSplit),
    "getTakerFee": (()=>getTakerFee),
    "noFees": (()=>noFees),
    "sumAllFees": (()=>sumAllFees)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
;
const FEE_START_TIME = 1713292320000;
const TAKER_FEE_CONSTANT = 0;
const getTakerFee = (shares, prob)=>{
    return TAKER_FEE_CONSTANT * prob * (1 - prob) * shares;
};
const getFeesSplit = (totalFees)=>{
    return {
        creatorFee: 0,
        platformFee: totalFees,
        liquidityFee: 0
    };
};
const FLAT_TRADE_FEE = 0;
const FLAT_COMMENT_FEE = 1;
const DPM_PLATFORM_FEE = 0.0;
const DPM_CREATOR_FEE = 0.0;
const DPM_FEES = DPM_PLATFORM_FEE + DPM_CREATOR_FEE;
const noFees = {
    creatorFee: 0,
    platformFee: 0,
    liquidityFee: 0
};
const getFeeTotal = (fees)=>{
    return fees.creatorFee + fees.platformFee + fees.liquidityFee;
};
const sumAllFees = (fees)=>{
    let totalFees = noFees;
    fees.forEach((totalFee)=>totalFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(totalFees, totalFee));
    return getFeeTotal(totalFees);
};
}}),
"[externals]/lodash/sortBy.js [external] (lodash/sortBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/sortBy.js", () => require("lodash/sortBy.js"));

module.exports = mod;
}}),
"[project]/common/src/util/math.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "EPSILON": (()=>EPSILON),
    "average": (()=>average),
    "floatingEqual": (()=>floatingEqual),
    "floatingGreater": (()=>floatingGreater),
    "floatingGreaterEqual": (()=>floatingGreaterEqual),
    "floatingLesserEqual": (()=>floatingLesserEqual),
    "logInterpolation": (()=>logInterpolation),
    "logit": (()=>logit),
    "median": (()=>median),
    "sumOfSquaredError": (()=>sumOfSquaredError)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sortBy.js [external] (lodash/sortBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
;
;
const logInterpolation = (min, max, value)=>{
    if (value <= min) return 0;
    if (value >= max) return 1;
    return Math.log(value - min + 1) / Math.log(max - min + 1);
};
const logit = (x)=>Math.log(x / (1 - x));
function median(xs) {
    if (xs.length === 0) return NaN;
    const sorted = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__["default"])(xs, (x)=>x);
    const mid = Math.floor(sorted.length / 2);
    if (sorted.length % 2 === 0) {
        return (sorted[mid - 1] + sorted[mid]) / 2;
    }
    return sorted[mid];
}
function average(xs) {
    return xs.length === 0 ? 0 : (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(xs) / xs.length;
}
function sumOfSquaredError(xs) {
    const mean = average(xs);
    let total = 0;
    for (const x of xs){
        const error = x - mean;
        total += error * error;
    }
    return total;
}
const EPSILON = 0.00000001;
function floatingEqual(a, b, epsilon = EPSILON) {
    return Math.abs(a - b) < epsilon;
}
function floatingGreater(a, b, epsilon = EPSILON) {
    return a - epsilon > b;
}
function floatingGreaterEqual(a, b, epsilon = EPSILON) {
    return a + epsilon >= b;
}
function floatingLesserEqual(a, b, epsilon = EPSILON) {
    return a - epsilon <= b;
}
}}),
"[project]/common/src/api/utils.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "APIError": (()=>APIError),
    "getApiUrl": (()=>getApiUrl),
    "getCloudRunServiceUrl": (()=>getCloudRunServiceUrl),
    "getWebsocketUrl": (()=>getWebsocketUrl),
    "pathWithPrefix": (()=>pathWithPrefix)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/schema.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
class APIError extends Error {
    code;
    details;
    constructor(code, message, details){
        super(message);
        this.code = code;
        this.name = 'APIError';
        this.details = details;
    }
}
function getCloudRunServiceUrl(name) {
    const { cloudRunId, cloudRunRegion } = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"];
    return `https://${name}-${cloudRunId}-${cloudRunRegion}.a.run.app`;
}
function pathWithPrefix(path) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["API"][path].visibility === 'public' ? `v0/${path}` : path;
}
function getWebsocketUrl() {
    if (process.env.NEXT_PUBLIC_API_URL) {
        return `ws://${process.env.NEXT_PUBLIC_API_URL}/ws`;
    } else {
        const { apiEndpoint } = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"];
        return `wss://${apiEndpoint}/ws`;
    }
}
function getApiUrl(path) {
    if (path in __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["API"]) {
        path = pathWithPrefix(path);
    }
    if (process.env.NEXT_PUBLIC_API_URL) {
        return `http://${process.env.NEXT_PUBLIC_API_URL}/${path}`;
    } else {
        const { apiEndpoint } = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"];
        return `https://${apiEndpoint}/${path}`;
    }
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/lodash/first.js [external] (lodash/first.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/first.js", () => require("lodash/first.js"));

module.exports = mod;
}}),
"[project]/common/src/util/algos.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "binarySearch": (()=>binarySearch)
});
function binarySearch(min, max, comparator, maxIterations = 50) {
    let mid = 0;
    let i = 0;
    while(true){
        mid = min + (max - min) / 2;
        // Break once we've reached max precision.
        if (mid === min || mid === max) break;
        const comparison = comparator(mid);
        if (comparison === 0) break;
        else if (comparison > 0) {
            max = mid;
        } else {
            min = mid;
        }
        i++;
        if (i >= maxIterations) {
            break;
        }
        if (i > 100000) {
            throw new Error('Binary search exceeded max iterations' + JSON.stringify({
                min,
                max,
                mid,
                i
            }, null, 2));
        }
    }
    return mid;
}
}}),
"[project]/common/src/calculate-cpmm-arbitrage.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "buyNoSharesUntilAnswersSumToOne": (()=>buyNoSharesUntilAnswersSumToOne),
    "calculateCpmmMultiArbitrageBet": (()=>calculateCpmmMultiArbitrageBet),
    "calculateCpmmMultiArbitrageSellNo": (()=>calculateCpmmMultiArbitrageSellNo),
    "calculateCpmmMultiArbitrageSellYes": (()=>calculateCpmmMultiArbitrageSellYes),
    "calculateCpmmMultiArbitrageSellYesEqually": (()=>calculateCpmmMultiArbitrageSellYesEqually),
    "calculateCpmmMultiArbitrageYesBets": (()=>calculateCpmmMultiArbitrageYesBets),
    "combineBetsOnSameAnswers": (()=>combineBetsOnSameAnswers),
    "floatingArbitrageEqual": (()=>floatingArbitrageEqual),
    "getBetResultsAndUpdatedAnswers": (()=>getBetResultsAndUpdatedAnswers),
    "getSellAllRedemptionPreliminaryBets": (()=>getSellAllRedemptionPreliminaryBets)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$first$2e$js__$5b$external$5d$__$28$lodash$2f$first$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/first.js [external] (lodash/first.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/groupBy.js [external] (lodash/groupBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/mapValues.js [external] (lodash/mapValues.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/contract.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/math.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/fees.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/algos.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/new-bet.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
;
const DEBUG = false;
const noFillsReturn = (outcome, answer, collectedFees)=>({
        newBetResult: {
            outcome,
            answer,
            takers: [],
            makers: [],
            ordersToCancel: [],
            cpmmState: {
                pool: {
                    YES: answer.poolYes,
                    NO: answer.poolNo
                },
                p: 0.5,
                collectedFees
            },
            totalFees: {
                creatorFee: 0,
                liquidityFee: 0,
                platformFee: 0
            }
        },
        otherBetResults: []
    });
function calculateCpmmMultiArbitrageBet(answers, answerToBuy, outcome, betAmount, initialLimitProb, unfilledBets, balanceByUserId, collectedFees) {
    const limitProb = initialLimitProb !== undefined ? initialLimitProb : outcome === 'YES' ? __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"] : __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"];
    if (answerToBuy.prob < __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"] && outcome === 'NO' || answerToBuy.prob > __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"] && outcome === 'YES' || answerToBuy.prob > limitProb && outcome === 'YES' || answerToBuy.prob < limitProb && outcome === 'NO') {
        return noFillsReturn(outcome, answerToBuy, collectedFees);
    }
    const result = outcome === 'YES' ? calculateCpmmMultiArbitrageBetYes(answers, answerToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees) : calculateCpmmMultiArbitrageBetNo(answers, answerToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees);
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])((0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(result.newBetResult.takers, 'amount'), 0)) {
        // No trades matched.
        const { outcome, answer } = result.newBetResult;
        return noFillsReturn(outcome, answer, collectedFees);
    }
    return result;
}
function calculateCpmmMultiArbitrageYesBets(answers, answersToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const result = calculateCpmmMultiArbitrageBetsYes(answers, answersToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees);
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])((0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(result.newBetResults.map((r)=>r.takers), 'amount'), 0)) {
        // No trades matched.
        result.newBetResults.map((r)=>{
            return {
                newBetResult: {
                    outcome: r.outcome,
                    answer: r.answer,
                    takers: [],
                    makers: [],
                    ordersToCancel: [],
                    cpmmState: {
                        pool: {
                            YES: r.answer.poolYes,
                            NO: r.answer.poolNo
                        },
                        p: 0.5,
                        collectedFees
                    },
                    totalFees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
                },
                otherBetResults: []
            };
        });
    }
    return result;
}
function calculateCpmmMultiArbitrageBetsYes(initialAnswers, initialAnswersToBuy, initialBetAmount, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const noBetResults = [];
    const yesBetResults = [];
    let updatedAnswers = initialAnswers;
    let amountToBet = initialBetAmount;
    while(amountToBet > 0.01){
        const answersToBuy = updatedAnswers.filter((a)=>initialAnswersToBuy.map((an)=>an.id).includes(a.id));
        // buy equal number of shares in each answer
        const yesSharePriceSum = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(answersToBuy, 'prob');
        const maxYesShares = amountToBet / yesSharePriceSum;
        let yesAmounts = [];
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, maxYesShares, (yesShares)=>{
            yesAmounts = answersToBuy.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
                    pool: {
                        YES: poolYes,
                        NO: poolNo
                    },
                    p: 0.5,
                    collectedFees
                }, yesShares, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId));
            const totalYesAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(yesAmounts);
            return totalYesAmount - amountToBet;
        });
        const { noBuyResults, yesBets, newUpdatedAnswers } = getBetResultsAndUpdatedAnswers(answersToBuy, yesAmounts, updatedAnswers, limitProb, unfilledBets, balanceByUserId, collectedFees);
        updatedAnswers = newUpdatedAnswers;
        amountToBet = noBuyResults.extraMana;
        noBetResults.push(...noBuyResults.noBetResults);
        yesBetResults.push(...yesBets);
    }
    const noBetResultsOnBoughtAnswer = combineBetsOnSameAnswers(noBetResults, 'NO', updatedAnswers.filter((r)=>initialAnswersToBuy.map((a)=>a.id).includes(r.id)), collectedFees);
    const extraFeesPerBoughtAnswer = Object.fromEntries(noBetResultsOnBoughtAnswer.map((r)=>[
            r.answer.id,
            r.totalFees
        ]));
    const newBetResults = combineBetsOnSameAnswers(yesBetResults, 'YES', updatedAnswers.filter((a)=>initialAnswersToBuy.map((an)=>an.id).includes(a.id)), collectedFees, true, extraFeesPerBoughtAnswer);
    // TODO: after adding limit orders, we need to keep track of the possible matchedBetIds in the no redemption bets we're throwing away
    const otherBetResults = combineBetsOnSameAnswers(noBetResults, 'NO', updatedAnswers.filter((r)=>!initialAnswersToBuy.map((a)=>a.id).includes(r.id)), collectedFees);
    return {
        newBetResults,
        otherBetResults,
        updatedAnswers
    };
}
const getBetResultsAndUpdatedAnswers = (answersToBuy, yesAmounts, updatedAnswers, limitProb, unfilledBets, balanceByUserId, collectedFees, answerIdsWithFees)=>{
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const yesBetResultsAndUpdatedAnswers = answersToBuy.map((answerToBuy, i)=>{
        const pool = {
            YES: answerToBuy.poolYes,
            NO: answerToBuy.poolNo
        };
        const yesBetResult = {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool,
                p: 0.5,
                collectedFees
            }, 'YES', yesAmounts[i], limitProb, unfilledBetsByAnswer[answerToBuy.id] ?? [], balanceByUserId, undefined, answerIdsWithFees && !answerIdsWithFees?.includes(answerToBuy.id)),
            answer: answerToBuy
        };
        const { cpmmState } = yesBetResult;
        const { pool: newPool, p } = cpmmState;
        const { YES: poolYes, NO: poolNo } = newPool;
        const prob = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(newPool, p);
        const newAnswerState = {
            ...answerToBuy,
            poolYes,
            poolNo,
            prob
        };
        return {
            yesBetResult,
            newAnswerState
        };
    });
    const yesBets = yesBetResultsAndUpdatedAnswers.map((r)=>r.yesBetResult);
    const newAnswerStates = yesBetResultsAndUpdatedAnswers.map((r)=>r.newAnswerState);
    const noBuyResults = buyNoSharesUntilAnswersSumToOne(updatedAnswers.map((answer)=>newAnswerStates.find((newAnswerState)=>newAnswerState.id === answer.id) ?? answer), unfilledBets, balanceByUserId, collectedFees, answerIdsWithFees);
    // Update new answer states from bets placed on all answers
    const newUpdatedAnswers = noBuyResults.noBetResults.map((noBetResult)=>{
        const { cpmmState } = noBetResult;
        const { pool: newPool, p } = cpmmState;
        const { YES: poolYes, NO: poolNo } = newPool;
        const prob = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(newPool, p);
        return {
            ...noBetResult.answer,
            poolYes,
            poolNo,
            prob
        };
    });
    return {
        newUpdatedAnswers,
        yesBets,
        noBuyResults
    };
};
const combineBetsOnSameAnswers = (bets, outcome, updatedAnswers, collectedFees, // The fills after the first are free bc they're due to arbitrage.
fillsFollowingFirstAreFree, extraFeesPerAnswer)=>{
    return updatedAnswers.map((answer)=>{
        const betsForAnswer = bets.filter((bet)=>bet.answer.id === answer.id);
        const { poolYes, poolNo } = answer;
        const bet = betsForAnswer[0];
        const extraFees = extraFeesPerAnswer?.[answer.id] ?? __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"];
        const totalFees = betsForAnswer.reduce((acc, b)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(acc, b.totalFees), extraFees);
        return {
            ...bet,
            takers: fillsFollowingFirstAreFree ? [
                {
                    ...bet.takers[0],
                    shares: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(betsForAnswer.flatMap((r)=>r.takers), 'shares')
                }
            ] : betsForAnswer.flatMap((r)=>r.takers),
            makers: betsForAnswer.flatMap((r)=>r.makers),
            ordersToCancel: betsForAnswer.flatMap((r)=>r.ordersToCancel),
            outcome,
            cpmmState: {
                p: 0.5,
                pool: {
                    YES: poolYes,
                    NO: poolNo
                },
                collectedFees
            },
            answer,
            totalFees
        };
    });
};
function calculateCpmmMultiArbitrageBetYes(answers, answerToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const startTime = Date.now();
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const noSharePriceSum = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(answers.filter((a)=>a.id !== answerToBuy.id).map((a)=>1 - a.prob));
    // If you spend all of amount on NO shares at current price. Subtract out from the price the redemption mana.
    const maxNoShares = betAmount / (noSharePriceSum - answers.length + 2);
    const noShares = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, maxNoShares, (noShares)=>{
        const result = buyNoSharesInOtherAnswersThenYesInAnswer(answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, noShares, collectedFees);
        if (!result) {
            return 1;
        }
        const newPools = [
            ...result.noBetResults.map((r)=>r.cpmmState.pool),
            result.yesBetResult.cpmmState.pool
        ];
        const diff = 1 - (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5));
        return diff;
    });
    const result = buyNoSharesInOtherAnswersThenYesInAnswer(answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, noShares, collectedFees);
    if (!result) {
        console.log('no result', result);
        throw new Error('Invariant failed in calculateCpmmMultiArbitrageBetYes');
    }
    const { noBetResults, yesBetResult } = result;
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    const newBetResult = {
        ...yesBetResult,
        outcome: 'YES'
    };
    const otherBetResults = noBetResults.map((r)=>({
            ...r,
            outcome: 'NO'
        }));
    return {
        newBetResult,
        otherBetResults
    };
}
const buyNoSharesInOtherAnswersThenYesInAnswer = (answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, noShares, collectedFees)=>{
    const otherAnswers = answers.filter((a)=>a.id !== answerToBuy.id);
    const noAmounts = otherAnswers.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool: {
                YES: poolYes,
                NO: poolNo
            },
            p: 0.5,
            collectedFees
        }, noShares, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
    const totalNoAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(noAmounts);
    const noBetResults = noAmounts.map((noAmount, i)=>{
        const answer = otherAnswers[i];
        const pool = {
            YES: answer.poolYes,
            NO: answer.poolNo
        };
        return {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool,
                p: 0.5,
                collectedFees
            }, 'NO', noAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
            answer
        };
    });
    // Identity: No shares in all other answers is equal to noShares * (n-2) mana + yes shares in answerToBuy (quantity: noShares)
    const redeemedAmount = noShares * (answers.length - 2);
    const netNoAmount = totalNoAmount - redeemedAmount;
    let yesBetAmount = betAmount - netNoAmount;
    if (floatingArbitrageEqual(yesBetAmount, 0)) {
        yesBetAmount = 0;
    }
    if (yesBetAmount < 0) {
        return undefined;
    }
    for (const noBetResult of noBetResults){
        const redemptionFill = {
            matchedBetId: null,
            amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'amount'),
            shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'shares'),
            timestamp: Date.now(),
            fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
        };
        noBetResult.takers.push(redemptionFill);
    }
    const pool = {
        YES: answerToBuy.poolYes,
        NO: answerToBuy.poolNo
    };
    const yesBetResult = {
        ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
            pool,
            p: 0.5,
            collectedFees
        }, 'YES', yesBetAmount, limitProb, unfilledBetsByAnswer[answerToBuy.id] ?? [], balanceByUserId),
        answer: answerToBuy
    };
    // Redeem NO shares in other answers to YES shares in this answer.
    const redemptionFill = {
        matchedBetId: null,
        amount: netNoAmount,
        shares: noShares,
        timestamp: Date.now(),
        fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
    };
    yesBetResult.takers.push(redemptionFill);
    return {
        noBetResults,
        yesBetResult
    };
};
function calculateCpmmMultiArbitrageBetNo(answers, answerToBuy, betAmount, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const startTime = Date.now();
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const yesSharePriceSum = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(answers.filter((a)=>a.id !== answerToBuy.id), 'prob');
    const maxYesShares = betAmount / yesSharePriceSum;
    const yesShares = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, maxYesShares, (yesShares)=>{
        const result = buyYesSharesInOtherAnswersThenNoInAnswer(answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, yesShares, collectedFees);
        if (!result) return 1;
        const { yesBetResults, noBetResult } = result;
        const newPools = [
            ...yesBetResults.map((r)=>r.cpmmState.pool),
            noBetResult.cpmmState.pool
        ];
        const diff = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5)) - 1;
        return diff;
    });
    const result = buyYesSharesInOtherAnswersThenNoInAnswer(answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, yesShares, collectedFees);
    if (!result) {
        throw new Error('Invariant failed in calculateCpmmMultiArbitrageBetNo');
    }
    const { yesBetResults, noBetResult } = result;
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    const newBetResult = {
        ...noBetResult,
        outcome: 'NO'
    };
    const otherBetResults = yesBetResults.map((r)=>({
            ...r,
            outcome: 'YES'
        }));
    return {
        newBetResult,
        otherBetResults
    };
}
const buyYesSharesInOtherAnswersThenNoInAnswer = (answers, answerToBuy, unfilledBetsByAnswer, balanceByUserId, betAmount, limitProb, yesShares, collectedFees)=>{
    const otherAnswers = answers.filter((a)=>a.id !== answerToBuy.id);
    const yesAmounts = otherAnswers.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool: {
                YES: poolYes,
                NO: poolNo
            },
            p: 0.5,
            collectedFees
        }, yesShares, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
    const totalYesAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(yesAmounts);
    const yesBetResults = yesAmounts.map((yesAmount, i)=>{
        const answer = otherAnswers[i];
        const { poolYes, poolNo } = answer;
        return {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool: {
                    YES: poolYes,
                    NO: poolNo
                },
                p: 0.5,
                collectedFees
            }, 'YES', yesAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
            answer
        };
    });
    let noBetAmount = betAmount - totalYesAmount;
    if (floatingArbitrageEqual(noBetAmount, 0)) {
        noBetAmount = 0;
    }
    if (noBetAmount < 0) {
        return undefined;
    }
    for (const yesBetResult of yesBetResults){
        const redemptionFill = {
            matchedBetId: null,
            amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBetResult.takers, 'amount'),
            shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBetResult.takers, 'shares'),
            timestamp: Date.now(),
            fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
        };
        yesBetResult.takers.push(redemptionFill);
    }
    const pool = {
        YES: answerToBuy.poolYes,
        NO: answerToBuy.poolNo
    };
    const noBetResult = {
        ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
            pool,
            p: 0.5,
            collectedFees
        }, 'NO', noBetAmount, limitProb, unfilledBetsByAnswer[answerToBuy.id] ?? [], balanceByUserId),
        answer: answerToBuy
    };
    // Redeem YES shares in other answers to NO shares in this answer.
    const redemptionFill = {
        matchedBetId: null,
        amount: totalYesAmount,
        shares: yesShares,
        timestamp: Date.now(),
        fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
    };
    noBetResult.takers.push(redemptionFill);
    return {
        yesBetResults,
        noBetResult
    };
};
const buyNoSharesUntilAnswersSumToOne = (answers, unfilledBets, balanceByUserId, collectedFees, answerIdsWithFees)=>{
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    let maxNoShares = 10;
    do {
        const result = buyNoSharesInAnswers(answers, unfilledBetsByAnswer, balanceByUserId, maxNoShares, collectedFees, answerIdsWithFees);
        const newPools = result.noBetResults.map((r)=>r.cpmmState.pool);
        const probSum = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5));
        if (probSum < 1) break;
        maxNoShares *= 10;
    }while (true)
    const noShares = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, maxNoShares, (noShares)=>{
        const result = buyNoSharesInAnswers(answers, unfilledBetsByAnswer, balanceByUserId, noShares, collectedFees, answerIdsWithFees);
        const newPools = result.noBetResults.map((r)=>r.cpmmState.pool);
        const diff = 1 - (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5));
        return diff;
    });
    return buyNoSharesInAnswers(answers, unfilledBetsByAnswer, balanceByUserId, noShares, collectedFees, answerIdsWithFees);
};
const buyNoSharesInAnswers = (answers, unfilledBetsByAnswer, balanceByUserId, noShares, collectedFees, answerIdsWithFees)=>{
    const noAmounts = answers.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool: {
                YES: poolYes,
                NO: poolNo
            },
            p: 0.5,
            collectedFees
        }, noShares, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId, !answerIdsWithFees?.includes(id)));
    const totalNoAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(noAmounts);
    const noBetResults = noAmounts.map((noAmount, i)=>{
        const answer = answers[i];
        const pool = {
            YES: answer.poolYes,
            NO: answer.poolNo
        };
        return {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool,
                p: 0.5,
                collectedFees
            }, 'NO', noAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, !answerIdsWithFees?.includes(answer.id)),
            answer
        };
    });
    // Identity: No shares in all other answers is equal to noShares * (n-1) mana
    const redeemedAmount = noShares * (answers.length - 1);
    // Fees on arbitrage bets are returned
    const extraMana = redeemedAmount - totalNoAmount;
    for (const noBetResult of noBetResults){
        const redemptionFill = {
            matchedBetId: null,
            amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'amount'),
            shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'shares'),
            timestamp: Date.now(),
            fees: noBetResult.totalFees
        };
        noBetResult.takers.push(redemptionFill);
    }
    return {
        noBetResults,
        extraMana
    };
};
function calculateCpmmMultiArbitrageSellNo(answers, answerToSell, noShares, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const startTime = Date.now();
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const { id, poolYes, poolNo } = answerToSell;
    const pool = {
        YES: poolYes,
        NO: poolNo
    };
    const answersWithoutAnswerToSell = answers.filter((a)=>a.id !== answerToSell.id);
    // Strategy: We have noShares, and need that many yes shares to complete the sell.
    // We buy some yes shares in the answer directly, and the rest is from converting No shares of all the other answers.
    // The proportion of each is dependent on what leaves the final probability sum at 1.
    // Which is what this binary search is discovering.
    const yesShares = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, noShares, (yesShares)=>{
        const noSharesInOtherAnswers = noShares - yesShares;
        const yesAmount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool,
            p: 0.5,
            collectedFees
        }, yesShares, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId);
        const noAmounts = answersWithoutAnswerToSell.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
                pool: {
                    YES: poolYes,
                    NO: poolNo
                },
                p: 0.5,
                collectedFees
            }, noSharesInOtherAnswers, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
        const yesResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
            pool,
            p: 0.5,
            collectedFees
        }, 'YES', yesAmount, limitProb, unfilledBetsByAnswer[id] ?? [], balanceByUserId);
        const noResults = answersWithoutAnswerToSell.map((answer, i)=>{
            const noAmount = noAmounts[i];
            const pool = {
                YES: answer.poolYes,
                NO: answer.poolNo
            };
            return {
                ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                    pool,
                    p: 0.5,
                    collectedFees
                }, 'NO', noAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
                answer
            };
        });
        const newPools = [
            yesResult.cpmmState.pool,
            ...noResults.map((r)=>r.cpmmState.pool)
        ];
        const diff = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5)) - 1;
        return diff;
    });
    const noSharesInOtherAnswers = noShares - yesShares;
    const yesAmount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
        pool,
        p: 0.5,
        collectedFees
    }, yesShares, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId);
    const noAmounts = answersWithoutAnswerToSell.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool: {
                YES: poolYes,
                NO: poolNo
            },
            p: 0.5,
            collectedFees
        }, noSharesInOtherAnswers, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
    const yesBetResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
        pool,
        p: 0.5,
        collectedFees
    }, 'YES', yesAmount, limitProb, unfilledBetsByAnswer[id] ?? [], balanceByUserId);
    const noBetResults = answersWithoutAnswerToSell.map((answer, i)=>{
        const noAmount = noAmounts[i];
        const pool = {
            YES: answer.poolYes,
            NO: answer.poolNo
        };
        return {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool,
                p: 0.5,
                collectedFees
            }, 'NO', noAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
            answer
        };
    });
    const redeemedMana = noSharesInOtherAnswers * (answers.length - 2);
    const netNoAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(noAmounts) - redeemedMana;
    const now = Date.now();
    for (const noBetResult of noBetResults){
        const redemptionFill = {
            matchedBetId: null,
            amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'amount'),
            shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(noBetResult.takers, 'shares'),
            timestamp: now,
            fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
        };
        noBetResult.takers.push(redemptionFill);
    }
    const arbitrageFee = noSharesInOtherAnswers === 0 ? 0 : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(noSharesInOtherAnswers, netNoAmount / noSharesInOtherAnswers);
    const arbitrageFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getFeesSplit"])(arbitrageFee);
    yesBetResult.takers.push({
        matchedBetId: null,
        amount: netNoAmount + arbitrageFee,
        shares: noSharesInOtherAnswers,
        timestamp: now,
        fees: arbitrageFees
    });
    yesBetResult.totalFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(yesBetResult.totalFees, arbitrageFees);
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    const newBetResult = {
        ...yesBetResult,
        outcome: 'YES'
    };
    const otherBetResults = noBetResults.map((r)=>({
            ...r,
            outcome: 'NO'
        }));
    return {
        newBetResult,
        otherBetResults
    };
}
function calculateCpmmMultiArbitrageSellYes(answers, answerToSell, yesShares, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    const startTime = Date.now();
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const { id, poolYes, poolNo } = answerToSell;
    const pool = {
        YES: poolYes,
        NO: poolNo
    };
    const answersWithoutAnswerToSell = answers.filter((a)=>a.id !== answerToSell.id);
    const noShares = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(0, yesShares, (noShares)=>{
        const yesSharesInOtherAnswers = yesShares - noShares;
        const noAmount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool,
            p: 0.5,
            collectedFees
        }, noShares, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId);
        const yesAmounts = answersWithoutAnswerToSell.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
                pool: {
                    YES: poolYes,
                    NO: poolNo
                },
                p: 0.5,
                collectedFees
            }, yesSharesInOtherAnswers, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
        const noResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
            pool,
            p: 0.5,
            collectedFees
        }, 'NO', noAmount, limitProb, unfilledBetsByAnswer[id] ?? [], balanceByUserId);
        const yesResults = answersWithoutAnswerToSell.map((answer, i)=>{
            const yesAmount = yesAmounts[i];
            const pool = {
                YES: answer.poolYes,
                NO: answer.poolNo
            };
            return {
                ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                    pool,
                    p: 0.5,
                    collectedFees
                }, 'YES', yesAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
                answer
            };
        });
        const newPools = [
            noResult.cpmmState.pool,
            ...yesResults.map((r)=>r.cpmmState.pool)
        ];
        const diff = 1 - (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newPools, (pool)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5));
        return diff;
    });
    const yesSharesInOtherAnswers = yesShares - noShares;
    const noAmount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
        pool,
        p: 0.5,
        collectedFees
    }, noShares, 'NO', unfilledBetsByAnswer[id] ?? [], balanceByUserId);
    const yesAmounts = answersWithoutAnswerToSell.map(({ id, poolYes, poolNo })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
            pool: {
                YES: poolYes,
                NO: poolNo
            },
            p: 0.5,
            collectedFees
        }, yesSharesInOtherAnswers, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId, true));
    const noBetResult = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
        pool,
        p: 0.5,
        collectedFees
    }, 'NO', noAmount, limitProb, unfilledBetsByAnswer[id] ?? [], balanceByUserId);
    const yesBetResults = answersWithoutAnswerToSell.map((answer, i)=>{
        const yesAmount = yesAmounts[i];
        const pool = {
            YES: answer.poolYes,
            NO: answer.poolNo
        };
        return {
            ...(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])({
                pool,
                p: 0.5,
                collectedFees
            }, 'YES', yesAmount, undefined, unfilledBetsByAnswer[answer.id] ?? [], balanceByUserId, undefined, true),
            answer
        };
    });
    const totalYesAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(yesAmounts);
    const now = Date.now();
    for (const yesBetResult of yesBetResults){
        const redemptionFill = {
            matchedBetId: null,
            amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBetResult.takers, 'amount'),
            shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBetResult.takers, 'shares'),
            timestamp: now,
            fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
        };
        yesBetResult.takers.push(redemptionFill);
    }
    const arbitrageFee = yesSharesInOtherAnswers === 0 ? 0 : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(yesSharesInOtherAnswers, totalYesAmount / yesSharesInOtherAnswers);
    const arbitrageFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getFeesSplit"])(arbitrageFee);
    noBetResult.takers.push({
        matchedBetId: null,
        amount: totalYesAmount + arbitrageFee,
        shares: yesSharesInOtherAnswers,
        timestamp: now,
        fees: arbitrageFees
    });
    noBetResult.totalFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(noBetResult.totalFees, arbitrageFees);
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    const newBetResult = {
        ...noBetResult,
        outcome: 'NO'
    };
    const otherBetResults = yesBetResults.map((r)=>({
            ...r,
            outcome: 'YES'
        }));
    return {
        newBetResult,
        otherBetResults
    };
}
const calculateCpmmMultiArbitrageSellYesEqually = (initialAnswers, userBetsByAnswerIdToSell, unfilledBets, balanceByUserId, collectedFees)=>{
    const unfilledBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets, (bet)=>bet.answerId);
    const allAnswersToSell = initialAnswers.filter((a)=>userBetsByAnswerIdToSell[a.id]?.length);
    const sharesByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(userBetsByAnswerIdToSell, (bets)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(bets, (b)=>b.shares));
    const minShares = Math.min(...Object.values(sharesByAnswerId));
    const saleBetResults = [];
    const oppositeBuyResults = [];
    let updatedAnswers = initialAnswers;
    let sharesToSell = minShares;
    while(sharesToSell > 0){
        const answersToSellNow = allAnswersToSell.filter((a)=>sharesByAnswerId[a.id] >= sharesToSell);
        const answerIdsToSellNow = allAnswersToSell.filter((a)=>sharesByAnswerId[a.id] >= sharesToSell).map((a)=>a.id);
        // Buy yes shares in the answers opposite the answers to sell
        const oppositeAnswersFromSaleToBuyYesShares = updatedAnswers.filter((a)=>!answerIdsToSellNow.includes(a.id));
        let saleBets;
        if (answersToSellNow.length !== initialAnswers.length) {
            const yesAmounts = oppositeAnswersFromSaleToBuyYesShares.map(({ id, poolYes, poolNo })=>{
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateAmountToBuySharesFixedP"])({
                    pool: {
                        YES: poolYes,
                        NO: poolNo
                    },
                    p: 0.5,
                    collectedFees
                }, sharesToSell, 'YES', unfilledBetsByAnswer[id] ?? [], balanceByUserId, // Zero fees on arbitrage bets
                true);
            });
            const { newUpdatedAnswers, yesBets, noBuyResults } = getBetResultsAndUpdatedAnswers(oppositeAnswersFromSaleToBuyYesShares, yesAmounts, updatedAnswers, undefined, unfilledBets, balanceByUserId, collectedFees, // Charge fees on sale bets
            answerIdsToSellNow);
            updatedAnswers = newUpdatedAnswers;
            for (const yesBet of yesBets){
                const redemptionFill = {
                    matchedBetId: null,
                    amount: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBet.takers, 'amount'),
                    shares: -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yesBet.takers, 'shares'),
                    timestamp: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$first$2e$js__$5b$external$5d$__$28$lodash$2f$first$2e$js$2c$__cjs$29$__["default"])(yesBet.takers)?.timestamp ?? Date.now(),
                    fees: yesBet.totalFees
                };
                yesBet.takers.push(redemptionFill);
            }
            oppositeBuyResults.push(...yesBets);
            const totalYesAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(yesAmounts);
            const { noBetResults, extraMana } = noBuyResults;
            saleBets = noBetResults// TODO: after adding limit orders, we need to keep track of the matchedBetIds in the redemption bets we're throwing away
            .filter((betResult)=>answerIdsToSellNow.includes(betResult.answer.id)).map((betResult)=>{
                const answer = updatedAnswers.find((a)=>a.id === betResult.answer.id);
                const { poolYes, poolNo } = answer;
                return {
                    ...betResult,
                    takers: [
                        {
                            matchedBetId: null,
                            amount: -(sharesToSell - totalYesAmount + extraMana) / answerIdsToSellNow.length,
                            shares: -sharesToSell,
                            timestamp: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$first$2e$js__$5b$external$5d$__$28$lodash$2f$first$2e$js$2c$__cjs$29$__["default"])(betResult.takers)?.timestamp ?? Date.now(),
                            isSale: true,
                            fees: betResult.totalFees
                        }
                    ],
                    cpmmState: {
                        p: 0.5,
                        pool: {
                            YES: poolYes,
                            NO: poolNo
                        },
                        collectedFees
                    },
                    answer
                };
            });
        } else {
            // If we have yes shares in ALL answers, redeem them for mana
            saleBets = getSellAllRedemptionPreliminaryBets(answersToSellNow, sharesToSell, collectedFees, Date.now());
        }
        saleBetResults.push(...saleBets);
        for (const answerIdToSell of answerIdsToSellNow){
            sharesByAnswerId[answerIdToSell] -= sharesToSell;
        }
        const answersToSellRemaining = Object.values(sharesByAnswerId).filter((shares)=>shares > 0);
        if (answersToSellRemaining.length === 0) break;
        sharesToSell = Math.min(...answersToSellRemaining);
    }
    const newBetResults = combineBetsOnSameAnswers(saleBetResults, 'YES', updatedAnswers.filter((a)=>allAnswersToSell.map((an)=>an.id).includes(a.id)), collectedFees);
    const otherBetResults = combineBetsOnSameAnswers(oppositeBuyResults, 'YES', updatedAnswers.filter((r)=>!allAnswersToSell.map((a)=>a.id).includes(r.id)), collectedFees);
    const totalFee = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["sumAllFees"])(newBetResults.concat(otherBetResults).map((r)=>r.totalFees));
    return {
        newBetResults,
        otherBetResults,
        updatedAnswers,
        totalFee
    };
};
const getSellAllRedemptionPreliminaryBets = (answers, sharesToSell, collectedFees, now)=>{
    return answers.map((answer)=>{
        const { poolYes, poolNo } = answer;
        return {
            outcome: 'YES',
            takers: [
                {
                    matchedBetId: null,
                    amount: -sharesToSell / answers.length,
                    shares: -sharesToSell,
                    timestamp: now,
                    isSale: true,
                    fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
                }
            ],
            makers: [],
            totalFees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"],
            cpmmState: {
                p: 0.5,
                pool: {
                    YES: poolYes,
                    NO: poolNo
                },
                collectedFees
            },
            ordersToCancel: [],
            answer
        };
    });
};
function floatingArbitrageEqual(a, b, epsilon = 0.001) {
    return Math.abs(a - b) < epsilon;
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/new-bet.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "computeCpmmBet": (()=>computeCpmmBet),
    "computeFills": (()=>computeFills),
    "getBetDownToOneMultiBetInfo": (()=>getBetDownToOneMultiBetInfo),
    "getBinaryCpmmBetInfo": (()=>getBinaryCpmmBetInfo),
    "getNewMultiCpmmBetInfo": (()=>getNewMultiCpmmBetInfo),
    "getNewMultiCpmmBetsInfo": (()=>getNewMultiCpmmBetsInfo)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sortBy.js [external] (lodash/sortBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/math.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/fees.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/contract.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/utils.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm-arbitrage.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
const computeFill = (amount, outcome, limitProb, cpmmState, matchedBet, matchedBetUserBalance, freeFees)=>{
    const prob = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(cpmmState.pool, cpmmState.p);
    if (limitProb !== undefined && (outcome === 'YES' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingGreaterEqual"])(prob, limitProb) && (matchedBet?.limitProb ?? 1) > limitProb : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingLesserEqual"])(prob, limitProb) && (matchedBet?.limitProb ?? 0) < limitProb)) {
        // No fill.
        return undefined;
    }
    const timestamp = Date.now();
    if (!matchedBet || (outcome === 'YES' ? !(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingGreaterEqual"])(prob, matchedBet.limitProb) : !(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingLesserEqual"])(prob, matchedBet.limitProb))) {
        // Fill from pool.
        const limit = !matchedBet ? limitProb : outcome === 'YES' ? Math.min(matchedBet.limitProb, limitProb ?? 1) : Math.max(matchedBet.limitProb, limitProb ?? 0);
        const buyAmount = limit === undefined ? amount : Math.min(amount, freeFees ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmAmountToProb"])(cpmmState, limit, outcome) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmAmountToProbIncludingFees"])(cpmmState, limit, outcome));
        const { shares, newPool, newP, fees } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmPurchase"])(cpmmState, buyAmount, outcome, freeFees);
        const newState = {
            pool: newPool,
            p: newP,
            collectedFees: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(fees, cpmmState.collectedFees)
        };
        return {
            maker: {
                matchedBetId: null,
                shares,
                amount: buyAmount,
                state: newState,
                timestamp
            },
            taker: {
                matchedBetId: null,
                shares,
                amount: buyAmount,
                timestamp,
                fees
            }
        };
    }
    // Fill from matchedBet.
    const amountRemaining = matchedBet.orderAmount - matchedBet.amount;
    const matchableUserBalance = matchedBetUserBalance && matchedBetUserBalance < 0 ? 0 : matchedBetUserBalance;
    const amountToFill = Math.min(amountRemaining, matchableUserBalance ?? amountRemaining);
    const takerPrice = outcome === 'YES' ? matchedBet.limitProb : 1 - matchedBet.limitProb;
    const makerPrice = outcome === 'YES' ? 1 - matchedBet.limitProb : matchedBet.limitProb;
    const feesOnOneShare = freeFees ? 0 : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(1, takerPrice);
    const maxTakerShares = amount / (takerPrice + feesOnOneShare);
    const maxMakerShares = amountToFill / makerPrice;
    const shares = Math.min(maxTakerShares, maxMakerShares);
    const takerFee = freeFees ? 0 : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(shares, takerPrice);
    const fees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getFeesSplit"])(takerFee);
    const maker = {
        bet: matchedBet,
        matchedBetId: 'taker',
        amount: shares * makerPrice,
        shares,
        timestamp
    };
    const taker = {
        matchedBetId: matchedBet.id,
        amount: shares * takerPrice + takerFee,
        shares,
        timestamp,
        fees
    };
    return {
        maker,
        taker
    };
};
const computeFills = (state, outcome, betAmount, initialLimitProb, unfilledBets, balanceByUserId, limitProbs, freeFees)=>{
    if (isNaN(betAmount)) {
        throw new Error('Invalid bet amount: ${betAmount}');
    }
    if (isNaN(initialLimitProb ?? 0)) {
        throw new Error('Invalid limitProb: ${limitProb}');
    }
    const now = Date.now();
    const { max, min } = limitProbs ?? {};
    const limit = initialLimitProb ?? (outcome === 'YES' ? max : min);
    const limitProb = !limit ? undefined : limit > __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"] ? __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"] : limit < __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"] ? __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"] : limit;
    const sortedBets = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__["default"])(unfilledBets.filter((bet)=>bet.outcome !== outcome && (bet.expiresAt ? bet.expiresAt > now : true)), (bet)=>outcome === 'YES' ? bet.limitProb : -bet.limitProb, (bet)=>bet.createdTime);
    const takers = [];
    const makers = [];
    const ordersToCancel = [];
    let amount = betAmount;
    let cpmmState = {
        ...state
    };
    let totalFees = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"];
    const currentBalanceByUserId = {
        ...balanceByUserId
    };
    let i = 0;
    while(true){
        const matchedBet = sortedBets[i];
        const fill = computeFill(amount, outcome, limitProb, cpmmState, matchedBet, currentBalanceByUserId[matchedBet?.userId ?? ''], freeFees);
        if (!fill) break;
        const { taker, maker } = fill;
        if (maker.matchedBetId === null) {
            // Matched against pool.
            cpmmState = maker.state;
            takers.push(taker);
        } else {
            // Matched against bet.
            i++;
            const { userId } = maker.bet;
            const makerBalance = currentBalanceByUserId[userId];
            if (makerBalance !== undefined) {
                if (maker.amount > 0) {
                    currentBalanceByUserId[userId] = makerBalance - maker.amount;
                }
                const adjustedMakerBalance = currentBalanceByUserId[userId];
                if (adjustedMakerBalance !== undefined && adjustedMakerBalance <= 0) {
                    // Now they've insufficient balance. Cancel maker bet.
                    ordersToCancel.push(maker.bet);
                }
            }
            if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(maker.amount, 0)) continue;
            takers.push(taker);
            makers.push(maker);
        }
        totalFees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["addObjects"])(totalFees, taker.fees);
        amount -= taker.amount;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(amount, 0)) break;
    }
    return {
        takers,
        makers,
        totalFees,
        cpmmState,
        ordersToCancel
    };
};
const computeCpmmBet = (cpmmState, outcome, initialBetAmount, limitProb, unfilledBets, balanceByUserId, limitProbs)=>{
    const { takers, makers, cpmmState: afterCpmmState, ordersToCancel, totalFees } = computeFills(cpmmState, outcome, initialBetAmount, limitProb, unfilledBets, balanceByUserId, limitProbs);
    const probBefore = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(cpmmState.pool, cpmmState.p);
    const probAfter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(afterCpmmState.pool, afterCpmmState.p);
    const takerAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(takers, 'amount');
    const takerShares = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(takers, 'shares');
    const betAmount = limitProb ? initialBetAmount : takerAmount;
    const isFilled = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(betAmount, takerAmount);
    return {
        orderAmount: betAmount,
        amount: takerAmount,
        shares: takerShares,
        isFilled,
        fills: takers,
        probBefore,
        probAfter,
        makers,
        ordersToCancel,
        fees: totalFees,
        pool: afterCpmmState.pool,
        p: afterCpmmState.p
    };
};
const getBinaryCpmmBetInfo = (contract, outcome, betAmount, limitProb, unfilledBets, balanceByUserId, expiresAt)=>{
    const cpmmState = {
        pool: contract.pool,
        p: contract.p,
        collectedFees: contract.collectedFees
    };
    const { orderAmount, amount, shares, isFilled, fills, probBefore, probAfter, makers, ordersToCancel, pool, p, fees } = computeCpmmBet(cpmmState, outcome, betAmount, limitProb, unfilledBets, balanceByUserId, contract.outcomeType === 'STONK' ? {
        max: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_STONK_PROB"],
        min: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_STONK_PROB"]
    } : {
        max: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"],
        min: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"]
    });
    const newBet = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
        orderAmount,
        amount,
        shares,
        limitProb,
        isFilled,
        isCancelled: false,
        fills,
        contractId: contract.id,
        outcome,
        probBefore,
        probAfter,
        loanAmount: 0,
        createdTime: Date.now(),
        fees,
        isRedemption: false,
        visibility: contract.visibility,
        expiresAt
    });
    return {
        newBet,
        newPool: pool,
        newP: p,
        makers,
        ordersToCancel
    };
};
const getNewMultiCpmmBetInfo = (contract, answers, answer, outcome, betAmount, limitProb, unfilledBets, balanceByUserId, expiresAt)=>{
    if (contract.shouldAnswersSumToOne) {
        return getNewMultiCpmmBetsInfoSumsToOne(contract, answers, [
            answer
        ], outcome, betAmount, limitProb, unfilledBets, balanceByUserId, expiresAt)[0];
    }
    const { poolYes, poolNo } = answer;
    const pool = {
        YES: poolYes,
        NO: poolNo
    };
    const cpmmState = {
        pool,
        p: 0.5,
        collectedFees: contract.collectedFees
    };
    const answerUnfilledBets = unfilledBets.filter((b)=>b.answerId === answer.id);
    const { amount, fills, isFilled, makers, ordersToCancel, probAfter, probBefore, shares, pool: newPool, fees } = computeCpmmBet(cpmmState, outcome, betAmount, limitProb, answerUnfilledBets, balanceByUserId, {
        max: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_CPMM_PROB"],
        min: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CPMM_PROB"]
    });
    const newBet = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
        contractId: contract.id,
        outcome,
        orderAmount: betAmount,
        limitProb,
        isCancelled: false,
        amount,
        loanAmount: 0,
        shares,
        answerId: answer.id,
        fills,
        isFilled,
        probBefore,
        probAfter,
        createdTime: Date.now(),
        fees,
        isRedemption: false,
        visibility: contract.visibility,
        expiresAt
    });
    return {
        newBet,
        newPool,
        makers,
        ordersToCancel
    };
};
const getNewMultiCpmmBetsInfo = (contract, answers, answersToBuy, outcome, betAmount, limitProb, unfilledBets, balanceByUserId, expiresAt)=>{
    if (contract.shouldAnswersSumToOne) {
        return getNewMultiCpmmBetsInfoSumsToOne(contract, answers, answersToBuy, outcome, betAmount, limitProb, unfilledBets, balanceByUserId, expiresAt);
    } else {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["APIError"](400, 'Not yet implemented');
    }
};
const getNewMultiCpmmBetsInfoSumsToOne = (contract, answers, answersToBuy, outcome, initialBetAmount, limitProb, unfilledBets, balanceByUserId, expiresAt)=>{
    const newBetResults = [];
    const isMultiBuy = answersToBuy.length > 1;
    const otherBetsResults = [];
    if (answersToBuy.length === 1) {
        const { newBetResult, otherBetResults } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmMultiArbitrageBet"])(answers, answersToBuy[0], outcome, initialBetAmount, limitProb, unfilledBets, balanceByUserId, contract.collectedFees);
        if (newBetResult.takers.length === 0 && !limitProb) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["APIError"](400, 'Betting allowed only between 1-99%.');
        }
        newBetResults.push(...[
            newBetResult
        ]);
        if (otherBetResults.length > 0) otherBetsResults.push(...otherBetResults);
    } else {
        // NOTE: only accepts YES bets atm
        const multiRes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmMultiArbitrageYesBets"])(answers, answersToBuy, initialBetAmount, limitProb, unfilledBets, balanceByUserId, contract.collectedFees);
        newBetResults.push(...multiRes.newBetResults);
        otherBetsResults.push(...multiRes.otherBetResults);
    }
    const now = Date.now();
    return newBetResults.map((newBetResult, i)=>{
        const { takers, cpmmState, answer: updatedAnswer, totalFees } = newBetResult;
        const probAfter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(cpmmState.pool, cpmmState.p);
        const takerAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(takers, 'amount');
        const takerShares = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(takers, 'shares');
        const answer = answers.find((a)=>a.id === updatedAnswer.id);
        const multiBuyTakerAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newBetResults.flatMap((r)=>r.takers), 'amount');
        const betAmount = limitProb ? initialBetAmount : isMultiBuy ? multiBuyTakerAmount : takerAmount;
        const newBet = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
            orderAmount: betAmount,
            amount: takerAmount,
            shares: takerShares,
            isFilled: isMultiBuy ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(multiBuyTakerAmount, betAmount) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(takerAmount, betAmount),
            fills: takers,
            contractId: contract.id,
            outcome,
            limitProb,
            isCancelled: false,
            loanAmount: 0,
            answerId: answer.id,
            probBefore: answer.prob,
            probAfter,
            createdTime: now,
            fees: totalFees,
            isRedemption: false,
            visibility: contract.visibility,
            expiresAt
        });
        const otherResultsWithBet = otherBetsResults.map((result)=>{
            const { answer: updatedAnswer, takers, cpmmState, outcome, totalFees } = result;
            const answer = answers.find((a)=>a.id === updatedAnswer.id);
            const probBefore = answer.prob;
            const probAfter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(cpmmState.pool, cpmmState.p);
            const bet = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
                contractId: contract.id,
                outcome,
                orderAmount: 0,
                isCancelled: false,
                amount: 0,
                loanAmount: 0,
                shares: 0,
                answerId: answer.id,
                fills: takers,
                isFilled: true,
                probBefore,
                probAfter,
                createdTime: now,
                fees: totalFees,
                isRedemption: true,
                visibility: contract.visibility
            });
            return {
                ...result,
                bet
            };
        });
        return {
            newBet,
            newPool: cpmmState.pool,
            makers: newBetResult.makers,
            ordersToCancel: newBetResult.ordersToCancel,
            otherBetResults: i === 0 ? otherResultsWithBet : []
        };
    });
};
const getBetDownToOneMultiBetInfo = (contract, answers, unfilledBets, balanceByUserId)=>{
    const { noBetResults, extraMana } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["buyNoSharesUntilAnswersSumToOne"])(answers, unfilledBets, balanceByUserId, contract.collectedFees);
    const now = Date.now();
    const betResults = noBetResults.map((result)=>{
        const { answer, takers, cpmmState, totalFees } = result;
        const probBefore = answer.prob;
        const probAfter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(cpmmState.pool, cpmmState.p);
        const bet = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
            contractId: contract.id,
            outcome: 'NO',
            orderAmount: 0,
            isCancelled: false,
            amount: 0,
            loanAmount: 0,
            shares: 0,
            answerId: answer.id,
            fills: takers,
            isFilled: true,
            probBefore,
            probAfter,
            createdTime: now,
            fees: totalFees,
            isRedemption: true,
            visibility: contract.visibility
        });
        return {
            ...result,
            bet
        };
    });
    return {
        betResults,
        extraMana
    };
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "MINIMUM_LIQUIDITY": (()=>MINIMUM_LIQUIDITY),
    "addCpmmLiquidity": (()=>addCpmmLiquidity),
    "addCpmmLiquidityFixedP": (()=>addCpmmLiquidityFixedP),
    "addCpmmMultiLiquidityAnswersSumToOne": (()=>addCpmmMultiLiquidityAnswersSumToOne),
    "addCpmmMultiLiquidityToAnswersIndependently": (()=>addCpmmMultiLiquidityToAnswersIndependently),
    "calculateAmountToBuyShares": (()=>calculateAmountToBuyShares),
    "calculateAmountToBuySharesFixedP": (()=>calculateAmountToBuySharesFixedP),
    "calculateCpmmAmountToBuyShares": (()=>calculateCpmmAmountToBuyShares),
    "calculateCpmmAmountToBuySharesFixedP": (()=>calculateCpmmAmountToBuySharesFixedP),
    "calculateCpmmAmountToProb": (()=>calculateCpmmAmountToProb),
    "calculateCpmmAmountToProbIncludingFees": (()=>calculateCpmmAmountToProbIncludingFees),
    "calculateCpmmMultiSumsToOneSale": (()=>calculateCpmmMultiSumsToOneSale),
    "calculateCpmmPurchase": (()=>calculateCpmmPurchase),
    "calculateCpmmSale": (()=>calculateCpmmSale),
    "calculateCpmmShares": (()=>calculateCpmmShares),
    "calculateCpmmSharesAfterFee": (()=>calculateCpmmSharesAfterFee),
    "getCpmmFees": (()=>getCpmmFees),
    "getCpmmLiquidity": (()=>getCpmmLiquidity),
    "getCpmmLiquidityPoolWeights": (()=>getCpmmLiquidityPoolWeights),
    "getCpmmOutcomeProbabilityAfterBet": (()=>getCpmmOutcomeProbabilityAfterBet),
    "getCpmmProbability": (()=>getCpmmProbability),
    "getCpmmProbabilityAfterBetBeforeFees": (()=>getCpmmProbabilityAfterBetBeforeFees),
    "getCpmmProbabilityAfterSale": (()=>getCpmmProbabilityAfterSale),
    "getLiquidity": (()=>getLiquidity),
    "getMultiCpmmLiquidity": (()=>getMultiCpmmLiquidity),
    "getUserLiquidityShares": (()=>getUserLiquidityShares),
    "maximumRemovableLiquidity": (()=>maximumRemovableLiquidity),
    "removeCpmmLiquidity": (()=>removeCpmmLiquidity)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/groupBy.js [external] (lodash/groupBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/mapValues.js [external] (lodash/mapValues.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$minBy$2e$js__$5b$external$5d$__$28$lodash$2f$minBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/minBy.js [external] (lodash/minBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$omitBy$2e$js__$5b$external$5d$__$28$lodash$2f$omitBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/omitBy.js [external] (lodash/omitBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/fees.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/math.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/new-bet.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm-arbitrage.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/algos.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
function getCpmmProbability(pool, p) {
    const { YES, NO } = pool;
    return p * NO / ((1 - p) * YES + p * NO);
}
function getCpmmProbabilityAfterBetBeforeFees(state, outcome, bet) {
    const { pool, p } = state;
    const shares = calculateCpmmShares(pool, p, bet, outcome);
    const { YES: y, NO: n } = pool;
    const [newY, newN] = outcome === 'YES' ? [
        y - shares + bet,
        n + bet
    ] : [
        y + bet,
        n - shares + bet
    ];
    return getCpmmProbability({
        YES: newY,
        NO: newN
    }, p);
}
function getCpmmOutcomeProbabilityAfterBet(state, outcome, bet) {
    const { newPool } = calculateCpmmPurchase(state, bet, outcome);
    const p = getCpmmProbability(newPool, state.p);
    return outcome === 'NO' ? 1 - p : p;
}
function calculateCpmmShares(pool, p, betAmount, betChoice) {
    if (betAmount === 0) return 0;
    const { YES: y, NO: n } = pool;
    const k = y ** p * n ** (1 - p);
    return betChoice === 'YES' ? y + betAmount - (k * (betAmount + n) ** (p - 1)) ** (1 / p) : n + betAmount - (k * (betAmount + y) ** -p) ** (1 / (1 - p));
}
function getCpmmFees(state, betAmount, outcome) {
    // Do a few iterations toward average probability of the bet minus fees.
    // Charging fees means the bet amount is lower and the average probability moves slightly less far.
    let fee = 0;
    for(let i = 0; i < 10; i++){
        const betAmountAfterFee = betAmount - fee;
        const shares = calculateCpmmShares(state.pool, state.p, betAmountAfterFee, outcome);
        const averageProb = betAmountAfterFee / shares;
        fee = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(shares, averageProb);
    }
    const totalFees = betAmount === 0 ? 0 : fee;
    const fees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getFeesSplit"])(totalFees);
    const remainingBet = betAmount - totalFees;
    return {
        remainingBet,
        totalFees,
        fees
    };
}
function calculateCpmmSharesAfterFee(state, bet, outcome) {
    const { pool, p } = state;
    const { remainingBet } = getCpmmFees(state, bet, outcome);
    return calculateCpmmShares(pool, p, remainingBet, outcome);
}
function calculateCpmmPurchase(state, bet, outcome, freeFees) {
    const { pool, p } = state;
    const { remainingBet, fees } = freeFees ? {
        remainingBet: bet,
        fees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
    } : getCpmmFees(state, bet, outcome);
    const shares = calculateCpmmShares(pool, p, remainingBet, outcome);
    const { YES: y, NO: n } = pool;
    const { liquidityFee: fee } = fees;
    const [newY, newN] = outcome === 'YES' ? [
        y - shares + remainingBet + fee,
        n + remainingBet + fee
    ] : [
        y + remainingBet + fee,
        n - shares + remainingBet + fee
    ];
    const postBetPool = {
        YES: newY,
        NO: newN
    };
    const { newPool, newP } = addCpmmLiquidity(postBetPool, p, fee);
    return {
        shares,
        newPool,
        newP,
        fees
    };
}
function calculateCpmmAmountToProb(state, prob, outcome) {
    if (prob <= 0 || prob >= 1 || isNaN(prob)) return Infinity;
    if (outcome === 'NO') prob = 1 - prob;
    const { pool, p } = state;
    const { YES: y, NO: n } = pool;
    const k = y ** p * n ** (1 - p);
    return outcome === 'YES' ? (p * (prob - 1) / ((p - 1) * prob)) ** -p * (k - n * (p * (prob - 1) / ((p - 1) * prob)) ** p) : ((1 - p) * (prob - 1) / (-p * prob)) ** (p - 1) * (k - y * ((1 - p) * (prob - 1) / (-p * prob)) ** (1 - p));
}
function calculateCpmmAmountToProbIncludingFees(state, prob, outcome) {
    const amount = calculateCpmmAmountToProb(state, prob, outcome);
    const shares = calculateCpmmShares(state.pool, state.p, amount, outcome);
    const averageProb = amount / shares;
    const fees = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(shares, averageProb);
    return amount + fees;
}
function calculateCpmmAmountToBuySharesFixedP(state, shares, outcome) {
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(state.p, 0.5)) {
        throw new Error('calculateAmountToBuySharesFixedP only works for p = 0.5, got ' + state.p);
    }
    const { YES: y, NO: n } = state.pool;
    if (outcome === 'YES') {
        // https://www.wolframalpha.com/input?i=%28y%2Bb-s%29%5E0.5+*+%28n%2Bb%29%5E0.5+%3D+y+%5E+0.5+*+n+%5E+0.5%2C+solve+b
        return (shares - y - n + Math.sqrt(4 * n * shares + (y + n - shares) ** 2)) / 2;
    }
    return (shares - y - n + Math.sqrt(4 * y * shares + (y + n - shares) ** 2)) / 2;
}
function calculateAmountToBuySharesFixedP(state, shares, outcome, unfilledBets, balanceByUserId, freeFees) {
    const { takers } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(state, outcome, // First, bet more than required to get shares.
    shares, undefined, unfilledBets, balanceByUserId, undefined, freeFees);
    let currShares = 0;
    let currAmount = 0;
    for (const fill of takers){
        const { amount: fillAmount, shares: fillShares, matchedBetId } = fill;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(currShares + fillShares, shares)) {
            return currAmount + fillAmount;
        }
        if (currShares + fillShares > shares) {
            // This is first fill that goes over the required shares.
            if (matchedBetId) {
                // Match a portion of the fill to get the exact shares.
                const remainingShares = shares - currShares;
                const remainingAmount = fillAmount * (remainingShares / fillShares);
                return currAmount + remainingAmount;
            }
            break;
        }
        currShares += fillShares;
        currAmount += fillAmount;
    }
    const remaningShares = shares - currShares;
    // Recompute up to currAmount to get the current cpmmState.
    const { cpmmState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(state, outcome, currAmount, undefined, unfilledBets, balanceByUserId, undefined, freeFees);
    const fillAmount = calculateCpmmAmountToBuySharesFixedP(cpmmState, remaningShares, outcome);
    const fillAmountFees = freeFees ? 0 : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getTakerFee"])(remaningShares, fillAmount / remaningShares);
    return currAmount + fillAmount + fillAmountFees;
}
function calculateCpmmMultiSumsToOneSale(answers, answerToSell, shares, outcome, limitProb, unfilledBets, balanceByUserId, collectedFees) {
    if (Math.round(shares) < 0) {
        throw new Error('Cannot sell non-positive shares');
    }
    const { newBetResult, otherBetResults } = outcome === 'YES' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmMultiArbitrageSellYes"])(answers, answerToSell, shares, limitProb, unfilledBets, balanceByUserId, collectedFees) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2d$arbitrage$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmMultiArbitrageSellNo"])(answers, answerToSell, shares, limitProb, unfilledBets, balanceByUserId, collectedFees);
    const buyAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newBetResult.takers, (taker)=>taker.amount);
    // Transform buys of opposite outcome into sells.
    const saleTakers = newBetResult.takers.map((taker)=>({
            ...taker,
            // You bought opposite shares, which combine with existing shares, removing them.
            shares: -taker.shares,
            // Opposite shares combine with shares you are selling for Ṁ of shares.
            // You paid taker.amount for the opposite shares.
            // Take the negative because this is money you gain.
            amount: -(taker.shares - taker.amount),
            isSale: true
        }));
    const saleValue = -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(saleTakers, (taker)=>taker.amount);
    const transformedNewBetResult = {
        ...newBetResult,
        takers: saleTakers,
        outcome
    };
    return {
        saleValue,
        buyAmount,
        newBetResult: transformedNewBetResult,
        otherBetResults
    };
}
function calculateAmountToBuyShares(state, shares, outcome, unfilledBets, balanceByUserId) {
    const prob = getCpmmProbability(state.pool, state.p);
    const minAmount = shares * (outcome === 'YES' ? prob : 1 - prob);
    // Search for amount between bounds.
    // Min share price is based on current probability, and max is Ṁ1 each.
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$algos$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["binarySearch"])(minAmount, shares, (amount)=>{
        const { takers } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(state, outcome, amount, undefined, unfilledBets, balanceByUserId);
        const totalShares = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(takers, (taker)=>taker.shares);
        return totalShares - shares;
    });
}
function calculateCpmmAmountToBuyShares(contract, shares, outcome, allUnfilledBets, balanceByUserId, answer) {
    const startCpmmState = contract.mechanism === 'cpmm-1' ? contract : {
        pool: {
            YES: answer.poolYes,
            NO: answer.poolNo
        },
        p: 0.5,
        collectedFees: contract.collectedFees
    };
    const unfilledBets = answer?.id ? allUnfilledBets.filter((b)=>b.answerId === answer.id) : allUnfilledBets;
    if (contract.mechanism === 'cpmm-1') {
        return calculateAmountToBuyShares(startCpmmState, shares, outcome, unfilledBets, balanceByUserId);
    } else if (contract.mechanism === 'cpmm-multi-1') {
        return calculateAmountToBuySharesFixedP(startCpmmState, shares, outcome, unfilledBets, balanceByUserId);
    } else {
        throw new Error('Only works for cpmm-1 and cpmm-multi-1');
    }
}
function calculateCpmmSale(state, shares, outcome, unfilledBets, balanceByUserId) {
    if (Math.round(shares) < 0) {
        throw new Error('Cannot sell non-positive shares');
    }
    const oppositeOutcome = outcome === 'YES' ? 'NO' : 'YES';
    const buyAmount = calculateAmountToBuyShares(state, shares, oppositeOutcome, unfilledBets, balanceByUserId);
    const { cpmmState, makers, takers, totalFees, ordersToCancel } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(state, oppositeOutcome, buyAmount, undefined, unfilledBets, balanceByUserId);
    // Transform buys of opposite outcome into sells.
    const saleTakers = takers.map((taker)=>({
            ...taker,
            // You bought opposite shares, which combine with existing shares, removing them.
            shares: -taker.shares,
            // Opposite shares combine with shares you are selling for Ṁ of shares.
            // You paid taker.amount for the opposite shares.
            // Take the negative because this is money you gain.
            amount: -(taker.shares - taker.amount),
            isSale: true
        }));
    const saleValue = -(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(saleTakers, (taker)=>taker.amount);
    return {
        saleValue,
        buyAmount,
        cpmmState,
        fees: totalFees,
        makers,
        takers: saleTakers,
        ordersToCancel
    };
}
function getCpmmProbabilityAfterSale(state, shares, outcome, unfilledBets, balanceByUserId) {
    const { cpmmState } = calculateCpmmSale(state, shares, outcome, unfilledBets, balanceByUserId);
    return getCpmmProbability(cpmmState.pool, cpmmState.p);
}
function getCpmmLiquidity(pool, p) {
    const { YES, NO } = pool;
    return YES ** p * NO ** (1 - p);
}
function getMultiCpmmLiquidity(pool) {
    return getCpmmLiquidity(pool, 0.5);
}
function addCpmmLiquidity(pool, p, amount) {
    const prob = getCpmmProbability(pool, p);
    //https://www.wolframalpha.com/input?i=p%28n%2Bb%29%2F%28%281-p%29%28y%2Bb%29%2Bp%28n%2Bb%29%29%3Dq%2C+solve+p
    const { YES: y, NO: n } = pool;
    const numerator = prob * (amount + y);
    const denominator = amount - n * (prob - 1) + prob * y;
    const newP = numerator / denominator;
    const newPool = {
        YES: y + amount,
        NO: n + amount
    };
    const oldLiquidity = getCpmmLiquidity(pool, newP);
    const newLiquidity = getCpmmLiquidity(newPool, newP);
    const liquidity = newLiquidity - oldLiquidity;
    return {
        newPool,
        liquidity,
        newP
    };
}
function addCpmmLiquidityFixedP(pool, amount) {
    const prob = getCpmmProbability(pool, 0.5);
    const newPool = {
        ...pool
    };
    const sharesThrownAway = {
        YES: 0,
        NO: 0
    };
    // Throws away some shares so that prob is maintained.
    if (prob < 0.5) {
        newPool.YES += amount;
        newPool.NO += prob / (1 - prob) * amount;
        sharesThrownAway.NO = amount - prob / (1 - prob) * amount;
    } else {
        newPool.NO += amount;
        newPool.YES += (1 - prob) / prob * amount;
        sharesThrownAway.YES = amount - (1 - prob) / prob * amount;
    }
    const oldLiquidity = getMultiCpmmLiquidity(pool);
    const newLiquidity = getMultiCpmmLiquidity(newPool);
    const liquidity = newLiquidity - oldLiquidity;
    return {
        newPool,
        liquidity,
        sharesThrownAway
    };
}
function addCpmmMultiLiquidityToAnswersIndependently(pools, amount) {
    const amountPerAnswer = amount / Object.keys(pools).length;
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(pools, (pool)=>addCpmmLiquidityFixedP(pool, amountPerAnswer).newPool);
}
function addCpmmMultiLiquidityAnswersSumToOne(pools, amount) {
    const answerIds = Object.keys(pools);
    const numAnswers = answerIds.length;
    const newPools = {
        ...pools
    };
    let amountRemaining = amount;
    while(amountRemaining > __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["EPSILON"]){
        const yesSharesThrownAway = Object.fromEntries(answerIds.map((answerId)=>[
                answerId,
                0
            ]));
        for (const [answerId, pool] of Object.entries(newPools)){
            const { newPool, sharesThrownAway } = addCpmmLiquidityFixedP(pool, amountRemaining / numAnswers);
            newPools[answerId] = newPool;
            yesSharesThrownAway[answerId] += sharesThrownAway.YES;
            const otherAnswerIds = answerIds.filter((id)=>id !== answerId);
            for (const otherAnswerId of otherAnswerIds){
                // Convert NO shares into YES shares for each other answer.
                yesSharesThrownAway[otherAnswerId] += sharesThrownAway.NO;
            }
        }
        const minSharesThrownAway = Math.min(...Object.values(yesSharesThrownAway));
        amountRemaining = minSharesThrownAway;
    }
    return newPools;
}
const MINIMUM_LIQUIDITY = 100;
function removeCpmmLiquidity(pool, p, amount) {
    const { newPool, liquidity, newP } = addCpmmLiquidity(pool, p, -1 * amount);
    const error = newPool.YES < MINIMUM_LIQUIDITY || newPool.NO < MINIMUM_LIQUIDITY;
    return {
        newPool,
        liquidity,
        newP,
        error
    };
}
function maximumRemovableLiquidity(pool) {
    const { YES: y, NO: n } = pool;
    return Math.max(Math.min(y, n) - MINIMUM_LIQUIDITY, 0);
}
function getCpmmLiquidityPoolWeights(liquidities) {
    if (liquidities.length === 0) return {} // this should never happen
    ;
    const liquiditiesByUser = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(liquidities, 'userId');
    // we don't clawback from users that took more liquidity than they gave
    // instead we count their contribution as 0 and split the rest
    const userAmounts = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(liquiditiesByUser, (liquidities)=>Math.max(0, (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(liquidities, 'amount')));
    const totalAmount = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(userAmounts));
    // ... unless they are all net liquidity leeches, in which case remaining liquidity goes to the first liquidizer (persumably the creator)
    if (totalAmount === 0) {
        const firstUser = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$minBy$2e$js__$5b$external$5d$__$28$lodash$2f$minBy$2e$js$2c$__cjs$29$__["default"])(liquidities, 'createdTime').userId;
        return {
            [firstUser]: 1
        };
    }
    const weights = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(userAmounts, (amount)=>amount / totalAmount);
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$omitBy$2e$js__$5b$external$5d$__$28$lodash$2f$omitBy$2e$js$2c$__cjs$29$__["default"])(weights, (w)=>w === 0);
}
const getK = (pool)=>{
    const values = Object.values(pool);
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(values, Math.log);
};
const getLiquidity = (pool)=>{
    return Math.exp(getK(pool) / Object.keys(pool).length);
};
function getUserLiquidityShares(userId, pool, liquidities) {
    const weights = getCpmmLiquidityPoolWeights(liquidities);
    const userWeight = weights[userId] ?? 0;
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(pool, (shares)=>userWeight * shares);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/lodash/get.js [external] (lodash/get.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/get.js", () => require("lodash/get.js"));

module.exports = mod;
}}),
"[externals]/lodash/maxBy.js [external] (lodash/maxBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/maxBy.js", () => require("lodash/maxBy.js"));

module.exports = mod;
}}),
"[externals]/lodash/partition.js [external] (lodash/partition.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/partition.js", () => require("lodash/partition.js"));

module.exports = mod;
}}),
"[project]/common/src/calculate-fixed-payouts.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "calculateFixedCancelPayout": (()=>calculateFixedCancelPayout),
    "calculateFixedPayout": (()=>calculateFixedPayout),
    "calculateFixedPayoutMulti": (()=>calculateFixedPayoutMulti),
    "calculateStandardFixedPayout": (()=>calculateStandardFixedPayout)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
function calculateFixedPayout(contract, bet, outcome) {
    if (outcome === 'CANCEL') return calculateFixedCancelPayout(bet);
    if (outcome === 'MKT') return calculateFixedMktPayout(contract, bet);
    return calculateStandardFixedPayout(bet, outcome);
}
function calculateFixedCancelPayout(bet) {
    return bet.amount;
}
function calculateStandardFixedPayout(bet, outcome) {
    const { outcome: betOutcome, shares } = bet;
    if (betOutcome !== outcome) return 0;
    return shares;
}
function calculateFixedMktPayout(contract, bet) {
    const { resolutionProbability } = contract;
    const prob = resolutionProbability !== undefined ? resolutionProbability : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getProbability"])(contract);
    const { outcome, shares } = bet;
    const betP = outcome === 'YES' ? prob : 1 - prob;
    return betP * shares;
}
function calculateBetPayoutMulti(contract, bet) {
    let prob = 0;
    const { answerId } = bet;
    if (answerId) {
        const { answers, resolutions } = contract;
        const answer = answers.find((a)=>a.id === answerId);
        if (answer && answer.resolution) {
            const { resolution, resolutionProbability } = answer;
            if (resolution === 'YES') prob = 1;
            else if (resolution === 'NO') prob = 0;
            else if (resolutionProbability) prob = resolutionProbability;
        } else if (resolutions) {
            const probTotal = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(resolutions));
            prob = (resolutions[answerId] ?? 0) / probTotal;
        } else if (answer) {
            prob = answer.prob;
        }
    }
    const { outcome, shares } = bet;
    const betP = outcome === 'YES' ? prob : 1 - prob;
    return betP * shares;
}
function calculateFixedPayoutMulti(contract, bet, outcome) {
    if (outcome === 'CANCEL') return calculateFixedCancelPayout(bet);
    return calculateBetPayoutMulti(contract, bet);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/time.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "DAY_MS": (()=>DAY_MS),
    "HOUR_MS": (()=>HOUR_MS),
    "HOUR_SECONDS": (()=>HOUR_SECONDS),
    "MINUTE_MS": (()=>MINUTE_MS),
    "MONTH_MS": (()=>MONTH_MS),
    "WEEK_MS": (()=>WEEK_MS),
    "YEAR_MS": (()=>YEAR_MS),
    "sleep": (()=>sleep)
});
const MINUTE_MS = 60 * 1000;
const HOUR_MS = 60 * MINUTE_MS;
const DAY_MS = 24 * HOUR_MS;
const WEEK_MS = 7 * DAY_MS;
const MONTH_MS = 30 * DAY_MS;
const YEAR_MS = 365 * DAY_MS;
const HOUR_SECONDS = 60 * 60;
const sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));
}}),
"[externals]/lodash/cloneDeep.js [external] (lodash/cloneDeep.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/cloneDeep.js", () => require("lodash/cloneDeep.js"));

module.exports = mod;
}}),
"[externals]/lodash/min.js [external] (lodash/min.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/min.js", () => require("lodash/min.js"));

module.exports = mod;
}}),
"[externals]/lodash/orderBy.js [external] (lodash/orderBy.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/orderBy.js", () => require("lodash/orderBy.js"));

module.exports = mod;
}}),
"[project]/common/src/calculate-metrics.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "ELASTICITY_BET_AMOUNT": (()=>ELASTICITY_BET_AMOUNT),
    "applyMetricToSummary": (()=>applyMetricToSummary),
    "calculateAnswerMetricsWithNewBetsOnly": (()=>calculateAnswerMetricsWithNewBetsOnly),
    "calculateMetricsByContractAndAnswer": (()=>calculateMetricsByContractAndAnswer),
    "calculateProfitMetricsAtProbOrCancel": (()=>calculateProfitMetricsAtProbOrCancel),
    "calculateUpdatedMetricsForContracts": (()=>calculateUpdatedMetricsForContracts),
    "calculateUserMetricsWithNewBetsOnly": (()=>calculateUserMetricsWithNewBetsOnly),
    "calculateUserMetricsWithouLoans": (()=>calculateUserMetricsWithouLoans),
    "computeBinaryCpmmElasticity": (()=>computeBinaryCpmmElasticity),
    "computeBinaryCpmmElasticityFromAnte": (()=>computeBinaryCpmmElasticityFromAnte),
    "computeElasticity": (()=>computeElasticity),
    "computeInvestmentValueCustomProb": (()=>computeInvestmentValueCustomProb),
    "getDefaultMetric": (()=>getDefaultMetric),
    "isEmptyMetric": (()=>isEmptyMetric)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$cloneDeep$2e$js__$5b$external$5d$__$28$lodash$2f$cloneDeep$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/cloneDeep.js [external] (lodash/cloneDeep.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$first$2e$js__$5b$external$5d$__$28$lodash$2f$first$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/first.js [external] (lodash/first.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/groupBy.js [external] (lodash/groupBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$min$2e$js__$5b$external$5d$__$28$lodash$2f$min$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/min.js [external] (lodash/min.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$orderBy$2e$js__$5b$external$5d$__$28$lodash$2f$orderBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/orderBy.js [external] (lodash/orderBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/uniq.js [external] (lodash/uniq.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/new-bet.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/math.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/fees.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const computeInvestmentValueCustomProb = (bets, contract, p)=>{
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(bets, (bet)=>{
        if (!contract) return 0;
        const { outcome, shares } = bet;
        const betP = outcome === 'YES' ? p : 1 - p;
        const value = betP * shares;
        if (isNaN(value)) return 0;
        return value;
    });
};
const ELASTICITY_BET_AMOUNT = 10000 // readjust with platform volume
;
const computeElasticity = (unfilledBets, contract, betAmount = ELASTICITY_BET_AMOUNT)=>{
    const { mechanism, isResolved } = contract;
    switch(mechanism){
        case 'cpmm-1':
            return computeBinaryCpmmElasticity(isResolved ? [] : unfilledBets, contract, betAmount);
        case 'cpmm-multi-1':
            return computeMultiCpmmElasticity(isResolved ? [] : unfilledBets, contract, betAmount);
        default:
            return 1_000_000;
    }
};
const computeBinaryCpmmElasticity = (unfilledBets, cpmmState, betAmount)=>{
    const sortedBets = unfilledBets.sort((a, b)=>a.createdTime - b.createdTime);
    const userIds = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__["default"])(unfilledBets.map((b)=>b.userId));
    // Assume all limit orders are good.
    const userBalances = Object.fromEntries(userIds.map((id)=>[
            id,
            Number.MAX_SAFE_INTEGER
        ]));
    const { cpmmState: { pool: poolY, p: pY } } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(cpmmState, 'YES', betAmount, undefined, sortedBets, userBalances);
    const resultYes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(poolY, pY);
    const { cpmmState: { pool: poolN, p: pN } } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(cpmmState, 'NO', betAmount, undefined, sortedBets, userBalances);
    const resultNo = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(poolN, pN);
    // handle AMM overflow
    const safeYes = Number.isFinite(resultYes) ? Math.min(resultYes, 0.995) : 0.995;
    const safeNo = Number.isFinite(resultNo) ? Math.max(resultNo, 0.005) : 0.005;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["logit"])(safeYes) - (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["logit"])(safeNo);
};
const computeBinaryCpmmElasticityFromAnte = (ante, betAmount = ELASTICITY_BET_AMOUNT)=>{
    const pool = {
        YES: ante,
        NO: ante
    };
    const p = 0.5;
    const cpmmState = {
        pool,
        p,
        collectedFees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
    };
    const { cpmmState: { pool: poolY, p: pY } } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(cpmmState, 'YES', betAmount, undefined, [], {});
    const resultYes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(poolY, pY);
    const { cpmmState: { pool: poolN, p: pN } } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$new$2d$bet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeFills"])(cpmmState, 'NO', betAmount, undefined, [], {});
    const resultNo = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(poolN, pN);
    // handle AMM overflow
    const safeYes = Number.isFinite(resultYes) ? resultYes : 1;
    const safeNo = Number.isFinite(resultNo) ? resultNo : 0;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["logit"])(safeYes) - (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["logit"])(safeNo);
};
const computeMultiCpmmElasticity = (unfilledBets, contract, betAmount)=>{
    const elasticities = contract.answers.map((a)=>{
        const cpmmState = {
            pool: {
                YES: a.poolYes,
                NO: a.poolNo
            },
            p: 0.5,
            collectedFees: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$fees$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["noFees"]
        };
        const unfilledBetsForAnswer = unfilledBets.filter((b)=>b.answerId === a.id);
        return computeBinaryCpmmElasticity(unfilledBetsForAnswer, cpmmState, betAmount);
    });
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$min$2e$js__$5b$external$5d$__$28$lodash$2f$min$2e$js$2c$__cjs$29$__["default"])(elasticities) ?? 1_000_000;
};
const calculateMetricsByContractAndAnswer = (betsByContractId, contractsById, userId, currentMetrics)=>{
    const newMetrics = Object.entries(betsByContractId).flatMap(([contractId, bets])=>{
        const contract = contractsById[contractId];
        return calculateUserMetricsWithouLoans(contract, bets, userId);
    });
    // Find loan amounts from current metrics and paste them into the new metrics
    return newMetrics.map((m)=>{
        const currentMetric = currentMetrics.find((cm)=>cm.contractId === m.contractId && cm.answerId == m.answerId && cm.userId === m.userId);
        return {
            ...m,
            loan: currentMetric?.loan ?? m.loan ?? 0
        };
    });
};
const isEmptyMetric = (m)=>{
    return m.profit === 0 && m.invested === 0 && m.loan === 0 && m.payout === 0 && !m.hasShares && (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(m.totalSpent ?? {})) === 0;
};
const calculateUserMetricsWithouLoans = (contract, bets, userId)=>{
    // ContractMetrics will have an answerId for every answer, and a null for the overall metrics.
    const currentMetrics = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getContractBetMetricsPerAnswerWithoutLoans"])(contract, bets, 'answers' in contract ? contract.answers : undefined);
    return currentMetrics.map((current)=>{
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
            ...current,
            contractId: contract.id,
            userId
        });
    });
};
const calculateUserMetricsWithNewBetsOnly = (newBets, um)=>{
    const needsTotalSpentBackfilled = !um.totalSpent;
    const initialTotalSpent = um.totalSpent ?? {};
    // TODO: remove this after backfilling
    if (needsTotalSpentBackfilled) {
        if (um.hasNoShares && !um.hasYesShares) {
            initialTotalSpent.NO = um.invested;
        } else if (um.hasYesShares && !um.hasNoShares) {
            initialTotalSpent.YES = um.invested;
        } else {
            initialTotalSpent.NO = um.invested / 2;
            initialTotalSpent.YES = um.invested / 2;
        }
    }
    const initialTotalShares = {
        ...um.totalShares
    };
    const { totalSpent, totalShares } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateTotalSpentAndShares"])(newBets, initialTotalSpent, initialTotalShares);
    const invested = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(totalSpent));
    const loan = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newBets, (b)=>b.loanAmount ?? 0) + um.loan;
    const hasShares = Object.values(totalShares).some((shares)=>!(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(shares, 0));
    const hasYesShares = (totalShares.YES ?? 0) >= 1;
    const hasNoShares = (totalShares.NO ?? 0) >= 1;
    const soldOut = !hasNoShares && !hasYesShares;
    const maxSharesOutcome = soldOut ? null : (totalShares.NO ?? 0) > (totalShares.YES ?? 0) ? 'NO' : 'YES';
    const lastBet = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$orderBy$2e$js__$5b$external$5d$__$28$lodash$2f$orderBy$2e$js$2c$__cjs$29$__["default"])(newBets, (b)=>b.createdTime, 'desc')[0];
    const payout = soldOut ? 0 : maxSharesOutcome ? totalShares[maxSharesOutcome] * (maxSharesOutcome === 'NO' ? 1 - lastBet.probAfter : lastBet.probAfter) : 0;
    const totalAmountSold = (um.totalAmountSold ?? 0) + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newBets.filter((b)=>b.isRedemption || b.amount < 0), (b)=>-b.amount);
    const totalAmountInvested = (um.totalAmountInvested ?? 0) + (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(newBets.filter((b)=>b.amount > 0 && !b.isRedemption), (b)=>b.amount);
    const profit = payout + totalAmountSold - totalAmountInvested;
    const profitPercent = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(totalAmountInvested, 0) ? 0 : profit / totalAmountInvested * 100;
    return {
        ...um,
        loan: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(loan, 0) ? 0 : loan,
        invested: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(invested, 0) ? 0 : invested,
        totalShares,
        hasNoShares,
        hasYesShares,
        hasShares,
        maxSharesOutcome,
        lastBetTime: lastBet.createdTime,
        totalSpent,
        payout: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(payout, 0) ? 0 : payout,
        totalAmountSold: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(totalAmountSold, 0) ? 0 : totalAmountSold,
        totalAmountInvested: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(totalAmountInvested, 0) ? 0 : totalAmountInvested,
        profit,
        profitPercent
    };
};
const calculateProfitMetricsAtProbOrCancel = (newState, um)=>{
    const { maxSharesOutcome, totalAmountSold = 0, totalAmountInvested = 0, totalShares, hasNoShares, hasYesShares, invested } = um;
    const soldOut = !hasNoShares && !hasYesShares;
    const payout = newState === 'CANCEL' ? invested : soldOut ? 0 : maxSharesOutcome ? totalShares[maxSharesOutcome] * (maxSharesOutcome === 'NO' ? 1 - newState : newState) : 0;
    const profit = newState === 'CANCEL' ? 0 : payout + totalAmountSold - totalAmountInvested;
    const profitPercent = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(totalAmountInvested, 0) ? 0 : profit / totalAmountInvested * 100;
    return {
        ...um,
        payout,
        profit,
        profitPercent
    };
};
const calculateAnswerMetricsWithNewBetsOnly = (newBets, userMetrics, contractId, isMultiMarket)=>{
    const betsByUser = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(newBets, 'userId');
    return Object.entries(betsByUser).flatMap(([userId, bets])=>{
        // If it's a multi market, we need to summarize the stats for the null answer
        const oldSummary = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$cloneDeep$2e$js__$5b$external$5d$__$28$lodash$2f$cloneDeep$2e$js$2c$__cjs$29$__["default"])(userMetrics.find((m)=>m.answerId === null && m.userId === userId && m.contractId === contractId));
        const userBetsByAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(bets, 'answerId');
        const newMetrics = Object.entries(userBetsByAnswer).map(([answerIdString, bets])=>{
            const answerId = answerIdString === 'undefined' ? null : answerIdString;
            const oldMetric = userMetrics.find((m)=>m.answerId === answerId && m.userId === userId && m.contractId === contractId);
            if (oldSummary && oldMetric && isMultiMarket) {
                // Subtract the old stats from the old summary metric
                applyMetricToSummary(oldMetric, oldSummary, false);
            }
            const userMetric = oldMetric ?? getDefaultMetric(userId, contractId, answerId);
            return calculateUserMetricsWithNewBetsOnly(bets, userMetric);
        });
        if (!isMultiMarket) {
            return newMetrics;
        }
        // Then add the new metric row stats to it
        const newSummary = oldSummary ?? getDefaultMetric(userId, contractId, null);
        newMetrics.forEach((m)=>applyMetricToSummary(m, newSummary, true));
        return [
            ...newMetrics,
            newSummary
        ];
    });
};
const getDefaultMetric = (userId, contractId, answerId)=>({
        userId,
        contractId,
        answerId,
        loan: 0,
        invested: 0,
        totalShares: {
            NO: 0,
            YES: 0
        },
        totalSpent: {
            NO: 0,
            YES: 0
        },
        payout: 0,
        profit: 0,
        profitPercent: 0,
        hasNoShares: false,
        hasShares: false,
        hasYesShares: false,
        maxSharesOutcome: null,
        lastBetTime: 0,
        from: undefined,
        totalAmountInvested: 0,
        totalAmountSold: 0
    });
const defaultTimeScaleValues = {
    profit: 0,
    profitPercent: 0,
    invested: 0,
    prevValue: 0,
    value: 0
};
const applyMetricToSummary = (metric, summary, add)=>{
    const sign = add ? 1 : -1;
    summary.totalShares['NO'] += sign * (metric.totalShares['NO'] ?? 0);
    summary.totalShares['YES'] += sign * (metric.totalShares['YES'] ?? 0);
    if (!summary.totalSpent) {
        summary.totalSpent = {
            NO: 0,
            YES: 0
        };
    }
    if (metric.totalSpent) {
        summary.totalSpent['NO'] += sign * (metric.totalSpent['NO'] ?? 0);
        summary.totalSpent['YES'] += sign * (metric.totalSpent['YES'] ?? 0);
    }
    summary.loan += sign * metric.loan;
    summary.invested += sign * metric.invested;
    summary.payout += sign * metric.payout;
    summary.profit += sign * metric.profit;
    summary.totalAmountInvested += sign * metric.totalAmountInvested;
    summary.totalAmountSold += sign * metric.totalAmountSold;
    summary.profitPercent = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(summary.totalAmountInvested, 0) ? 0 : summary.profit / summary.totalAmountInvested * 100;
    summary.lastBetTime = Math.max(summary.lastBetTime, metric.lastBetTime);
    if (metric.from) {
        const timeScales = Object.keys(metric.from);
        summary.from = Object.fromEntries(timeScales.map((timeScale)=>{
            const m = metric.from[timeScale];
            const s = summary.from?.[timeScale] ?? defaultTimeScaleValues;
            const update = {
                profit: s.profit + sign * m.profit,
                invested: s.invested + sign * m.invested,
                prevValue: s.prevValue + sign * m.prevValue,
                value: s.value + sign * m.value
            };
            const profitPercent = update.invested === 0 ? 0 : update.profit / update.invested * 100;
            return [
                timeScale,
                {
                    ...update,
                    profitPercent
                }
            ];
        }));
    }
    // These are set by the trigger:
    // summaryMetric.hasNoShares
    // summaryMetric.hasYesShares
    // summaryMetric.hasShares
    // summaryMetric.loan
    return summary;
};
const calculateUpdatedMetricsForContracts = (contractsWithMetrics)=>{
    const metricsByContract = {};
    for (const { contract, metrics } of contractsWithMetrics){
        if (metrics.length === 0) continue;
        const contractId = contract.id;
        // Group metrics by userId
        const metricsByUser = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(metrics, 'userId');
        metricsByContract[contractId] = Object.entries(metricsByUser).flatMap(([userId, userMetrics])=>{
            if (contract.mechanism === 'cpmm-1') {
                const state = contract.resolution === 'CANCEL' ? 'CANCEL' : contract.prob;
                // For binary markets, update metrics with current probability
                const metric = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$first$2e$js__$5b$external$5d$__$28$lodash$2f$first$2e$js$2c$__cjs$29$__["default"])(userMetrics);
                return metric ? [
                    calculateProfitMetricsAtProbOrCancel(state, metric)
                ] : [];
            } else if (contract.mechanism === 'cpmm-multi-1') {
                // For multiple choice markets, update each answer's metrics and compute summary per user
                const answerMetrics = userMetrics.filter((m)=>m.answerId !== null);
                const updatedAnswerMetrics = answerMetrics.map((m)=>{
                    const answer = contract.answers.find((a)=>a.id === m.answerId);
                    if (answer) {
                        const state = contract.resolution === 'CANCEL' || answer.resolution === 'CANCEL' ? 'CANCEL' : answer.resolution === 'YES' ? 1 : answer.resolution === 'NO' ? 0 : answer.prob;
                        return calculateProfitMetricsAtProbOrCancel(state, m);
                    }
                    return m;
                });
                // Calculate summary metrics for this user
                const summaryMetric = getDefaultMetric(userId, contractId, null);
                updatedAnswerMetrics.forEach((m)=>applyMetricToSummary(m, summaryMetric, true));
                return [
                    ...updatedAnswerMetrics,
                    summaryMetric
                ];
            }
            return [];
        });
    }
    return {
        metricsByContract
    };
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/calculate.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "calculatePayout": (()=>calculatePayout),
    "calculateSharesBought": (()=>calculateSharesBought),
    "calculateTotalSpentAndShares": (()=>calculateTotalSpentAndShares),
    "getAnswerProbability": (()=>getAnswerProbability),
    "getContractBetMetrics": (()=>getContractBetMetrics),
    "getContractBetMetricsPerAnswerWithoutLoans": (()=>getContractBetMetricsPerAnswerWithoutLoans),
    "getContractBetNullMetrics": (()=>getContractBetNullMetrics),
    "getCpmmMultiShares": (()=>getCpmmMultiShares),
    "getCpmmShares": (()=>getCpmmShares),
    "getDisplayProbability": (()=>getDisplayProbability),
    "getInitialAnswerProbability": (()=>getInitialAnswerProbability),
    "getInitialProbability": (()=>getInitialProbability),
    "getInvested": (()=>getInvested),
    "getOutcomeProbability": (()=>getOutcomeProbability),
    "getOutcomeProbabilityAfterBet": (()=>getOutcomeProbabilityAfterBet),
    "getProbability": (()=>getProbability),
    "getProfitMetrics": (()=>getProfitMetrics),
    "getSimpleCpmmInvested": (()=>getSimpleCpmmInvested),
    "resolvedPayout": (()=>resolvedPayout)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$get$2e$js__$5b$external$5d$__$28$lodash$2f$get$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/get.js [external] (lodash/get.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/groupBy.js [external] (lodash/groupBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/mapValues.js [external] (lodash/mapValues.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$maxBy$2e$js__$5b$external$5d$__$28$lodash$2f$maxBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/maxBy.js [external] (lodash/maxBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$partition$2e$js__$5b$external$5d$__$28$lodash$2f$partition$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/partition.js [external] (lodash/partition.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sortBy.js [external] (lodash/sortBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sumBy.js [external] (lodash/sumBy.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-fixed-payouts.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/math.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/time.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$metrics$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-metrics.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$metrics$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$metrics$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
;
;
function getProbability(contract) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(contract.pool, contract.p);
}
function getDisplayProbability(contract) {
    return contract.resolutionProbability ?? getProbability(contract);
}
function getInitialProbability(contract) {
    if (contract.initialProbability) return contract.initialProbability;
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(contract.pool, contract.p);
}
function getOutcomeProbability(contract, outcome) {
    const { mechanism } = contract;
    switch(mechanism){
        case 'cpmm-1':
            return outcome === 'YES' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(contract.pool, contract.p) : 1 - (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(contract.pool, contract.p);
        case 'cpmm-multi-1':
            return 0;
        default:
            throw new Error('getOutcomeProbability not implemented');
    }
}
function getAnswerProbability(contract, answerId) {
    const answer = contract.answers.find((a)=>a.id === answerId);
    if (!answer) return 0;
    const { poolYes, poolNo, resolution, resolutionProbability } = answer;
    if (resolution) {
        if (resolution === 'MKT') return resolutionProbability ?? answer.prob;
        if (resolution === 'YES') return 1;
        if (resolution === 'NO') return 0;
    }
    const pool = {
        YES: poolYes,
        NO: poolNo
    };
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmProbability"])(pool, 0.5);
}
function getInitialAnswerProbability(contract, answer) {
    if (!contract.shouldAnswersSumToOne) {
        return 0.5;
    } else {
        if (contract.addAnswersMode === 'DISABLED') {
            return 1 / contract.answers.length;
        } else {
            const answers = contract.answers;
            const initialTime = answers.find((a)=>a.isOther)?.createdTime;
            if (answer.createdTime === initialTime) {
                const numberOfInitialAnswers = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(answers, (a)=>a.createdTime === initialTime ? 1 : 0);
                return 1 / numberOfInitialAnswers;
            }
            return undefined;
        }
    }
}
function getOutcomeProbabilityAfterBet(contract, outcome, bet) {
    const { mechanism } = contract;
    switch(mechanism){
        case 'cpmm-1':
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getCpmmOutcomeProbabilityAfterBet"])(contract, outcome, bet);
        case 'cpmm-multi-1':
            return 0;
        default:
            throw new Error('getOutcomeProbabilityAfterBet not implemented');
    }
}
function calculateSharesBought(contract, outcome, amount) {
    const { mechanism } = contract;
    switch(mechanism){
        case 'cpmm-1':
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateCpmmPurchase"])(contract, amount, outcome).shares;
        default:
            throw new Error('calculateSharesBought not implemented');
    }
}
function calculatePayout(contract, bet, outcome) {
    const { mechanism } = contract;
    return mechanism === 'cpmm-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateFixedPayout"])(contract, bet, outcome) : mechanism === 'cpmm-multi-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateFixedPayoutMulti"])(contract, bet, outcome) : bet?.amount ?? 0;
}
function resolvedPayout(contract, bet) {
    const { resolution, mechanism } = contract;
    if (!resolution) throw new Error('Contract not resolved');
    return mechanism === 'cpmm-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateFixedPayout"])(contract, bet, resolution) : mechanism === 'cpmm-multi-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$fixed$2d$payouts$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["calculateFixedPayoutMulti"])(contract, bet, resolution) : bet?.amount ?? 0;
}
function getCpmmInvested(yourBets) {
    const { totalSpent } = calculateTotalSpentAndShares(yourBets);
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(totalSpent));
}
function calculateTotalSpentAndShares(bets, initialTotalSpent = {
    YES: 0,
    NO: 0
}, initialTotalShares = {
    YES: 0,
    NO: 0
}) {
    const totalShares = {
        ...initialTotalShares
    };
    const totalSpent = {
        ...initialTotalSpent
    };
    const sharePurchases = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__["default"])(bets, [
        'createdTime',
        (bet)=>bet.isRedemption ? 1 : 0
    ]);
    for (const purchase of sharePurchases){
        const { outcome, shares, amount } = purchase;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(shares, 0)) continue;
        const spent = totalSpent[outcome] ?? 0;
        const position = totalShares[outcome] ?? 0;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingGreaterEqual"])(amount, 0)) {
            totalShares[outcome] = position + shares;
            totalSpent[outcome] = spent + amount;
        } else {
            const averagePrice = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(position, 0) ? 0 : spent / position;
            totalShares[outcome] = position + shares;
            totalSpent[outcome] = spent + averagePrice * shares;
        }
    }
    return {
        totalSpent,
        totalShares
    };
}
function getSimpleCpmmInvested(yourBets) {
    const total = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(yourBets, (b)=>b.amount);
    if (total < 0) return 0;
    return total;
}
function getInvested(contract, yourBets) {
    const { mechanism } = contract;
    if (mechanism === 'cpmm-1') return getCpmmInvested(yourBets);
    if (mechanism === 'cpmm-multi-1') {
        const betsByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(yourBets, 'answerId');
        const investedByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(betsByAnswerId, getCpmmInvested);
        return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(investedByAnswerId));
    }
    throw new Error('getInvested not implemented for mechanism ' + mechanism);
}
function getCpmmOrDpmProfit(contract, yourBets, answer) {
    const resolution = answer?.resolution ?? contract.resolution;
    let totalAmountInvested = 0;
    let payout = 0;
    let saleValue = 0;
    let redeemed = 0;
    for (const bet of yourBets){
        const { amount, isRedemption } = bet;
        if (isRedemption) {
            redeemed += -1 * amount;
        } else if (amount > 0) {
            totalAmountInvested += amount;
        } else {
            saleValue -= amount;
        }
        payout += resolution ? calculatePayout(contract, bet, resolution) : calculatePayout(contract, bet, 'MKT');
    }
    const profit = payout + saleValue + redeemed - totalAmountInvested;
    const profitPercent = totalAmountInvested === 0 ? 0 : profit / totalAmountInvested * 100;
    return {
        profit,
        profitPercent,
        totalAmountInvested,
        totalAmountSold: saleValue + redeemed,
        payout
    };
}
function getProfitMetrics(contract, yourBets) {
    const { mechanism } = contract;
    if (mechanism === 'cpmm-multi-1') {
        const betsByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(yourBets, 'answerId');
        const profitMetricsPerAnswer = Object.entries(betsByAnswerId).map(([answerId, bets])=>{
            const answer = contract.answers.find((a)=>a.id === answerId);
            return getCpmmOrDpmProfit(contract, bets, answer);
        });
        const profit = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(profitMetricsPerAnswer, (m)=>m.profit);
        const totalAmountInvested = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(profitMetricsPerAnswer, (m)=>m.totalAmountInvested);
        const profitPercent = totalAmountInvested === 0 ? 0 : profit / totalAmountInvested * 100;
        const payout = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(profitMetricsPerAnswer, (m)=>m.payout);
        const totalAmountSold = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(profitMetricsPerAnswer, (m)=>m.totalAmountSold);
        return {
            profit,
            profitPercent,
            totalAmountInvested,
            totalAmountSold,
            payout
        };
    }
    return getCpmmOrDpmProfit(contract, yourBets);
}
function getCpmmShares(yourBets) {
    const totalShares = {};
    for (const bet of yourBets){
        const { shares, outcome } = bet;
        totalShares[outcome] = (totalShares[outcome] ?? 0) + shares;
    }
    const hasShares = Object.values(totalShares).some((shares)=>!(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$math$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["floatingEqual"])(shares, 0));
    const { YES: yesShares, NO: noShares } = totalShares;
    const hasYesShares = yesShares >= 1;
    const hasNoShares = noShares >= 1;
    return {
        totalShares,
        hasShares,
        hasYesShares,
        hasNoShares
    };
}
function getCpmmMultiShares(yourBets) {
    const betsByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(yourBets, 'answerId');
    const sharesByAnswerId = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(betsByAnswerId, (bets)=>getCpmmShares(bets));
    const hasShares = Object.values(sharesByAnswerId).some((shares)=>shares.hasShares);
    return {
        hasShares,
        sharesByAnswerId
    };
}
const getContractBetMetrics = (contract, yourBets, answerId)=>{
    const { mechanism } = contract;
    const isCpmmMulti = mechanism === 'cpmm-multi-1';
    const { profit, profitPercent, payout, totalAmountInvested, totalAmountSold } = getProfitMetrics(contract, yourBets);
    const { totalSpent } = calculateTotalSpentAndShares(yourBets);
    const invested = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(Object.values(totalSpent));
    const { totalShares, hasShares, hasYesShares, hasNoShares } = getCpmmShares(yourBets);
    const lastBetTime = Math.max(...yourBets.map((b)=>b.createdTime));
    const maxSharesOutcome = hasShares ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$maxBy$2e$js__$5b$external$5d$__$28$lodash$2f$maxBy$2e$js$2c$__cjs$29$__["default"])(Object.keys(totalShares), (outcome)=>totalShares[outcome]) : null;
    return {
        invested,
        payout,
        profit,
        profitPercent,
        totalShares,
        hasShares: isCpmmMulti ? getCpmmMultiShares(yourBets).hasShares : hasShares,
        hasYesShares,
        hasNoShares,
        maxSharesOutcome: maxSharesOutcome ?? null,
        lastBetTime,
        answerId: answerId ?? null,
        totalAmountSold,
        totalAmountInvested,
        totalSpent,
        contractId: contract.id
    };
};
const getContractBetMetricsPerAnswerWithoutLoans = (contract, bets, answers)=>{
    const betsPerAnswer = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$groupBy$2e$js__$5b$external$5d$__$28$lodash$2f$groupBy$2e$js$2c$__cjs$29$__["default"])(bets, 'answerId');
    const metricsPerAnswer = Object.values((0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(betsPerAnswer, (bets)=>{
        const periods = [
            'day',
            'week',
            'month'
        ];
        const answerId = bets[0].answerId;
        const baseMetrics = getContractBetMetrics(contract, bets, answerId);
        let periodMetrics;
        if (contract.mechanism === 'cpmm-1' || contract.mechanism === 'cpmm-multi-1') {
            const answer = answers?.find((a)=>a.id === answerId);
            const passedAnswer = !!answer;
            if (contract.mechanism === 'cpmm-multi-1' && !passedAnswer) {
                console.log(`answer with id ${bets[0].answerId} not found, but is required for cpmm-multi-1 contract: ${contract.id}`);
            } else {
                periodMetrics = Object.fromEntries(periods.map((period)=>[
                        period,
                        calculatePeriodProfit(contract, bets, period, answer)
                    ]));
            }
        }
        return {
            ...baseMetrics,
            from: periodMetrics
        };
    }));
    // Calculate overall contract metrics with answerId:null bc it's nice to have
    if (contract.mechanism === 'cpmm-multi-1') {
        const baseFrom = metricsPerAnswer[0].from;
        const calculateProfitPercent = (metrics, period)=>{
            const profit = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(metrics, (m)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$get$2e$js__$5b$external$5d$__$28$lodash$2f$get$2e$js$2c$__cjs$29$__["default"])(m, `from.${period}.profit`, 0));
            const invested = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(metrics, (m)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$get$2e$js__$5b$external$5d$__$28$lodash$2f$get$2e$js$2c$__cjs$29$__["default"])(m, `from.${period}.invested`, 0));
            return invested !== 0 ? 100 * (profit / invested) : 0;
        };
        const baseMetric = getContractBetMetrics(contract, bets);
        const from = baseFrom ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(baseFrom, (periodMetrics, period)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$mapValues$2e$js__$5b$external$5d$__$28$lodash$2f$mapValues$2e$js$2c$__cjs$29$__["default"])(periodMetrics, (_, key)=>key === 'profitPercent' ? calculateProfitPercent(metricsPerAnswer, period) : (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sumBy$2e$js__$5b$external$5d$__$28$lodash$2f$sumBy$2e$js$2c$__cjs$29$__["default"])(metricsPerAnswer, (m)=>(0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$get$2e$js__$5b$external$5d$__$28$lodash$2f$get$2e$js$2c$__cjs$29$__["default"])(m, `from.${period}.${key}`, 0)))) : undefined;
        metricsPerAnswer.push({
            ...baseMetric,
            // Overall period metrics = sum all the answers' period metrics
            from,
            answerId: null
        });
    }
    return metricsPerAnswer;
};
const calculatePeriodProfit = (contract, bets, period, answer)=>{
    const days = period === 'day' ? 1 : period === 'week' ? 7 : 30;
    const fromTime = Date.now() - days * __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DAY_MS"];
    const [previousBets, recentBets] = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$partition$2e$js__$5b$external$5d$__$28$lodash$2f$partition$2e$js$2c$__cjs$29$__["default"])(bets, (b)=>b.createdTime < fromTime);
    const { prob, probChanges } = answer ?? contract;
    const prevProb = prob - probChanges[period];
    const previousBetsValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$metrics$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeInvestmentValueCustomProb"])(previousBets, contract, prevProb);
    const currentBetsValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$metrics$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["computeInvestmentValueCustomProb"])(previousBets, contract, prob);
    const { profit: recentProfit, invested: recentInvested } = getContractBetMetrics(contract, recentBets);
    const profit = currentBetsValue - previousBetsValue + recentProfit;
    const invested = previousBetsValue + recentInvested;
    const profitPercent = invested === 0 ? 0 : 100 * (profit / invested);
    return {
        profit,
        profitPercent,
        invested,
        prevValue: previousBetsValue,
        value: currentBetsValue
    };
};
function getContractBetNullMetrics() {
    return {
        invested: 0,
        loan: 0,
        payout: 0,
        profit: 0,
        profitPercent: 0,
        totalShares: {},
        hasShares: false,
        hasYesShares: false,
        hasNoShares: false,
        maxSharesOutcome: null
    };
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/contract.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "CPMM_MIN_POOL_QTY": (()=>CPMM_MIN_POOL_QTY),
    "CREATEABLE_NON_PREDICTIVE_OUTCOME_TYPES": (()=>CREATEABLE_NON_PREDICTIVE_OUTCOME_TYPES),
    "CREATEABLE_OUTCOME_TYPES": (()=>CREATEABLE_OUTCOME_TYPES),
    "DPM_CUTOFF_TIMESTAMP": (()=>DPM_CUTOFF_TIMESTAMP),
    "MAX_CPMM_PROB": (()=>MAX_CPMM_PROB),
    "MAX_DESCRIPTION_LENGTH": (()=>MAX_DESCRIPTION_LENGTH),
    "MAX_QUESTION_LENGTH": (()=>MAX_QUESTION_LENGTH),
    "MAX_STONK_PROB": (()=>MAX_STONK_PROB),
    "MINUTES_ALLOWED_TO_UNRESOLVE": (()=>MINUTES_ALLOWED_TO_UNRESOLVE),
    "MIN_CPMM_PROB": (()=>MIN_CPMM_PROB),
    "MIN_STONK_PROB": (()=>MIN_STONK_PROB),
    "MULTI_NUMERIC_BUCKETS_MAX": (()=>MULTI_NUMERIC_BUCKETS_MAX),
    "MULTI_NUMERIC_CREATION_ENABLED": (()=>MULTI_NUMERIC_CREATION_ENABLED),
    "NON_BETTING_OUTCOMES": (()=>NON_BETTING_OUTCOMES),
    "NO_CLOSE_TIME_TYPES": (()=>NO_CLOSE_TIME_TYPES),
    "PROFIT_CUTOFF_TIME": (()=>PROFIT_CUTOFF_TIME),
    "RESOLUTIONS": (()=>RESOLUTIONS),
    "SORTS": (()=>SORTS),
    "VISIBILITIES": (()=>VISIBILITIES),
    "contractPath": (()=>contractPath),
    "contractPathWithoutContract": (()=>contractPathWithoutContract),
    "contractPool": (()=>contractPool),
    "contractUrl": (()=>contractUrl),
    "getAdjustedProfit": (()=>getAdjustedProfit),
    "getBinaryMCProb": (()=>getBinaryMCProb),
    "getBinaryProbPercent": (()=>getBinaryProbPercent),
    "getMainBinaryMCAnswer": (()=>getMainBinaryMCAnswer),
    "isBinaryMulti": (()=>isBinaryMulti),
    "isMarketRanked": (()=>isMarketRanked),
    "renderResolution": (()=>renderResolution),
    "tradingAllowed": (()=>tradingAllowed),
    "twombaContractPath": (()=>twombaContractPath)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sum.js [external] (lodash/sum.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/format.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate-cpmm.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
const NON_BETTING_OUTCOMES = [
    'BOUNTIED_QUESTION',
    'POLL'
];
const NO_CLOSE_TIME_TYPES = NON_BETTING_OUTCOMES.concat([
    'STONK'
]);
const RESOLUTIONS = [
    'YES',
    'NO',
    'MKT',
    'CANCEL'
];
const CREATEABLE_OUTCOME_TYPES = [
    'BINARY',
    'MULTIPLE_CHOICE',
    'PSEUDO_NUMERIC',
    'STONK',
    'BOUNTIED_QUESTION',
    'POLL',
    'NUMBER'
];
const CREATEABLE_NON_PREDICTIVE_OUTCOME_TYPES = [
    'POLL',
    'BOUNTIED_QUESTION'
];
const renderResolution = (resolution, prob)=>{
    return ({
        YES: 'YES',
        NO: 'NO',
        CANCEL: 'N/A',
        MKT: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatPercent"])(prob ?? 0)
    })[resolution] || resolution;
};
function contractPathWithoutContract(creatorUsername, slug) {
    return `/${creatorUsername}/${slug}`;
}
function contractUrl(contract) {
    return `https://${__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].domain}${contractPath(contract)}`;
}
function contractPool(contract) {
    return contract.mechanism === 'cpmm-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatMoney"])(contract.totalLiquidity) : contract.mechanism === 'cpmm-multi-1' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatMoney"])((0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sum$2e$js__$5b$external$5d$__$28$lodash$2f$sum$2e$js$2c$__cjs$29$__["default"])(contract.answers.map((a)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2d$cpmm$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getLiquidity"])({
            YES: a.poolYes,
            NO: a.poolNo
        })))) : 'Empty pool';
}
const isBinaryMulti = (contract)=>contract.mechanism === 'cpmm-multi-1' && contract.outcomeType !== 'NUMBER' && contract.answers.length === 2 && contract.addAnswersMode === 'DISABLED' && contract.shouldAnswersSumToOne;
const getMainBinaryMCAnswer = (contract)=>isBinaryMulti(contract) && contract.mechanism === 'cpmm-multi-1' ? contract.answers[0] : undefined;
const getBinaryMCProb = (prob, outcome)=>outcome === 'YES' ? prob : 1 - prob;
function getBinaryProbPercent(contract) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatPercent"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getDisplayProbability"])(contract));
}
function tradingAllowed(contract, answer) {
    return !contract.isResolved && (!contract.closeTime || contract.closeTime > Date.now()) && contract.mechanism !== 'none' && (!answer || !answer.resolution);
}
const MAX_QUESTION_LENGTH = 120;
const MAX_DESCRIPTION_LENGTH = 16000;
const CPMM_MIN_POOL_QTY = 0.01;
const MULTI_NUMERIC_BUCKETS_MAX = 50;
const MULTI_NUMERIC_CREATION_ENABLED = false;
const VISIBILITIES = [
    'public',
    'unlisted'
];
const SORTS = [
    {
        label: 'High %',
        value: 'prob-desc'
    },
    {
        label: 'Low %',
        value: 'prob-asc'
    },
    {
        label: 'Oldest',
        value: 'old'
    },
    {
        label: 'Newest',
        value: 'new'
    },
    {
        label: 'Trending',
        value: 'liquidity'
    },
    {
        label: 'A-Z',
        value: 'alphabetical'
    }
];
const MINUTES_ALLOWED_TO_UNRESOLVE = 10;
function contractPath(contract) {
    return `/${contract.creatorUsername}/${contract.slug}`;
}
function twombaContractPath(contract) {
    const isCashContract = contract.token == 'CASH';
    const cleanedSlug = contract.slug.replace(new RegExp(`${__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["CASH_SUFFIX"]}$`), '');
    return `/${contract.creatorUsername}/${cleanedSlug}${isCashContract ? '?play=false' : '?play=true'}`;
}
const MAX_CPMM_PROB = 0.99;
const MIN_CPMM_PROB = 0.01;
const MAX_STONK_PROB = 0.95;
const MIN_STONK_PROB = 0.2;
const isMarketRanked = (contract)=>contract.isRanked != false && contract.visibility === 'public' && contract.deleted !== true;
const PROFIT_CUTOFF_TIME = 1715805887741;
const DPM_CUTOFF_TIMESTAMP = '2023-08-01 18:06:58.813000 +00:00';
const getAdjustedProfit = (contract, profit, answers, answerId)=>{
    if (contract.mechanism === 'cpmm-multi-1') {
        // Null answerId stands for the summary of all answer metrics
        if (!answerId) {
            return isMarketRanked(contract) && contract.resolutionTime && contract.resolutionTime <= PROFIT_CUTOFF_TIME && contract.createdTime > Date.parse(DPM_CUTOFF_TIMESTAMP) ? 9 * profit : isMarketRanked(contract) ? undefined : -1 * profit;
        }
        const answer = answers?.find((a)=>a.id === answerId);
        if (!answer) {
            console.log(`answer with id ${answerId} not found, but is required for cpmm-multi-1 contract: ${contract.id}`);
            return undefined;
        }
        return isMarketRanked(contract) && answer.resolutionTime && answer.resolutionTime <= PROFIT_CUTOFF_TIME && contract.createdTime > Date.parse(DPM_CUTOFF_TIMESTAMP) ? 9 * profit : isMarketRanked(contract) ? undefined : -1 * profit;
    }
    return isMarketRanked(contract) && contract.resolutionTime && contract.resolutionTime <= PROFIT_CUTOFF_TIME ? 9 * profit : isMarketRanked(contract) ? undefined : -1 * profit;
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/economy.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "BETTING_STREAK_BONUS_AMOUNT": (()=>BETTING_STREAK_BONUS_AMOUNT),
    "BETTING_STREAK_BONUS_MAX": (()=>BETTING_STREAK_BONUS_MAX),
    "BETTING_STREAK_RESET_HOUR": (()=>BETTING_STREAK_RESET_HOUR),
    "BETTING_STREAK_SWEEPS_BONUS_AMOUNT": (()=>BETTING_STREAK_SWEEPS_BONUS_AMOUNT),
    "BETTING_STREAK_SWEEPS_BONUS_MAX": (()=>BETTING_STREAK_SWEEPS_BONUS_MAX),
    "BURN_MANA_USER_ID": (()=>BURN_MANA_USER_ID),
    "DEFAULT_CASH_ANTE": (()=>DEFAULT_CASH_ANTE),
    "FIXED_ANTE": (()=>FIXED_ANTE),
    "IOS_PRICES": (()=>IOS_PRICES),
    "KYC_VERIFICATION_BONUS_CASH": (()=>KYC_VERIFICATION_BONUS_CASH),
    "MANACHAN_TWEET_COST": (()=>MANACHAN_TWEET_COST),
    "MANA_MIN_BET": (()=>MANA_MIN_BET),
    "MARKET_VISIT_BONUS": (()=>MARKET_VISIT_BONUS),
    "MARKET_VISIT_BONUS_TOTAL": (()=>MARKET_VISIT_BONUS_TOTAL),
    "MAX_TRADERS_FOR_BIG_BONUS": (()=>MAX_TRADERS_FOR_BIG_BONUS),
    "MAX_TRADERS_FOR_BONUS": (()=>MAX_TRADERS_FOR_BONUS),
    "MINIMUM_BOUNTY": (()=>MINIMUM_BOUNTY),
    "MIN_CASHOUT_AMOUNT": (()=>MIN_CASHOUT_AMOUNT),
    "MULTIPLE_CHOICE_MINIMUM_COST": (()=>MULTIPLE_CHOICE_MINIMUM_COST),
    "NEXT_DAY_BONUS": (()=>NEXT_DAY_BONUS),
    "PHONE_VERIFICATION_BONUS": (()=>PHONE_VERIFICATION_BONUS),
    "PUSH_NOTIFICATION_BONUS": (()=>PUSH_NOTIFICATION_BONUS),
    "REFERRAL_AMOUNT": (()=>REFERRAL_AMOUNT),
    "REFERRAL_AMOUNT_CASH": (()=>REFERRAL_AMOUNT_CASH),
    "REFERRAL_MIN_PURCHASE_DOLLARS": (()=>REFERRAL_MIN_PURCHASE_DOLLARS),
    "SMALL_UNIQUE_BETTOR_LIQUIDITY": (()=>SMALL_UNIQUE_BETTOR_LIQUIDITY),
    "STARTING_BALANCE": (()=>STARTING_BALANCE),
    "SUBSIDY_FEE": (()=>SUBSIDY_FEE),
    "SUS_STARTING_BALANCE": (()=>SUS_STARTING_BALANCE),
    "SWEEPIES_CASHOUT_FEE": (()=>SWEEPIES_CASHOUT_FEE),
    "SWEEPS_MIN_BET": (()=>SWEEPS_MIN_BET),
    "UNIQUE_ANSWER_BETTOR_BONUS_AMOUNT": (()=>UNIQUE_ANSWER_BETTOR_BONUS_AMOUNT),
    "UNIQUE_BETTOR_BONUS_AMOUNT": (()=>UNIQUE_BETTOR_BONUS_AMOUNT),
    "UNIQUE_BETTOR_LIQUIDITY": (()=>UNIQUE_BETTOR_LIQUIDITY),
    "WEB_PRICES": (()=>WEB_PRICES),
    "getAnte": (()=>getAnte),
    "getTieredAnswerCost": (()=>getTieredAnswerCost),
    "getTieredCost": (()=>getTieredCost)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/tier.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/contract.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
const DEFAULT_CASH_ANTE = 50;
const FIXED_ANTE = 1000;
const BASE_ANSWER_COST = FIXED_ANTE / 10;
const MIN_ANSWER_COST = 25;
const ANTES = {
    BINARY: FIXED_ANTE,
    MULTIPLE_CHOICE: BASE_ANSWER_COST,
    FREE_RESPONSE: BASE_ANSWER_COST,
    PSEUDO_NUMERIC: FIXED_ANTE * 2.5,
    STONK: FIXED_ANTE,
    BOUNTIED_QUESTION: 0,
    POLL: FIXED_ANTE / 10,
    NUMBER: FIXED_ANTE * 10
};
const getTieredAnswerCost = (marketTier)=>{
    return marketTier ? Math.max(BASE_ANSWER_COST * 10 ** (__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["tiers"].indexOf(marketTier) - 1), MIN_ANSWER_COST) : BASE_ANSWER_COST;
};
const MINIMUM_BOUNTY = 1000;
const MULTIPLE_CHOICE_MINIMUM_COST = 1000;
const getAnte = (outcomeType, numAnswers)=>{
    const ante = ANTES[outcomeType] ?? FIXED_ANTE;
    if (outcomeType === 'MULTIPLE_CHOICE') {
        return Math.max(ante * (numAnswers ?? 0), MULTIPLE_CHOICE_MINIMUM_COST);
    }
    return ante;
};
const getTieredCost = (baseCost, tier, outcomeType)=>{
    if (__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["CREATEABLE_NON_PREDICTIVE_OUTCOME_TYPES"].includes(outcomeType)) {
        return baseCost;
    }
    const tieredCost = tier ? baseCost * 10 ** (__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["tiers"].indexOf(tier) - 1) : baseCost;
    if (outcomeType == 'NUMBER' && tier != 'play') {
        return tieredCost / 10;
    }
    return tieredCost;
};
const KYC_VERIFICATION_BONUS_CASH = 3;
const BETTING_STREAK_SWEEPS_BONUS_AMOUNT = 0.05;
const BETTING_STREAK_SWEEPS_BONUS_MAX = 0.25;
const STARTING_BALANCE = 100;
const SUS_STARTING_BALANCE = 10;
const PHONE_VERIFICATION_BONUS = 1000;
const REFERRAL_AMOUNT = 1_000;
const REFERRAL_AMOUNT_CASH = 10.0;
const REFERRAL_MIN_PURCHASE_DOLLARS = 20;
const UNIQUE_BETTOR_BONUS_AMOUNT = 10;
const UNIQUE_ANSWER_BETTOR_BONUS_AMOUNT = 10;
const NEXT_DAY_BONUS = 100 // Paid on day following signup
;
const MARKET_VISIT_BONUS = 100 // Paid on first distinct 5 market visits
;
const MARKET_VISIT_BONUS_TOTAL = 500;
const UNIQUE_BETTOR_LIQUIDITY = 20;
const SMALL_UNIQUE_BETTOR_LIQUIDITY = 5;
const MAX_TRADERS_FOR_BIG_BONUS = 50;
const MAX_TRADERS_FOR_BONUS = 10000;
const SUBSIDY_FEE = 0;
const BETTING_STREAK_BONUS_AMOUNT = 5;
const BETTING_STREAK_BONUS_MAX = 25;
const BETTING_STREAK_RESET_HOUR = 7;
const MANACHAN_TWEET_COST = 250;
const PUSH_NOTIFICATION_BONUS = 1000;
const BURN_MANA_USER_ID = 'SlYWAUtOzGPIYyQfXfvmHPt8eu22';
const PaymentAmounts = [
    {
        mana: 500,
        priceInDollars: 7,
        bonusInDollars: 0,
        devStripeId: 'price_1Q5vRAGdoFKoCJW7zk9OTWBK',
        prodStripeId: 'price_1Q5vLGGdoFKoCJW7Q9w7cK1u'
    },
    {
        mana: 1_000,
        priceInDollars: 15,
        bonusInDollars: 10
    },
    {
        mana: 2_500,
        priceInDollars: 30,
        bonusInDollars: 25
    },
    {
        mana: 5_000,
        priceInDollars: 55,
        bonusInDollars: 0,
        devStripeId: 'price_1Q5vaXGdoFKoCJW71l2OL31r',
        prodStripeId: 'price_1Q5vJjGdoFKoCJW7Ws09fJ4j'
    },
    {
        mana: 10_000,
        priceInDollars: 110,
        bonusInDollars: 100
    },
    {
        mana: 100_000,
        priceInDollars: 1_000,
        bonusInDollars: 1000
    },
    {
        mana: 1_000,
        originalPriceInDollars: 15,
        priceInDollars: 7,
        bonusInDollars: 10,
        newUsersOnly: true
    },
    {
        mana: 5_000,
        originalPriceInDollars: 55,
        priceInDollars: 20,
        bonusInDollars: 40,
        newUsersOnly: true
    }
];
const WEB_PRICES = PaymentAmounts;
const IOS_PRICES = [
    {
        mana: 1_000,
        priceInDollars: 14.99,
        bonusInDollars: 10,
        sku: 'mana_1000'
    },
    {
        mana: 2_500,
        priceInDollars: 35.99,
        bonusInDollars: 25,
        sku: 'mana_2500'
    },
    {
        mana: 10_000,
        priceInDollars: 142.99,
        bonusInDollars: 100,
        sku: 'mana_10000'
    }
];
const SWEEPIES_CASHOUT_FEE = 0.05;
const MIN_CASHOUT_AMOUNT = 25;
const SWEEPS_MIN_BET = 1;
const MANA_MIN_BET = 1;
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/@supabase/supabase-js [external] (@supabase/supabase-js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@supabase/supabase-js", () => require("@supabase/supabase-js"));

module.exports = mod;
}}),
"[project]/common/src/supabase/utils.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "convertObjectToSQLRow": (()=>convertObjectToSQLRow),
    "convertSQLtoTS": (()=>convertSQLtoTS),
    "createClient": (()=>createClient),
    "millisToTs": (()=>millisToTs),
    "run": (()=>run),
    "tsToMillis": (()=>tsToMillis)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f40$supabase$2f$supabase$2d$js__$5b$external$5d$__$2840$supabase$2f$supabase$2d$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/@supabase/supabase-js [external] (@supabase/supabase-js, cjs)");
;
function createClient(instanceId, key, opts) {
    const url = `https://${instanceId}.supabase.co`;
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$supabase$2f$supabase$2d$js__$5b$external$5d$__$2840$supabase$2f$supabase$2d$js$2c$__cjs$29$__["createClient"])(url, key, opts);
}
async function run(q) {
    const { data, count, error } = await q;
    if (error != null) {
        throw error;
    } else {
        return {
            data,
            count
        };
    }
}
function millisToTs(millis) {
    return new Date(millis).toISOString();
}
function tsToMillis(ts) {
    return Date.parse(ts);
}
const camelize = (s)=>s.replace(/(_\w)/g, (m)=>m[1].toUpperCase());
const convertSQLtoTS = (sqlData, converters, expandData = true, shouldCamelize = true)=>{
    const { data = {}, ...rows } = sqlData;
    const entries = Object.entries(rows);
    const m = entries.map((entry)=>{
        const [key, val] = entry;
        const convert = converters[key];
        if (convert === false) return null;
        const jsProp = shouldCamelize ? camelize(key) : key;
        const jsVal = convert != null ? convert(val) : val;
        return [
            jsProp,
            jsVal
        ];
    }).filter((x)=>x != null);
    const newRows = Object.fromEntries(m);
    if (expandData) return {
        ...data,
        ...newRows
    };
    else return {
        ...newRows
    };
};
const convertObjectToSQLRow = (objData)=>{
    const entries = Object.entries(objData);
    const m = entries.map((entry)=>{
        const [key, val] = entry;
        const decamelizeKey = key.replace(/([A-Z])/g, '_$1').toLowerCase();
        return [
            decamelizeKey,
            val
        ];
    }).filter((x)=>x != null);
    const newRows = Object.fromEntries(m);
    return newRows;
};
}}),
"[project]/common/src/supabase/bets.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "NON_POINTS_BETS_LIMIT": (()=>NON_POINTS_BETS_LIMIT),
    "convertBet": (()=>convertBet)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/supabase/utils.ts [ssr] (ecmascript)");
;
;
const NON_POINTS_BETS_LIMIT = 10_000;
const convertBet = (row)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["convertSQLtoTS"])(row, {
        updated_time: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["tsToMillis"],
        created_time: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["tsToMillis"],
        answer_id: (a)=>a != null ? a : undefined
    });
}}),
"[project]/common/src/answer.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "MAX_ANSWERS": (()=>MAX_ANSWERS),
    "MAX_ANSWER_LENGTH": (()=>MAX_ANSWER_LENGTH),
    "MAX_INDEPENDENT_ANSWERS": (()=>MAX_INDEPENDENT_ANSWERS),
    "OTHER_TOOLTIP_TEXT": (()=>OTHER_TOOLTIP_TEXT),
    "getDefaultSort": (()=>getDefaultSort),
    "getMaximumAnswers": (()=>getMaximumAnswers),
    "sortAnswers": (()=>sortAnswers)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/sortBy.js [external] (lodash/sortBy.js, cjs)");
;
const MAX_ANSWER_LENGTH = 240;
const MAX_ANSWERS = 100;
const MAX_INDEPENDENT_ANSWERS = 200;
const getMaximumAnswers = (shouldAnswersSumToOne)=>shouldAnswersSumToOne ? MAX_ANSWERS : MAX_INDEPENDENT_ANSWERS;
const OTHER_TOOLTIP_TEXT = "Bet on all answers that aren't listed yet. A bet on Other automatically includes any answer added in the future.";
const getDefaultSort = (contract)=>{
    const { sort, answers } = contract;
    if (sort) return sort;
    if (contract.addAnswersMode === 'DISABLED') return 'old';
    else if (!contract.shouldAnswersSumToOne) return 'prob-desc';
    else if (answers.length > 10) return 'prob-desc';
    return 'old';
};
const sortAnswers = (contract, answers, sort)=>{
    const { resolutions } = contract;
    sort = sort ?? getDefaultSort(contract);
    const shouldAnswersSumToOne = 'shouldAnswersSumToOne' in contract ? contract.shouldAnswersSumToOne : true;
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$sortBy$2e$js__$5b$external$5d$__$28$lodash$2f$sortBy$2e$js$2c$__cjs$29$__["default"])(answers, [
        shouldAnswersSumToOne ? (answer)=>resolutions ? -1 * resolutions[answer.id] : answer : (answer)=>answer.resolution ? 1 : 0,
        // then by sort
        (answer)=>{
            if (sort === 'old') {
                return answer.resolutionTime ? answer.resolutionTime : answer.index;
            } else if (sort === 'new') {
                return answer.resolutionTime ? -answer.resolutionTime : -answer.index;
            } else if (sort === 'prob-asc') {
                return answer.prob;
            } else if (sort === 'prob-desc') {
                return -1 * answer.prob;
            } else if (sort === 'liquidity') {
                return answer.subsidyPool ? -1 * answer.subsidyPool : 0;
            } else if (sort === 'alphabetical') {
                return answer.text.toLowerCase();
            }
            return 0;
        }
    ]);
};
}}),
"[externals]/lodash/pick.js [external] (lodash/pick.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("lodash/pick.js", () => require("lodash/pick.js"));

module.exports = mod;
}}),
"[project]/common/src/group.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "DEFAULT_TOPIC": (()=>DEFAULT_TOPIC),
    "GroupAboutSchema": (()=>GroupAboutSchema),
    "GroupNameSchema": (()=>GroupNameSchema),
    "MAX_GROUPS_PER_MARKET": (()=>MAX_GROUPS_PER_MARKET),
    "MAX_GROUP_NAME_LENGTH": (()=>MAX_GROUP_NAME_LENGTH),
    "MAX_ID_LENGTH": (()=>MAX_ID_LENGTH),
    "MySearchGroupShape": (()=>MySearchGroupShape),
    "SearchGroupParams": (()=>SearchGroupParams),
    "SearchGroupShape": (()=>SearchGroupShape),
    "TOPIC_KEY": (()=>TOPIC_KEY),
    "groupPath": (()=>groupPath),
    "toLiteGroup": (()=>toLiteGroup)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$pick$2e$js__$5b$external$5d$__$28$lodash$2f$pick$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/pick.js [external] (lodash/pick.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/zod-types.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
const MAX_GROUP_NAME_LENGTH = 75;
const MAX_ID_LENGTH = 60;
const MAX_GROUPS_PER_MARKET = 5;
const GroupAboutSchema = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["contentSchema"].or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string());
const GroupNameSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().trim().min(2).max(MAX_GROUP_NAME_LENGTH);
function groupPath(groupSlug) {
    return `/topic/${groupSlug}`;
}
function toLiteGroup(group) {
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$pick$2e$js__$5b$external$5d$__$28$lodash$2f$pick$2e$js$2c$__cjs$29$__["default"])(group, [
        'id',
        'slug',
        'name',
        'importanceScore',
        'privacyStatus',
        'totalMembers'
    ]);
}
const TOPIC_KEY = 'topic';
const DEFAULT_TOPIC = '';
const SearchGroupParams = (shape)=>__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object(shape).strict();
const MySearchGroupShape = {
    term: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
    limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gt(0),
    addingToContract: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
    type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'full',
        'lite'
    ]).default('full')
};
const SearchGroupShape = {
    ...MySearchGroupShape,
    memberGroupsOnly: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/random.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "createRNG": (()=>createRNG),
    "genHash": (()=>genHash),
    "nanoid": (()=>nanoid),
    "randomString": (()=>randomString),
    "randomStringRegex": (()=>randomStringRegex),
    "shuffle": (()=>shuffle)
});
const a = 'useandom26T198340PX75pxJACKVERYMINDBUSHWOLFGQZbfghjklqvwyzrict';
const nanoid = (e = 21)=>{
    let t = '';
    const r = crypto.getRandomValues(new Uint8Array(e));
    for(let n = 0; n < e; n++)t += a[61 & r[n]];
    if (t.length !== e) throw new Error('Failed to generate random string');
    return t;
};
const randomStringRegex = new RegExp(`^[${a}]+$`);
const randomString = (length = 10)=>nanoid(length);
function genHash(str) {
    // xmur3
    // Route around compiler bug by using object?
    const o = {
        h: 1779033703 ^ str.length
    };
    for(let i = 0; i < str.length; i++){
        let h = o.h;
        h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
        h = h << 13 | h >>> 19;
        o.h = h;
    }
    return function() {
        let h = o.h;
        h = Math.imul(h ^ h >>> 16, 2246822507);
        h = Math.imul(h ^ h >>> 13, 3266489909);
        return (h ^= h >>> 16) >>> 0;
    };
}
function createRNG(seed) {
    // https://stackoverflow.com/a/47593316/1592933
    const gen = genHash(seed);
    let [a, b, c, d] = [
        gen(),
        gen(),
        gen(),
        gen()
    ];
    // sfc32
    return function() {
        a >>>= 0;
        b >>>= 0;
        c >>>= 0;
        d >>>= 0;
        let t = a + b | 0;
        a = b ^ b >>> 9;
        b = c + (c << 3) | 0;
        c = c << 21 | c >>> 11;
        d = d + 1 | 0;
        t = t + d | 0;
        c = c + t | 0;
        return (t >>> 0) / 4294967296;
    };
}
const shuffle = (array, rand)=>{
    for(let i = 0; i < array.length; i++){
        const swapIndex = i + Math.floor(rand() * (array.length - i));
        [array[i], array[swapIndex]] = [
            array[swapIndex],
            array[i]
        ];
    }
};
}}),
"[project]/common/src/pseudo-numeric.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "formatNumericProbability": (()=>formatNumericProbability),
    "getFormattedMappedValue": (()=>getFormattedMappedValue),
    "getMappedValue": (()=>getMappedValue),
    "getPseudoProbability": (()=>getPseudoProbability)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$stonk$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/stonk.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/format.ts [ssr] (ecmascript)");
;
;
function formatNumericProbability(p, contract) {
    const value = getMappedValue(contract, p);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatLargeNumber"])(value);
}
const getMappedValue = (contract, prob)=>{
    if (contract.outcomeType !== 'PSEUDO_NUMERIC' && contract.outcomeType !== 'STONK') return prob;
    if (contract.outcomeType === 'STONK') return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$stonk$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getStonkPriceAtProb"])(contract, prob);
    const { min, max, isLogScale } = contract;
    if (isLogScale) {
        const logValue = prob * Math.log10(max - min + 1);
        return 10 ** logValue + min - 1;
    }
    return prob * (max - min) + min;
};
const getFormattedMappedValue = (contract, prob)=>{
    const { outcomeType } = contract;
    if (outcomeType !== 'PSEUDO_NUMERIC' && outcomeType !== 'STONK') return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatPercent"])(prob);
    const value = getMappedValue(contract, prob);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$format$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatLargeNumber"])(value);
};
const getPseudoProbability = (value, min, max, isLogScale = false)=>{
    if (value < min) return 0;
    if (value > max) return 1;
    if (isLogScale) {
        return Math.log10(value - min + 1) / Math.log10(max - min + 1);
    }
    return (value - min) / (max - min);
};
}}),
"[externals]/@tiptap/core [external] (@tiptap/core, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@tiptap/core");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/prosemirror-model [external] (prosemirror-model, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("prosemirror-model");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/@tiptap/starter-kit [external] (@tiptap/starter-kit, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@tiptap/starter-kit", () => require("@tiptap/starter-kit"));

module.exports = mod;
}}),
"[externals]/@tiptap/extension-image [external] (@tiptap/extension-image, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@tiptap/extension-image");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/@tiptap/extension-link [external] (@tiptap/extension-link, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@tiptap/extension-link");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/@tiptap/extension-mention [external] (@tiptap/extension-mention, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@tiptap/extension-mention");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/linkifyjs [external] (linkifyjs, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("linkifyjs", () => require("linkifyjs"));

module.exports = mod;
}}),
"[externals]/string-similarity [external] (string-similarity, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("string-similarity", () => require("string-similarity"));

module.exports = mod;
}}),
"[project]/common/src/util/tiptap-iframe.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
// Adopted from https://github.com/ueberdosis/tiptap/blob/main/demos/src/Experiments/Embeds/Vue/iframe.ts
__turbopack_esm__({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/core [external] (@tiptap/core, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const __TURBOPACK__default__export__ = __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["Node"].create({
    name: 'iframe',
    group: 'block',
    atom: true,
    addOptions () {
        return {
            HTMLAttributes: {
                class: 'w-full h-80',
                height: 80 * 4,
                sandbox: 'allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox'
            }
        };
    },
    addAttributes () {
        return {
            src: {
                default: null
            },
            frameBorder: {
                default: 0
            }
        };
    },
    parseHTML () {
        return [
            {
                tag: 'iframe'
            }
        ];
    },
    renderHTML ({ HTMLAttributes }) {
        const iframeAttributes = (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["mergeAttributes"])(HTMLAttributes, // Add options second, so they override originals, which prevents a XSS attack.
        this.options.HTMLAttributes);
        const blacklistedAttributes = [
            'srcdoc'
        ];
        const keysToRemove = Object.keys(iframeAttributes).filter((key)=>blacklistedAttributes.includes(key.toLowerCase()));
        for (const key of keysToRemove){
            delete iframeAttributes[key];
        }
        const { src } = HTMLAttributes;
        // This is a hack to prevent native from opening the iframe in an in-app browser
        // and mobile in another tab. In native, links with target='_blank' open in the in-app browser.
        if (src.includes('manifold.markets/embed/')) {
            return [
                'div',
                {
                    style: {
                        position: 'relative'
                    },
                    ...this.options.HTMLAttributes
                },
                [
                    'a',
                    {
                        href: src.replace('embed/', ''),
                        target: '_self',
                        style: {
                            position: 'absolute',
                            top: 0,
                            left: 0,
                            right: 0,
                            bottom: 0,
                            zIndex: 20,
                            display: 'block'
                        }
                    }
                ],
                [
                    'iframe',
                    iframeAttributes
                ]
            ];
        }
        return [
            'iframe',
            iframeAttributes
        ];
    },
    addCommands () {
        return {
            setIframe: (options)=>({ tr, dispatch })=>{
                    const { selection } = tr;
                    const node = this.type.create(options);
                    if (dispatch) {
                        tr.replaceRangeWith(selection.from, selection.to, node);
                    }
                    return true;
                }
        };
    }
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/tiptap-tweet.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "TiptapTweet": (()=>TiptapTweet)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/core [external] (@tiptap/core, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const TiptapTweet = __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["Node"].create({
    name: 'tiptapTweet',
    group: 'block',
    atom: true,
    addAttributes () {
        return {
            tweetId: {
                default: null
            }
        };
    },
    parseHTML () {
        return [
            {
                tag: 'tiptap-tweet'
            }
        ];
    },
    renderHTML (props) {
        return [
            'tiptap-tweet',
            (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["mergeAttributes"])(props.HTMLAttributes)
        ];
    }
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/tiptap-spoiler.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
// adapted from @n8body/tiptap-spoiler
__turbopack_esm__({
    "TiptapSpoiler": (()=>TiptapSpoiler)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/core [external] (@tiptap/core, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const spoilerInputRegex = /(?:^|\s)((?:\|\|)((?:[^||]+))(?:\|\|))$/;
const spoilerPasteRegex = /(?:^|\s)((?:\|\|)((?:[^||]+))(?:\|\|))/g;
const TiptapSpoiler = __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["Mark"].create({
    name: 'spoiler',
    inline: true,
    group: 'inline',
    inclusive: false,
    exitable: true,
    content: 'inline*',
    priority: 1001,
    addOptions () {
        return {
            class: '',
            inputRegex: spoilerInputRegex,
            pasteRegex: spoilerPasteRegex
        };
    },
    addCommands () {
        return {
            setSpoiler: ()=>({ commands })=>commands.setMark(this.name),
            toggleSpoiler: ()=>({ commands })=>commands.toggleMark(this.name),
            unsetSpoiler: ()=>({ commands })=>commands.unsetMark(this.name)
        };
    },
    addInputRules () {
        return [
            (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["markInputRule"])({
                find: this.options.inputRegex,
                type: this.type
            })
        ];
    },
    addPasteRules () {
        return [
            (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["markPasteRule"])({
                find: this.options.pasteRegex,
                type: this.type
            })
        ];
    },
    parseHTML () {
        return [
            {
                tag: 'spoiler'
            }
        ];
    },
    renderHTML ({ HTMLAttributes }) {
        return [
            'spoiler',
            (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["mergeAttributes"])(HTMLAttributes, {
                class: this.options.class
            }),
            0
        ];
    }
});
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/parse.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "beginsWith": (()=>beginsWith),
    "extensions": (()=>extensions),
    "getUrl": (()=>getUrl),
    "parseJsonContentToText": (()=>parseJsonContentToText),
    "parseMentions": (()=>parseMentions),
    "richTextToString": (()=>richTextToString),
    "searchInAny": (()=>searchInAny),
    "wordIn": (()=>wordIn)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/core [external] (@tiptap/core, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$prosemirror$2d$model__$5b$external$5d$__$28$prosemirror$2d$model$2c$__esm_import$29$__ = __turbopack_import__("[externals]/prosemirror-model [external] (prosemirror-model, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$starter$2d$kit__$5b$external$5d$__$2840$tiptap$2f$starter$2d$kit$2c$__cjs$29$__ = __turbopack_import__("[externals]/@tiptap/starter-kit [external] (@tiptap/starter-kit, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$image__$5b$external$5d$__$2840$tiptap$2f$extension$2d$image$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/extension-image [external] (@tiptap/extension-image, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$link__$5b$external$5d$__$2840$tiptap$2f$extension$2d$link$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/extension-link [external] (@tiptap/extension-link, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$mention__$5b$external$5d$__$2840$tiptap$2f$extension$2d$mention$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@tiptap/extension-mention [external] (@tiptap/extension-mention, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$linkifyjs__$5b$external$5d$__$28$linkifyjs$2c$__cjs$29$__ = __turbopack_import__("[externals]/linkifyjs [external] (linkifyjs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/uniq.js [external] (lodash/uniq.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$string$2d$similarity__$5b$external$5d$__$28$string$2d$similarity$2c$__cjs$29$__ = __turbopack_import__("[externals]/string-similarity [external] (string-similarity, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$iframe$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/tiptap-iframe.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$tweet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/tiptap-tweet.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$spoiler$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/tiptap-spoiler.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$prosemirror$2d$model__$5b$external$5d$__$28$prosemirror$2d$model$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$image__$5b$external$5d$__$2840$tiptap$2f$extension$2d$image$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$link__$5b$external$5d$__$2840$tiptap$2f$extension$2d$link$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$mention__$5b$external$5d$__$2840$tiptap$2f$extension$2d$mention$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$iframe$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$tweet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$spoiler$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$prosemirror$2d$model__$5b$external$5d$__$28$prosemirror$2d$model$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$image__$5b$external$5d$__$2840$tiptap$2f$extension$2d$image$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$link__$5b$external$5d$__$2840$tiptap$2f$extension$2d$link$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$mention__$5b$external$5d$__$2840$tiptap$2f$extension$2d$mention$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$iframe$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$tweet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$spoiler$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
;
function getUrl(text) {
    const results = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$linkifyjs__$5b$external$5d$__$28$linkifyjs$2c$__cjs$29$__["find"])(text, 'url');
    return results.length ? results[0].href : null;
}
const beginsWith = (text, query)=>text.toLocaleLowerCase().startsWith(query.toLocaleLowerCase());
const wordIn = (word, corpus)=>{
    word = word.toLocaleLowerCase();
    corpus = corpus.toLocaleLowerCase();
    return corpus.includes(word) || (0, __TURBOPACK__imported__module__$5b$externals$5d2f$string$2d$similarity__$5b$external$5d$__$28$string$2d$similarity$2c$__cjs$29$__["compareTwoStrings"])(word, corpus) > 0.7;
};
const checkAgainstQuery = (query, corpus)=>query.split(' ').every((word)=>wordIn(word, corpus));
const searchInAny = (query, ...fields)=>fields.some((field)=>checkAgainstQuery(query, field));
function parseMentions(data) {
    const mentions = data.content?.flatMap(parseMentions) ?? [] //dfs
    ;
    if (data.type === 'mention' && data.attrs) {
        mentions.push(data.attrs.id);
    }
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__["default"])(mentions);
}
// TODO: this is a hack to get around the fact that tiptap doesn't have a
// way to add a node view without bundling in tsx
function skippableComponent(extension, label) {
    return __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["Node"].create({
        name: extension,
        group: 'block',
        renderText: ()=>label
    });
}
const extensions = [
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$starter$2d$kit__$5b$external$5d$__$2840$tiptap$2f$starter$2d$kit$2c$__cjs$29$__["StarterKit"],
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$link__$5b$external$5d$__$2840$tiptap$2f$extension$2d$link$2c$__esm_import$29$__["Link"],
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$image__$5b$external$5d$__$2840$tiptap$2f$extension$2d$image$2c$__esm_import$29$__["Image"].extend({
        renderText: ()=>'[image]'
    }),
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$mention__$5b$external$5d$__$2840$tiptap$2f$extension$2d$mention$2c$__esm_import$29$__["Mention"],
    __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$extension$2d$mention__$5b$external$5d$__$2840$tiptap$2f$extension$2d$mention$2c$__esm_import$29$__["Mention"].extend({
        name: 'contract-mention'
    }),
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$iframe$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["default"].extend({
        renderText: ({ node })=>("TURBOPACK compile-time truthy", 1) ? `(${node.attrs.src})` : ("TURBOPACK unreachable", undefined)
    }),
    skippableComponent('gridCardsComponent', '[markets]'),
    skippableComponent('linkPreview', '[link preview]'),
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$tweet$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["TiptapTweet"].extend({
        renderText: ()=>'[tweet]'
    }),
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$tiptap$2d$spoiler$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["TiptapSpoiler"].extend({
        renderHTML: ()=>[
                'span',
                '[spoiler]',
                0
            ]
    })
];
const extensionSchema = (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["getSchema"])(extensions);
const extensionSerializers = (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["getTextSerializersFromSchema"])(extensionSchema);
function richTextToString(text) {
    if (!text) return '';
    try {
        const node = __TURBOPACK__imported__module__$5b$externals$5d2f$prosemirror$2d$model__$5b$external$5d$__$28$prosemirror$2d$model$2c$__esm_import$29$__["Node"].fromJSON(extensionSchema, text);
        return (0, __TURBOPACK__imported__module__$5b$externals$5d2f40$tiptap$2f$core__$5b$external$5d$__$2840$tiptap$2f$core$2c$__esm_import$29$__["getText"])(node, {
            blockSeparator: '\n\n',
            textSerializers: extensionSerializers
        });
    } catch (e) {
        console.error('error parsing rich text', `"${text}":`, e);
        return '';
    }
}
function parseJsonContentToText(content) {
    return typeof content === 'string' ? content : richTextToString(content);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/api/market-types.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "createBinarySchema": (()=>createBinarySchema),
    "createBountySchema": (()=>createBountySchema),
    "createMarketProps": (()=>createMarketProps),
    "createMultiNumericSchema": (()=>createMultiNumericSchema),
    "createMultiSchema": (()=>createMultiSchema),
    "createNumericSchema": (()=>createNumericSchema),
    "createPollSchema": (()=>createPollSchema),
    "resolveBinarySchema": (()=>resolveBinarySchema),
    "resolveMarketProps": (()=>resolveMarketProps),
    "resolveMultiSchema": (()=>resolveMultiSchema),
    "resolvePseudoNumericSchema": (()=>resolvePseudoNumericSchema),
    "toFullMarket": (()=>toFullMarket),
    "toLiteMarket": (()=>toLiteMarket),
    "updateMarketProps": (()=>updateMarketProps)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/answer.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/economy.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/contract.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/zod-types.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/group.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/tier.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$random$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/random.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$pseudo$2d$numeric$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/pseudo-numeric.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$parse$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/parse.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$parse$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$parse$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
;
;
function toLiteMarket(contract) {
    const { id, creatorId, creatorUsername, creatorName, createdTime, creatorAvatarUrl, closeTime, question, slug, outcomeType, mechanism, volume, volume24Hours, isResolved, resolution, resolutionTime, resolutionProbability, resolverId, uniqueBettorCount, lastUpdatedTime, lastBetTime, lastCommentTime, loverUserId1, loverUserId2, matchCreatorId, isLove, marketTier, token, siblingContractId } = contract;
    const { p, totalLiquidity } = contract;
    const probability = outcomeType === 'BINARY' || outcomeType === 'PSEUDO_NUMERIC' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getProbability"])(contract) : undefined;
    let numericValues = {};
    if (contract.outcomeType === 'PSEUDO_NUMERIC') {
        const value = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$pseudo$2d$numeric$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getMappedValue"])(contract, contract.prob);
        const { min, max, isLogScale } = contract;
        numericValues = {
            value,
            min,
            max,
            isLogScale
        };
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])({
        id,
        creatorId,
        creatorUsername,
        creatorName,
        createdTime,
        creatorAvatarUrl,
        closeTime: resolutionTime && closeTime ? Math.min(resolutionTime, closeTime) : closeTime,
        question,
        slug,
        url: `https://${__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DOMAIN"]}/${creatorUsername}/${slug}`,
        pool: 'pool' in contract ? contract.pool : undefined,
        probability,
        p,
        totalLiquidity,
        outcomeType,
        mechanism,
        volume,
        volume24Hours,
        isResolved,
        resolution,
        resolutionTime,
        resolutionProbability,
        resolverId,
        uniqueBettorCount,
        lastUpdatedTime,
        lastBetTime,
        lastCommentTime,
        ...numericValues,
        marketTier,
        token,
        siblingContractId,
        // Manifold love props.
        loverUserId1,
        loverUserId2,
        matchCreatorId,
        isLove
    });
}
function toFullMarket(contract) {
    const liteMarket = toLiteMarket(contract);
    const { outcomeType } = contract;
    const answers = outcomeType === 'MULTIPLE_CHOICE' && contract.answers ? contract.answers.map((answer)=>augmentAnswerWithProbability(contract, answer)) : undefined;
    let multiValues = {};
    if (outcomeType === 'MULTIPLE_CHOICE') {
        if (contract.mechanism === 'cpmm-multi-1') {
            multiValues = {
                shouldAnswersSumToOne: contract.shouldAnswersSumToOne,
                addAnswersMode: contract.addAnswersMode
            };
        } else {
            multiValues = {
                shouldAnswersSumToOne: true,
                addAnswersMode: 'DISABLED'
            };
        }
    }
    const options = outcomeType === 'POLL' ? contract.options.map(({ text, votes })=>({
            text,
            votes
        })) : undefined;
    const bountyValues = outcomeType === 'BOUNTIED_QUESTION' ? {
        totalBounty: contract.totalBounty,
        bountyLeft: contract.bountyLeft
    } : {};
    const { description, coverImageUrl, groupSlugs } = contract;
    return {
        ...liteMarket,
        ...bountyValues,
        ...multiValues,
        answers,
        options,
        description,
        coverImageUrl,
        groupSlugs,
        textDescription: typeof description === 'string' ? description : (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$parse$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["richTextToString"])(description)
    };
}
function augmentAnswerWithProbability(contract, answer) {
    const probability = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getAnswerProbability"])(contract, answer.id);
    const { poolYes, poolNo, prob: _, ...other } = answer;
    const pool = {
        YES: poolYes,
        NO: poolNo
    };
    return {
        ...other,
        pool,
        probability
    };
}
const createBinarySchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'BINARY',
        'STONK'
    ]),
    initialProb: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().min(1).max(99).optional(),
    extraLiquidity: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().min(1).optional()
});
const createNumericSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'PSEUDO_NUMERIC'
    ]),
    min: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().safe(),
    max: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().safe(),
    initialValue: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().safe(),
    isLogScale: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
    extraLiquidity: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().min(1).optional()
});
const createMultiSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'MULTIPLE_CHOICE'
    ]),
    answers: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().trim().min(1)).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWERS"]),
    addAnswersMode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'DISABLED',
        'ONLY_CREATOR',
        'ANYONE'
    ]).default('DISABLED'),
    shouldAnswersSumToOne: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
    extraLiquidity: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().min(1).optional()
});
const createMultiNumericSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'NUMBER'
    ]),
    min: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().safe(),
    max: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().safe(),
    precision: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gt(0)
});
const createBountySchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'BOUNTIED_QUESTION'
    ]),
    totalBounty: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().min(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MINIMUM_BOUNTY"]),
    isAutoBounty: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
});
const createPollSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'POLL'
    ]),
    answers: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().trim().min(1)).min(2).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWERS"])
});
const createMarketProps = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    question: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().min(1).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_QUESTION_LENGTH"]),
    description: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["contentSchema"].or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
    descriptionHtml: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    descriptionMarkdown: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    descriptionJson: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    closeTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].date(),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number()
    ]).refine((date)=>(typeof date === 'number' ? date : date.getTime()) > Date.now(), 'Close time must be in the future.').optional(),
    outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["CREATEABLE_OUTCOME_TYPES"]),
    groupIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().min(1).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ID_LENGTH"])).optional(),
    visibility: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["VISIBILITIES"]).default('public').optional(),
    isTwitchContract: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
    utcOffset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
    marketTier: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$tier$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["tiers"]).optional(),
    idempotencyKey: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().regex(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$random$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["randomStringRegex"]).length(10).optional()
}).and(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    createMultiSchema,
    createNumericSchema,
    createBountySchema,
    createPollSchema,
    createBinarySchema,
    createMultiNumericSchema
]));
const updateMarketProps = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    question: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().min(1).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_QUESTION_LENGTH"]).optional(),
    visibility: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'unlisted',
        'public'
    ]).optional(),
    closeTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
    addAnswersMode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
        'ONLY_CREATOR',
        'ANYONE'
    ]).optional(),
    coverImageUrl: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].null()).optional(),
    sort: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    description: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    descriptionHtml: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    descriptionMarkdown: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    descriptionJson: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
}).strict();
const resolveBinarySchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$contract$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["RESOLUTIONS"]),
    probabilityInt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(0).lte(100).optional(),
    // To resolve one answer of multiple choice. Only independent answers supported (shouldAnswersSumToOne = false)
    answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
}).passthrough() // overlaps with pseudo-numeric
;
const resolveMultiSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('CANCEL')
    }),
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('CHOOSE_ONE'),
        answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
    }),
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('CHOOSE_MULTIPLE'),
        resolutions: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            pct: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(0).lte(100)
        }))
    })
]);
const resolvePseudoNumericSchema = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('CANCEL')
    }),
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('MKT'),
        value: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
        probabilityInt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(0).lte(100)
    })
]);
const resolveMarketProps = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
}).and(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
    resolveBinarySchema,
    resolveMultiSchema,
    resolvePseudoNumericSchema
]));
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/api/market-search-types.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "FIRESTORE_DOC_REF_ID_REGEX": (()=>FIRESTORE_DOC_REF_ID_REGEX),
    "searchProps": (()=>searchProps)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
const FIRESTORE_DOC_REF_ID_REGEX = /^[a-zA-Z0-9_-]{1,}$/;
const searchProps = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    term: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    filter: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('open'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('closing-90-days'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('closing-week'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('closing-month'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('closed'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('resolved'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('all')
    ]).default('all'),
    sort: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('newest'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('score'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('daily-score'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('freshness-score'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('24-hour-vol'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('most-popular'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('liquidity'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('subsidy'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('last-updated'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('close-date'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('resolve-date'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('random'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('bounty-amount'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('prob-descending'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('prob-ascending')
    ]).default('most-popular'),
    contractType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('ALL'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('BINARY'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('MULTIPLE_CHOICE'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('FREE_RESPONSE'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('PSEUDO_NUMERIC'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('BOUNTIED_QUESTION'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('STONK'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('POLL'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('NUMBER')
    ]).default('ALL'),
    offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
    limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gt(0).lte(1000).default(100),
    topicSlug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().regex(FIRESTORE_DOC_REF_ID_REGEX).optional(),
    forYou: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('1'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('0')
    ]).default('0'),
    creatorId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().regex(FIRESTORE_DOC_REF_ID_REGEX).optional(),
    isPrizeMarket: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('true'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('false'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('1'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('0')
    ]).default('0'),
    marketTier: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().regex(/^[01]{5}$/).default('00000'),
    token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].union([
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('MANA'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('CASH'),
        __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].literal('ALL')
    ]).default('ALL'),
    gids: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
}).strict();
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/comment.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "MAX_COMMENT_LENGTH": (()=>MAX_COMMENT_LENGTH)
});
const MAX_COMMENT_LENGTH = 10000;
}}),
"[project]/common/src/period.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "PERIODS": (()=>PERIODS),
    "getCutoff": (()=>getCutoff),
    "periodDurations": (()=>periodDurations)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/time.ts [ssr] (ecmascript)");
;
const PERIODS = [
    'daily',
    'weekly',
    'monthly',
    'allTime'
];
const periodDurations = {
    daily: 1 * __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DAY_MS"],
    weekly: 7 * __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DAY_MS"],
    monthly: 30 * __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["DAY_MS"]
};
const getCutoff = (period)=>{
    if (period === 'allTime') {
        return new Date(0).valueOf();
    }
    const nowRounded = Math.round(Date.now() / __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["HOUR_MS"]) * __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["HOUR_MS"];
    return nowRounded - periodDurations[period];
};
}}),
"[project]/common/src/gidx/gidx.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "ENABLE_FAKE_CUSTOMER": (()=>ENABLE_FAKE_CUSTOMER),
    "FAKE_CUSTOMER_BODY": (()=>FAKE_CUSTOMER_BODY),
    "FRAUD_THRESHOLD": (()=>FRAUD_THRESHOLD),
    "GIDX_REGISTATION_DOCUMENTS_REQUIRED": (()=>GIDX_REGISTATION_DOCUMENTS_REQUIRED),
    "GPSProps": (()=>GPSProps),
    "IDENTITY_THRESHOLD": (()=>IDENTITY_THRESHOLD),
    "ID_ERROR_MSG": (()=>ID_ERROR_MSG),
    "ProcessSessionCode": (()=>ProcessSessionCode),
    "cashoutParams": (()=>cashoutParams),
    "cashoutRequestParams": (()=>cashoutRequestParams),
    "checkoutParams": (()=>checkoutParams),
    "exampleCustomers": (()=>exampleCustomers),
    "idNameToCategoryType": (()=>idNameToCategoryType),
    "verificationParams": (()=>verificationParams)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/economy.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
const GIDX_REGISTATION_DOCUMENTS_REQUIRED = 1;
const GPSProps = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    Latitude: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
    Longitude: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
    Radius: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
    Altitude: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
    Speed: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
    DateTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
});
const verificationParams = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    FirstName: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    LastName: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    DeviceGPS: GPSProps,
    DateOfBirth: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    // Must supply address atm, but we could also use ID info
    AddressLine1: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    AddressLine2: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    City: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    StateCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    PostalCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    IdentificationTypeCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(1).lte(4).optional(),
    IdentificationNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    EmailAddress: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    ReferralCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    // only used when ENABLE_FAKE_CUSTOMER is true
    DeviceIpAddress: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
    MobilePhoneNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
});
const BillingAddress = __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
    City: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    AddressLine1: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    StateCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    PostalCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    CountryCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
});
const checkoutParams = {
    MerchantTransactionID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    MerchantSessionID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    PaymentAmount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        mana: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
        priceInDollars: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
        bonusInDollars: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number()
    }),
    PaymentMethod: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        Type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
            'CC'
        ]),
        NameOnAccount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
        SavePaymentMethod: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean(),
        BillingAddress,
        // CC specific fields,
        creditCard: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            CardNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            CVV: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            ExpirationDate: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        // .optional(),
        // ach: z
        //   .object({
        //     AccountNumber: z.string(),
        //     RoutingNumber: z.string(),
        //   })
        //   .optional(),
        // For saved payment methods:
        saved: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            Token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            DisplayName: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).optional()
    })
};
const cashoutRequestParams = {
    ...checkoutParams,
    PaymentAmount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        manaCash: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CASHOUT_AMOUNT"]),
        dollars: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte((1 - __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["SWEEPIES_CASHOUT_FEE"]) * (__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MIN_CASHOUT_AMOUNT"] / 100))
    }),
    SavePaymentMethod: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean(),
    PaymentMethod: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
        Type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
            'ACH'
        ]),
        NameOnAccount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
        AccountNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
        RoutingNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
        BillingAddress: BillingAddress
    }),
    DeviceGPS: GPSProps
};
const cashoutParams = {
    ...cashoutRequestParams,
    userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    ip: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
    txnId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
};
const idNameToCategoryType = {
    'Drivers License': 2,
    Passport: 3,
    'Military Id': 4,
    'Government Photo Id': 5,
    'Utility Bill': 7,
    Other: 1
};
const ID_ERROR_MSG = 'Confidence in identity too low. Double check your information or upload documents to verify your identity.';
const IDENTITY_THRESHOLD = 80;
const FRAUD_THRESHOLD = 60;
const ENABLE_FAKE_CUSTOMER = false;
const exampleCustomers = [
    {
        EmailAddress: 'mradamgibbs@gmail.com',
        MobilePhoneNumber: '5785785789',
        DeviceIpAddress: '194.207.197.157',
        FirstName: 'Adam',
        LastName: 'Gibbs',
        DateOfBirth: '01/11/1979',
        CountryCode: 'GB',
        IdentificationTypeCode: 2,
        IdentificationNumber: '123456789',
        AddressLine1: '133 Hall Road',
        City: 'Hull',
        StateCode: '',
        PostalCode: 'Hu6 8qj',
        DeviceGPS: {
            Latitude: 53.744339,
            Longitude: -0.33244,
            Radius: 11.484,
            Altitude: 0,
            Speed: 0,
            DateTime: new Date().toISOString()
        }
    },
    {
        EmailAddress: 'gochanman@yahoo.com',
        MobilePhoneNumber: '4042818372',
        DeviceIpAddress: '24.147.127.6',
        FirstName: 'Corey',
        LastName: 'Chandler',
        DateOfBirth: '09/28/1987',
        CountryCode: 'US',
        IdentificationTypeCode: 2,
        IdentificationNumber: '123456789',
        AddressLine1: '66 Forest Street',
        City: 'Reading',
        StateCode: 'MA',
        PostalCode: '01867',
        DeviceGPS: {
            // new york (5k limit):
            // Latitude: 40.82024,
            // Longitude: -73.935944,
            // florida (5k limit):
            Latitude: 26.64983,
            Longitude: -81.847878,
            // utah (blocked):
            // Latitude: 40.7608,
            // Longitude: -111.891,
            // Massachusetts:
            // Latitude: 39.615342,
            // Longitude: -112.183449,
            Radius: 11.484,
            Altitude: 0,
            Speed: 0,
            DateTime: new Date().toISOString()
        }
    },
    {
        EmailAddress: 'andsief123@yahoo.com',
        MobilePhoneNumber: '4042818372',
        DeviceIpAddress: '73.16.248.173',
        FirstName: 'Andrew',
        LastName: 'Siegfried',
        DateOfBirth: '01/27/1978',
        CountryCode: 'US',
        IdentificationTypeCode: 2,
        IdentificationNumber: '123456789',
        AddressLine1: '321 Greenwood Lane',
        City: 'Williston',
        StateCode: 'VT',
        PostalCode: '05495',
        DeviceGPS: {
            Latitude: 44.064107,
            Longitude: -72.545022,
            Radius: 11.484,
            Altitude: 0,
            Speed: 0,
            DateTime: new Date().toISOString()
        }
    },
    {
        EmailAddress: 'playfree9800@gmail.com',
        MobilePhoneNumber: '4042818372',
        DeviceIpAddress: '99.100.24.160',
        FirstName: 'Antron',
        LastName: 'Hurt',
        DateOfBirth: '11/06/1986',
        CountryCode: 'US',
        IdentificationTypeCode: 2,
        IdentificationNumber: '123456789',
        AddressLine1: '214 Rosemont Ave',
        City: 'Modesto',
        StateCode: 'CA',
        PostalCode: '95351',
        DeviceGPS: {
            Latitude: 37.774929,
            Longitude: -122.419418,
            Radius: 11.484,
            Altitude: 0,
            Speed: 0,
            DateTime: new Date().toISOString()
        }
    }
];
const FAKE_CUSTOMER_BODY = {
    ...exampleCustomers[1]
};
const ProcessSessionCode = (SessionStatusCode, SessionStatusMessage, AllowRetry)=>{
    if (SessionStatusCode === 1) {
        return {
            status: 'error',
            message: 'Your information could not be succesfully validated',
            gidxMessage: SessionStatusMessage
        };
    } else if (SessionStatusCode === 2) {
        return {
            status: 'error',
            message: 'Your information is incomplete',
            gidxMessage: SessionStatusMessage
        };
    } else if (SessionStatusCode === 3 && AllowRetry) {
        return {
            status: 'error',
            message: 'Payment timeout, please try again',
            gidxMessage: SessionStatusMessage
        };
    } else if (SessionStatusCode === 3 && !AllowRetry) {
        return {
            status: 'error',
            message: 'Payment timeout',
            gidxMessage: SessionStatusMessage
        };
    } else if (SessionStatusCode && SessionStatusCode >= 4) {
        return {
            status: 'pending',
            message: 'Please complete next step',
            gidxMessage: SessionStatusMessage
        };
    }
    return {
        status: 'success'
    };
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/api/schema.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "API": (()=>API),
    "DEFAULT_CACHE_STRATEGY": (()=>DEFAULT_CACHE_STRATEGY)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__ = __turbopack_import__("[externals]/zod [external] (zod, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/zod-types.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/economy.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$bets$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/supabase/bets.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/market-types.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/answer.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$search$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/market-search-types.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$comment$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/comment.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/group.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$period$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/period.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/gidx/gidx.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$search$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$search$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
;
;
;
const DEFAULT_CACHE_STRATEGY = 'public, max-age=5, stale-while-revalidate=10';
let _apiTypeCheck;
const API = _apiTypeCheck = {
    'refresh-all-clients': {
        method: 'POST',
        visibility: 'public',
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            message: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }),
        authed: true
    },
    'toggle-system-trading-status': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'MANA',
                'CASH'
            ])
        }).strict(),
        returns: {}
    },
    'create-cash-contract': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            manaContractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            subsidyAmount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive()
        }).strict()
    },
    comment: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            content: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["contentSchema"].optional(),
            html: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            markdown: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            replyToCommentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            replyToAnswerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            replyToBetId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'follow-contract': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            follow: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean()
        }).strict()
    },
    'get-contract': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'answer/:answerId': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'market/:contractId/answers': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'hide-comment': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            commentPath: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'pin-comment': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            commentPath: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    comments: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            contractSlug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(1000),
            page: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            isPolitics: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
        }).strict()
    },
    bet: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$economy$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["SWEEPS_MIN_BET"]),
            replyToCommentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limitProb: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(0.01).lte(0.99).optional(),
            expiresAt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            // Used for binary and new multiple choice contracts (cpmm-multi-1).
            outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'YES',
                'NO'
            ]).default('YES'),
            //Multi
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            dryRun: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            deps: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            deterministic: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }).strict()
    },
    createuser: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            deviceToken: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            adminToken: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            visitedContractIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    'multi-bet': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(1),
            limitProb: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(0).lte(1).optional(),
            expiresAt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            answerIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).min(1),
            deterministic: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }).strict()
    },
    'multi-sell': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            answerIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).min(1),
            deterministic: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }).strict()
    },
    leaderboard: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            groupId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().min(1).max(100).default(50),
            token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'MANA',
                'CASH'
            ]).default('MANA'),
            kind: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'creator',
                'profit',
                'loss',
                'volume',
                'referral'
            ])
        }).strict()
    },
    'verify-phone-number': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            phoneNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            code: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'request-otp': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            phoneNumber: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'bet/cancel/:betId': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            betId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    // sell shares
    'market/:contractId/sell': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            shares: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive().optional(),
            outcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'YES',
                'NO'
            ]),
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            deterministic: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            deps: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    'get-user-limit-orders-with-contracts': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            count: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().lte(5000)
        }).strict()
    },
    'get-interesting-groups-from-views': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            contractIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    bets: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string())).optional(),
            contractSlug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            // market: z.string().optional(), // deprecated, synonym for `contractSlug`
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(50000).default(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$supabase$2f$bets$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["NON_POINTS_BETS_LIMIT"]),
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            after: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            beforeTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            afterTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            order: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'asc',
                'desc'
            ]).optional(),
            kinds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'open-limit'
            ]).optional(),
            // undocumented fields. idk what a good api interface would be
            filterRedemptions: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
            includeZeroShareRedemptions: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
            commentRepliesOnly: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
            count: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
            points: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
        }).strict()
    },
    'unique-bet-group-count': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'get-daily-changed-metrics-and-contracts': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        cache: 'public, max-age=900, stale-while-revalidate=90',
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    // deprecated. use /bets?username= instead
    'user/:username/bets': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(1000)
        }).strict()
    },
    'group/:slug': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'group/:slug/groups': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'group/:slug/dashboards': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'group/by-id/:id/groups': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'group/by-id/:id': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    // deprecated. use /markets?groupId= instead
    'group/by-id/:id/markets': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(500)
        }).strict()
    },
    'group/:slug/delete': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'group/by-id/:id/delete': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'group/:slug/block': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'group/:slug/unblock': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'group/by-id/:topId/group/:bottomId': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            topId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            bottomId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }).strict(),
        returns: {}
    },
    groups: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            availableToUserId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            beforeTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().int().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(500)
        }).strict()
    },
    'market/:id': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: {},
        cache: DEFAULT_CACHE_STRATEGY,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            lite: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
        })
    },
    'markets-by-ids': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            ids: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).max(100)
        }).strict()
    },
    // deprecated. use /market/:id?lite=true instead
    'market/:id/lite': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: {},
        cache: DEFAULT_CACHE_STRATEGY,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'slug/:slug': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: {},
        cache: DEFAULT_CACHE_STRATEGY,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            lite: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
        })
    },
    market: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["createMarketProps"]
    },
    'market/:contractId/update': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["updateMarketProps"],
        returns: {}
    },
    'market/:contractId/close': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        // returns: {} as LiteMarket,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            closeTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().int().nonnegative().optional()
        }).strict()
    },
    'market/:contractId/resolve': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["resolveMarketProps"]
    },
    'market/:contractId/add-liquidity': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gt(0).finite()
        }).strict()
    },
    'market/:contractId/remove-liquidity': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gt(0).finite()
        }).strict()
    },
    'market/:contractId/add-bounty': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gt(0).finite()
        }).strict()
    },
    'market/:contractId/award-bounty': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            commentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gt(0).finite()
        }).strict()
    },
    'market/:contractId/group': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            groupId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().default(false)
        }).strict(),
        returns: {}
    },
    'market/:contractId/groups': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: []
    },
    'market/:contractId/answer': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWER_LENGTH"]),
            text: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().min(1).max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWER_LENGTH"])
        }).strict()
    },
    'market/:contractId/block': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'market/:contractId/unblock': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    unresolve: {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWER_LENGTH"]),
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$answer$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ANSWER_LENGTH"]).optional()
        }).strict()
    },
    leagues: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            cohort: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            season: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional()
        }).strict()
    },
    markets: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(500),
            sort: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'created-time',
                'updated-time',
                'last-bet-time',
                'last-comment-time'
            ]).optional(),
            order: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'asc',
                'desc'
            ]).optional(),
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            groupId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'search-markets': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$search$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["searchProps"]
    },
    'search-markets-full': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        preferAuth: true,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$market$2d$search$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["searchProps"]
    },
    managram: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().finite(),
            toIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()),
            message: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$comment$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_COMMENT_LENGTH"]),
            groupId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().max(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MAX_ID_LENGTH"]).optional(),
            token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'M$',
                'CASH'
            ]).default('M$')
        }).strict()
    },
    manalink: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive().finite().safe(),
            expiresTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            maxUses: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            message: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    donate: {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive().finite().safe(),
            to: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'convert-sp-to-mana': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive().finite().safe()
        }).strict()
    },
    'convert-cash-to-mana': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            amount: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().positive().finite().safe()
        }).strict()
    },
    'request-loan': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}),
        returns: {}
    },
    // deprecated. use /txns instead
    managrams: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            toId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            fromId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(100),
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            after: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional()
        }).strict()
    },
    'market/:id/positions': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            answerId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            summaryOnly: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            top: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].undefined().or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()),
            bottom: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].undefined().or(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()),
            order: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'shares',
                'profit'
            ]).optional()
        }).strict()
    },
    me: {
        method: 'GET',
        visibility: 'public',
        authed: true,
        cache: DEFAULT_CACHE_STRATEGY,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}),
        returns: {}
    },
    'me/update': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            name: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().trim().min(1).optional(),
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().trim().min(1).optional(),
            avatarUrl: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            bio: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            website: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            twitterHandle: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            discordHandle: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            // settings
            optOutBetWarnings: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            isAdvancedTrader: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            //internal
            shouldShowWelcome: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            hasSeenContractFollowModal: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            hasSeenLoanModal: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }),
        returns: {}
    },
    'me/delete': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'me/private': {
        method: 'GET',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}),
        returns: {}
    },
    'me/private/update': {
        method: 'POST',
        visibility: 'private',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            email: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().email().optional(),
            apiKey: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            pushToken: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            rejectedPushNotificationsOn: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            lastPromptedToEnablePushNotifications: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            interestedInPushNotifications: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            hasSeenAppBannerInNotificationsOn: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().optional(),
            installedAppPlatforms: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            paymentInfo: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'user/:username': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'user/:username/lite': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            username: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'user/by-id/:id': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        // Do not add a caching strategy here. New users need up-to-date data.
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'user/by-id/:id/lite': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'user/by-id/:id/block': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'user/by-id/:id/unblock': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    users: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(500),
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'search-users': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            term: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(500),
            page: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0)
        }).strict()
    },
    'search-contract-positions': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        cache: DEFAULT_CACHE_STRATEGY,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            term: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(10)
        }).strict()
    },
    'save-twitch': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            twitchInfo: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
                twitchName: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
                controlToken: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
                botEnabled: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
                needsRelinking: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
            })
        }).strict()
    },
    'set-push-token': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            pushToken: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'update-notif-settings': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            type: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            medium: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'email',
                'browser',
                'mobile'
            ]),
            enabled: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean()
        })
    },
    headlines: {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            slug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'politics',
                'ai',
                'news'
            ]).optional()
        })
    },
    'politics-headlines': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'set-news': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            dashboardIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()),
            endpoint: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'politics',
                'ai',
                'news'
            ])
        }).strict()
    },
    react: {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            contentType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'comment',
                'contract'
            ]),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional(),
            reactionType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'like',
                'dislike'
            ]).optional().default('like')
        }).strict(),
        returns: {
            success: true
        }
    },
    'compatible-lovers': {
        method: 'GET',
        visibility: 'private',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: {}
    },
    post: {
        method: 'POST',
        visibility: 'private',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            betId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            commentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            content: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["contentSchema"].optional()
        }).strict()
    },
    'fetch-link-preview': {
        method: 'GET',
        visibility: 'private',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            url: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        cache: 'max-age=86400, stale-while-revalidate=86400',
        returns: {}
    },
    'remove-pinned-photo': {
        method: 'POST',
        visibility: 'private',
        authed: true,
        returns: {
            success: true
        },
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'get-related-markets': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict(),
        returns: {},
        cache: 'public, max-age=3600, stale-while-revalidate=10'
    },
    'get-related-markets-by-group': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        cache: 'public, max-age=3600, stale-while-revalidate=10',
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0)
        }).strict()
    },
    'unlist-and-cancel-user-contracts': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'get-ad-analytics': {
        method: 'POST',
        visibility: 'undocumented',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    'get-seen-market-ids': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()),
            types: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'page',
                'card',
                'promoted'
            ])).optional(),
            since: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number()
        }),
        returns: []
    },
    'get-compatibility-questions': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}),
        returns: {}
    },
    'like-lover': {
        method: 'POST',
        visibility: 'private',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            targetUserId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }),
        returns: {}
    },
    'ship-lovers': {
        method: 'POST',
        visibility: 'private',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            targetUserId1: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            targetUserId2: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }),
        returns: {}
    },
    'get-likes-and-ships': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    'has-free-like': {
        method: 'GET',
        visibility: 'private',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}).strict(),
        returns: {}
    },
    'star-lover': {
        method: 'POST',
        visibility: 'private',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            targetUserId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            remove: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].boolean().optional()
        }),
        returns: {}
    },
    'get-lovers': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}).strict(),
        returns: {}
    },
    'get-lover-answers': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    'search-groups': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        // Is there a way to infer return { lite:[] as LiteGroup[] } if type is 'lite'?
        returns: {
            full: [],
            lite: []
        },
        props: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["SearchGroupParams"])(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["SearchGroupShape"])
    },
    'search-my-groups': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: {
            full: [],
            lite: []
        },
        props: (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["SearchGroupParams"])(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$group$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["MySearchGroupShape"])
    },
    'get-groups-with-top-contracts': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'get-balance-changes': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            after: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().default(0),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'get-partner-stats': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict(),
        returns: {}
    },
    'record-contract-view': {
        method: 'POST',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            kind: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'page',
                'card',
                'promoted'
            ])
        }),
        returns: {}
    },
    'record-comment-view': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            commentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: {}
    },
    'record-contract-interaction': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            contractId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            kind: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'page bet',
                'page comment',
                'page repost',
                'page like',
                'card bet',
                'card click',
                'promoted click',
                'card like',
                'page share',
                'browse click'
            ]),
            commentId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            feedReasons: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            feedType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            betGroupId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            betId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }),
        returns: {}
    },
    'get-dashboard-from-slug': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            dashboardSlug: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        cache: DEFAULT_CACHE_STRATEGY,
        returns: {}
    },
    'create-public-chat-message': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            content: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["contentSchema"],
            channelId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'get-followed-groups': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: {}
    },
    'get-user-portfolio': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: {}
    },
    'get-user-portfolio-history': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            period: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$period$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["PERIODS"])
        }),
        returns: {}
    },
    'get-channel-memberships': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            channelId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            createdTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            lastUpdatedTime: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()
        }),
        returns: {
            channels: [],
            memberIdsByChannelId: {}
        }
    },
    'get-channel-messages': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            channelId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            id: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional()
        }),
        returns: []
    },
    'get-channel-seen-time': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            channelIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number())
        }),
        returns: []
    },
    'set-channel-seen-time': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            channelId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()
        })
    },
    'get-feed': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gt(0).lte(100).default(100),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
            ignoreContractIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    'get-mana-supply': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}).strict()
    },
    'get-notifications': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            after: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(1000).default(100)
        }).strict()
    },
    'update-mod-report': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            reportId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number(),
            updates: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
                status: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                    'new',
                    'under review',
                    'resolved',
                    'needs admin'
                ]).optional(),
                mod_note: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
            }).partial()
        }).strict(),
        returns: {}
    },
    'get-mod-reports': {
        method: 'GET',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            statuses: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'new',
                'under review',
                'resolved',
                'needs admin'
            ])),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(25),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
            count: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional()
        }).strict(),
        returns: {}
    },
    'get-txn-summary-stats': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            ignoreCategories: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            fromType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            toType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            limitDays: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()
        }).strict()
    },
    'get-mana-summary-stats': {
        method: 'GET',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limitDays: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number()
        }).strict()
    },
    'register-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["verificationParams"],
        returns: {}
    },
    'get-verification-status-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'get-monitor-status-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            DeviceGPS: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["GPSProps"]
        })
    },
    'get-checkout-session-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            PayActionCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'PAY',
                'PAYOUT'
            ]).default('PAY'),
            DeviceGPS: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["GPSProps"],
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            ip: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        })
    },
    'complete-checkout-session-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["checkoutParams"])
    },
    'complete-cashout-session-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["cashoutParams"])
    },
    'complete-cashout-request': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$gidx$2f$gidx$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["cashoutRequestParams"])
    },
    'get-verification-documents-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'upload-document-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            CategoryType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].number().gte(1).lte(7),
            fileName: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            fileUrl: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'identity-callback-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            MerchantCustomerID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            NotificationType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    },
    'payment-callback-gidx': {
        method: 'POST',
        visibility: 'undocumented',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            MerchantTransactionID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            TransactionStatusCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            TransactionStatusMessage: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            StatusCode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            SessionID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            MerchantSessionID: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            SessionScore: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number(),
            ReasonCodes: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            ServiceType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            StatusMessage: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }).strict()
    },
    'get-best-comments': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(20),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
            ignoreContractIds: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            justLikes: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional()
        })
    },
    'get-redeemable-prize-cash': {
        method: 'GET',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'get-total-redeemable-prize-cash': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({})
    },
    'get-cashouts': {
        method: 'GET',
        visibility: 'undocumented',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(10),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).default(0),
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'get-kyc-stats': {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({}),
        returns: {}
    },
    txns: {
        method: 'GET',
        visibility: 'public',
        authed: false,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            token: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            offset: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().default(0),
            limit: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().gte(0).lte(100).default(100),
            before: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            after: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].coerce.number().optional(),
            toId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            fromId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            category: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            ignoreCategories: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict(),
        returns: []
    },
    'generate-ai-market-suggestions': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            prompt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            existingTitles: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    'generate-ai-market-suggestions-2': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: [],
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            prompt: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            existingTitles: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional()
        }).strict()
    },
    'generate-ai-description': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            question: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            description: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            answers: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()).optional(),
            outcomeType: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional(),
            shouldAnswersSumToOne: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"].optional(),
            addAnswersMode: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].enum([
                'DISABLED',
                'ONLY_CREATOR',
                'ANYONE'
            ]).optional()
        }).strict()
    },
    'generate-ai-answers': {
        method: 'POST',
        visibility: 'public',
        authed: true,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            question: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string(),
            answers: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].array(__TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()),
            shouldAnswersSumToOne: __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$zod$2d$types$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["coerceBoolean"],
            description: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string().optional()
        }).strict()
    },
    'get-monthly-bets-2024': {
        method: 'GET',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: []
    },
    'get-max-min-profit-2024': {
        method: 'GET',
        visibility: 'public',
        authed: true,
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        }),
        returns: []
    },
    'get-next-loan-amount': {
        method: 'GET',
        visibility: 'undocumented',
        cache: DEFAULT_CACHE_STRATEGY,
        authed: false,
        returns: {},
        props: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].object({
            userId: __TURBOPACK__imported__module__$5b$externals$5d2f$zod__$5b$external$5d$__$28$zod$2c$__esm_import$29$__["z"].string()
        })
    }
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/util/api.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "baseApiCall": (()=>baseApiCall),
    "formatApiUrlWithParams": (()=>formatApiUrlWithParams),
    "unauthedApi": (()=>unauthedApi)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$forEach$2e$js__$5b$external$5d$__$28$lodash$2f$forEach$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/forEach.js [external] (lodash/forEach.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/schema.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/utils.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/object.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
function unauthedApi(path, params) {
    return baseApiCall(formatApiUrlWithParams(path, params), __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["API"][path].method, params, null);
}
const formatApiUrlWithParams = (path, params)=>{
    // parse any params that should part of the path (like market/:id)
    let url = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])(path);
    (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$forEach$2e$js__$5b$external$5d$__$28$lodash$2f$forEach$2e$js$2c$__cjs$29$__["default"])(params, (v, k)=>{
        if (url.includes(`:${k}`)) {
            url = url.replace(`:${k}`, v + '');
            delete params[k];
        }
    });
    return url;
};
function appendQuery(url, props) {
    const [base, query] = url.split(/\?(.+)/);
    const params = new URLSearchParams(query);
    (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$forEach$2e$js__$5b$external$5d$__$28$lodash$2f$forEach$2e$js$2c$__cjs$29$__["default"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$object$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["removeUndefinedProps"])(props ?? {}), (v, k)=>{
        if (Array.isArray(v)) {
            v.forEach((item)=>params.append(k + '[]', item));
        } else {
            params.set(k, v);
        }
    });
    return `${base}?${params.toString()}`;
}
async function baseApiCall(url, method, params, user) {
    const actualUrl = method === 'POST' ? url : appendQuery(url, params);
    const headers = {
        'Content-Type': 'application/json'
    };
    if (user) {
        const token = await user.getIdToken();
        headers.Authorization = `Bearer ${token}`;
    }
    const req = new Request(actualUrl, {
        headers,
        method: method,
        body: params == null || method === 'GET' ? undefined : JSON.stringify(params)
    });
    return fetch(req).then(async (resp)=>{
        const json = await resp.json();
        if (!resp.ok) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["APIError"](resp.status, json?.message, json?.details);
        }
        return json;
    });
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/boost.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
// number normal markets to show between boosted markets
__turbopack_esm__({
    "AD_PERIOD": (()=>AD_PERIOD),
    "AD_RATE_LIMIT": (()=>AD_RATE_LIMIT),
    "AD_REDEEM_REWARD": (()=>AD_REDEEM_REWARD),
    "AD_WAIT_SECONDS": (()=>AD_WAIT_SECONDS),
    "DEFAULT_AD_COST_PER_VIEW": (()=>DEFAULT_AD_COST_PER_VIEW),
    "MIN_AD_COST_PER_VIEW": (()=>MIN_AD_COST_PER_VIEW)
});
const AD_PERIOD = 5;
const AD_WAIT_SECONDS = 4 // Time with ad visible before allowing the user to claim.
;
const AD_RATE_LIMIT = 10 * 1000 // 10 seconds
;
const DEFAULT_AD_COST_PER_VIEW = 10;
const MIN_AD_COST_PER_VIEW = 10;
const AD_REDEEM_REWARD = 3;
}}),
"[project]/web/lib/api/api.ts [ssr] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "acceptChallenge": (()=>acceptChallenge),
    "api": (()=>api),
    "banUser": (()=>banUser),
    "bidForLeague": (()=>bidForLeague),
    "boostMarket": (()=>boostMarket),
    "call": (()=>call),
    "cancelBounty": (()=>cancelBounty),
    "castPollVote": (()=>castPollVote),
    "claimDestinySub": (()=>claimDestinySub),
    "claimManalink": (()=>claimManalink),
    "completeQuest": (()=>completeQuest),
    "createAnswer": (()=>createAnswer),
    "createChartAnnotation": (()=>createChartAnnotation),
    "createDashboard": (()=>createDashboard),
    "createGroup": (()=>createGroup),
    "createPrivateMessageChannelWithUsers": (()=>createPrivateMessageChannelWithUsers),
    "createUser": (()=>createUser),
    "deleteChartAnnotation": (()=>deleteChartAnnotation),
    "deleteDashboard": (()=>deleteDashboard),
    "deleteMarket": (()=>deleteMarket),
    "deleteTV": (()=>deleteTV),
    "dividendCert": (()=>dividendCert),
    "editAnswerCpmm": (()=>editAnswerCpmm),
    "followDashboard": (()=>followDashboard),
    "followTopic": (()=>followTopic),
    "followUser": (()=>followUser),
    "getAdAnalytics": (()=>getAdAnalytics),
    "getMonthlyBets2024": (()=>getMonthlyBets2024),
    "getSimilarGroupsToContract": (()=>getSimilarGroupsToContract),
    "getSupabaseToken": (()=>getSupabaseToken),
    "getUserContractsMetricsWithContracts": (()=>getUserContractsMetricsWithContracts),
    "getUserIsFollowingTopic": (()=>getUserIsFollowingTopic),
    "getYourDashboards": (()=>getYourDashboards),
    "getYourFollowedDashboards": (()=>getYourFollowedDashboards),
    "joinGroupThroughInvite": (()=>joinGroupThroughInvite),
    "leagueActivity": (()=>leagueActivity),
    "leavePrivateMessageChannel": (()=>leavePrivateMessageChannel),
    "leaveReview": (()=>leaveReview),
    "markAllNotifications": (()=>markAllNotifications),
    "redeemBoost": (()=>redeemBoost),
    "registerDiscordId": (()=>registerDiscordId),
    "report": (()=>report),
    "requestLoan": (()=>requestLoan),
    "saveTopic": (()=>saveTopic),
    "searchContracts": (()=>searchContracts),
    "searchGiphy": (()=>searchGiphy),
    "searchGroups": (()=>searchGroups),
    "sendUserPrivateMessage": (()=>sendUserPrivateMessage),
    "setTV": (()=>setTV),
    "supabaseSearchDashboards": (()=>supabaseSearchDashboards),
    "swapCert": (()=>swapCert),
    "tweetFromManaChan": (()=>tweetFromManaChan),
    "unfollowUser": (()=>unfollowUser),
    "updateDashboard": (()=>updateDashboard),
    "updateGroup": (()=>updateGroup),
    "updateGroupPrivacy": (()=>updateGroupPrivacy),
    "updateMarket": (()=>updateMarket),
    "updateMemberRole": (()=>updateMemberRole),
    "updatePrivateMessageChannel": (()=>updatePrivateMessageChannel),
    "updateUser": (()=>updateUser),
    "updateUserDisinterestEmbedding": (()=>updateUserDisinterestEmbedding),
    "validateIapReceipt": (()=>validateIapReceipt)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/api.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/firebase/users.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/schema.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/time.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/utils.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$boost$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/boost.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
async function call(url, method, params) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["baseApiCall"])(url, method, params, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser);
}
async function api(path, params = {}) {
    const pathProps = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["API"][path];
    const preferAuth = 'preferAuth' in pathProps && pathProps.preferAuth;
    // If the api is authed and the user is not loaded, wait for the user to load.
    if ((pathProps.authed || preferAuth) && !__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser) {
        let i = 0;
        while(!__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser){
            i++;
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["sleep"])(i * 10);
            if (i > 30) {
                console.error('User did not load after 30 iterations');
                break;
            }
        }
    }
    return await call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatApiUrlWithParams"])(path, params), pathProps.method, params);
}
// helper function for the old apis so we don't have to migrate them
function curriedAPI(path) {
    return (params)=>api(path, params);
}
function createAnswer(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('createanswer'), 'POST', params);
}
function claimDestinySub(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('claimdestinysub'), 'POST', params);
}
function createUser(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('createuser'), 'POST', params);
}
function swapCert(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('swapcert'), 'POST', params);
}
function dividendCert(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('dividendcert'), 'POST', params);
}
function claimManalink(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('claimmanalink'), 'POST', params);
}
function createGroup(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('creategroup'), 'POST', params);
}
function updateGroup(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('updategroup'), 'POST', params);
}
function acceptChallenge(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('acceptchallenge'), 'POST', params);
}
function boostMarket(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('boost-market'), 'POST', params);
}
let nonce = 0;
function redeemBoost(params) {
    const now = Date.now();
    if (now - nonce < __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$boost$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["AD_RATE_LIMIT"] - 500) {
        throw Error(`Please wait ${__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$boost$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["AD_RATE_LIMIT"] / 1000} seconds between redeeming boosts.`);
    }
    nonce = now;
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('redeem-boost'), 'POST', params);
}
function validateIapReceipt(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('validateiap'), 'POST', params);
}
function markAllNotifications(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('markallnotifications'), 'POST', params);
}
function updateMemberRole(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('updatememberrole'), 'POST', params);
}
function updateGroupPrivacy(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('updategroupprivacy'), 'POST', params);
}
function registerDiscordId(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('registerdiscordid'), 'POST', params);
}
function getUserIsFollowingTopic(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('getuserisgroupmember'), 'POST', params);
}
function completeQuest(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('completequest'), 'POST', params);
}
function getSupabaseToken() {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('getsupabasetoken'), 'GET');
}
function updateUserDisinterestEmbedding(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('update-user-disinterest-embedding'), 'POST', params);
}
const searchContracts = curriedAPI('search-markets-full');
function deleteMarket(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('delete-market'), 'POST', params);
}
function saveTopic(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('save-topic'), 'POST', params);
}
function setTV(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('settv'), 'POST', params);
}
function deleteTV(id) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('deletetv'), 'POST', {
        id
    });
}
function joinGroupThroughInvite(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('joingroupthroughinvite'), 'POST', params);
}
function followTopic(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('follow-topic'), 'POST', params);
}
const searchGroups = curriedAPI('search-groups');
function leagueActivity(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('league-activity'), 'POST', params);
}
function cancelBounty(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('cancel-bounty'), 'POST', params);
}
function searchGiphy(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('searchgiphy'), 'POST', params);
}
function tweetFromManaChan(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('manachantweet'), 'POST', params);
}
function leaveReview(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('leave-review'), 'POST', params);
}
function getUserContractsMetricsWithContracts(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('get-user-contract-metrics-with-contracts'), 'POST', params);
}
function castPollVote(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('cast-poll-vote'), 'POST', params);
}
function getSimilarGroupsToContract(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('get-similar-groups-to-contract'), 'POST', params);
}
function bidForLeague(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('bidforleague'), 'POST', params);
}
function followUser(userId) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('follow-user'), 'POST', {
        userId,
        follow: true
    });
}
function unfollowUser(userId) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('follow-user'), 'POST', {
        userId,
        follow: false
    });
}
function report(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('report'), 'POST', params);
}
function createDashboard(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('createdashboard'), 'POST', params);
}
function getYourDashboards() {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('getyourdashboards'), 'POST');
}
function followDashboard(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('followdashboard'), 'POST', params);
}
function supabaseSearchDashboards(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('supabasesearchdashboards'), 'POST', params);
}
function getYourFollowedDashboards() {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('getyourfolloweddashboards'), 'POST');
}
function updateDashboard(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('updatedashboard'), 'POST', params);
}
function deleteDashboard(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('delete-dashboard'), 'POST', params);
}
const updateMarket = curriedAPI('market/:contractId/update');
const updateUser = curriedAPI('me/update');
function banUser(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('ban-user'), 'POST', params);
}
function createPrivateMessageChannelWithUsers(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('create-private-user-message-channel'), 'POST', params);
}
function sendUserPrivateMessage(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('create-private-user-message'), 'POST', params);
}
function leavePrivateMessageChannel(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('leave-private-user-message-channel'), 'POST', params);
}
function updatePrivateMessageChannel(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('update-private-user-message-channel'), 'POST', params);
}
function editAnswerCpmm(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('edit-answer-cpmm'), 'POST', params);
}
function createChartAnnotation(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('create-chart-annotation'), 'POST', params);
}
function deleteChartAnnotation(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('delete-chart-annotation'), 'POST', params);
}
function getAdAnalytics(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('get-ad-analytics'), 'POST', params);
}
function requestLoan() {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('request-loan'), 'GET');
}
function getMonthlyBets2024(params) {
    return call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$utils$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getApiUrl"])('get-monthly-bets-2024'), 'POST', params);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/web/lib/api/api.ts [ssr] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, t: __turbopack_require_real__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({});
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/firebase/users.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/web/lib/api/api.ts [ssr] (ecmascript) <locals>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/common/src/native-message.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "IS_NATIVE_KEY": (()=>IS_NATIVE_KEY),
    "PLATFORM_KEY": (()=>PLATFORM_KEY)
});
const IS_NATIVE_KEY = 'is-native';
const PLATFORM_KEY = 'native-platform';
}}),
"[project]/web/lib/native/is-native.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "getIsNative": (()=>getIsNative),
    "getNativePlatform": (()=>getNativePlatform),
    "setInstalledAppPlatform": (()=>setInstalledAppPlatform),
    "setIsNativeOld": (()=>setIsNativeOld)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/lodash/uniq.js [external] (lodash/uniq.js, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$util$2f$local$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/util/local.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/web/lib/api/api.ts [ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$native$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/native-message.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/web/lib/api/api.ts [ssr] (ecmascript) <locals>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
const getIsNative = ()=>{
    const { isNative } = getNativeInfo();
    return isNative;
};
const getNativePlatform = ()=>{
    return getNativeInfo();
};
const getNativeInfo = ()=>{
    if ("TURBOPACK compile-time truthy", 1) return {
        isNative: false,
        platform: ''
    };
    "TURBOPACK unreachable";
    const local = undefined;
    const ss = undefined;
    const isNative = undefined;
    const platform = undefined;
};
const setIsNativeOld = (isNative, platform)=>{
    const local = __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$util$2f$local$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["safeLocalStorage"];
    const ss = __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$util$2f$local$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["safeSessionStorage"];
    local?.setItem(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$native$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["IS_NATIVE_KEY"], isNative ? 'true' : 'false');
    ss?.setItem(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$native$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["IS_NATIVE_KEY"], isNative ? 'true' : 'false');
    if (platform) {
        local?.setItem(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$native$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["PLATFORM_KEY"], platform);
        ss?.setItem(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$native$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["PLATFORM_KEY"], platform);
    }
};
const setInstalledAppPlatform = (privateUser, platform)=>{
    if (privateUser.installedAppPlatforms?.includes(platform)) return;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["api"])('me/private/update', {
        installedAppPlatforms: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$lodash$2f$uniq$2e$js__$5b$external$5d$__$28$lodash$2f$uniq$2e$js$2c$__cjs$29$__["default"])([
            ...privateUser.installedAppPlatforms ?? [],
            platform
        ])
    });
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/lib/firebase/init.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "app": (()=>app),
    "privateStorage": (()=>privateStorage),
    "storage": (()=>storage)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/storage [external] (firebase/storage, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/app [external] (firebase/app, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
const app = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["getApps"])().length ? (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["getApp"])() : (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$app__$5b$external$5d$__$28$firebase$2f$app$2c$__esm_import$29$__["initializeApp"])(__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["FIREBASE_CONFIG"]);
const storage = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__["getStorage"])();
const privateStorage = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$storage__$5b$external$5d$__$28$firebase$2f$storage$2c$__esm_import$29$__["getStorage"])(app, 'gs://' + __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["FIREBASE_CONFIG"].privateBucket);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/lib/firebase/users.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "CACHED_REFERRAL_USERNAME_KEY": (()=>CACHED_REFERRAL_USERNAME_KEY),
    "auth": (()=>auth),
    "firebaseLogin": (()=>firebaseLogin),
    "firebaseLogout": (()=>firebaseLogout),
    "isContractBlocked": (()=>isContractBlocked),
    "loginWithApple": (()=>loginWithApple)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$dayjs__$5b$external$5d$__$28$dayjs$2c$__cjs$29$__ = __turbopack_import__("[externals]/dayjs [external] (dayjs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$dayjs$2f$plugin$2f$utc$2e$js__$5b$external$5d$__$28$dayjs$2f$plugin$2f$utc$2e$js$2c$__cjs$29$__ = __turbopack_import__("[externals]/dayjs/plugin/utc.js [external] (dayjs/plugin/utc.js, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__ = __turbopack_import__("[externals]/firebase/auth [external] (firebase/auth, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/is-native.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/native-messages.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/stonks/lib/firebase/init.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/lib/native/post-message.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
__TURBOPACK__imported__module__$5b$externals$5d2f$dayjs__$5b$external$5d$__$28$dayjs$2c$__cjs$29$__["default"].extend(__TURBOPACK__imported__module__$5b$externals$5d2f$dayjs$2f$plugin$2f$utc$2e$js__$5b$external$5d$__$28$dayjs$2f$plugin$2f$utc$2e$js$2c$__cjs$29$__["default"]);
const auth = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["getAuth"])(__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$init$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["app"]);
const CACHED_REFERRAL_USERNAME_KEY = 'CACHED_REFERRAL_KEY';
const CACHED_REFERRAL_CONTRACT_ID_KEY = 'CACHED_REFERRAL_CONTRACT_KEY';
async function firebaseLogin() {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getIsNative"])()) {
        // Post the message back to expo
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$post$2d$message$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["postMessageToNative"])('loginClicked', {});
        return;
    }
    const provider = new __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["GoogleAuthProvider"]();
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["signInWithPopup"])(auth, provider).then(async (result)=>{
        return result;
    });
}
async function loginWithApple() {
    const provider = new __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["OAuthProvider"]('apple.com');
    provider.addScope('email');
    provider.addScope('name');
    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$firebase$2f$auth__$5b$external$5d$__$28$firebase$2f$auth$2c$__esm_import$29$__["signInWithPopup"])(auth, provider).then((result)=>{
        return result;
    }).catch((error)=>{
        console.error(error);
    });
}
async function firebaseLogout() {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$is$2d$native$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getIsNative"])()) (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$lib$2f$native$2f$native$2d$messages$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["nativeSignOut"])();
    await auth.signOut();
}
const isContractBlocked = (privateUser, contract)=>{
    if (!privateUser) return false;
    const { blockedContractIds, blockedByUserIds, blockedUserIds, blockedGroupSlugs } = privateUser;
    return blockedContractIds?.includes(contract.id) || contract.groupSlugs?.some((slug)=>blockedGroupSlugs?.includes(slug)) || blockedByUserIds?.includes(contract.creatorId) || blockedUserIds?.includes(contract.creatorId);
};
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/lib/api/api.ts [ssr] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "api": (()=>api),
    "call": (()=>call),
    "searchContracts": (()=>searchContracts)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/api.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/stonks/lib/firebase/users.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/api/schema.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/util/time.ts [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
async function call(url, method, params) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["baseApiCall"])(url, method, params, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser);
}
async function api(path, params = {}) {
    const pathProps = __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$api$2f$schema$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["API"][path];
    const preferAuth = 'preferAuth' in pathProps && pathProps.preferAuth;
    // If the api is authed and the user is not loaded, wait for the user to load.
    if ((pathProps.authed || preferAuth) && !__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser) {
        let i = 0;
        while(!__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["auth"].currentUser){
            i++;
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$time$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["sleep"])(i * 10);
            if (i > 30) {
                console.error('User did not load after 30 iterations');
                break;
            }
        }
    }
    return await call((0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$util$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["formatApiUrlWithParams"])(path, params), pathProps.method, params);
}
// helper function for the old apis so we don't have to migrate them
function curriedAPI(path) {
    return (params)=>api(path, params);
}
const searchContracts = curriedAPI('search-markets-full');
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/lib/api/api.ts [ssr] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, t: __turbopack_require_real__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({});
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/stonks/lib/firebase/users.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/stonks/lib/api/api.ts [ssr] (ecmascript) <locals>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$firebase$2f$users$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/web/components/layout/row.tsx [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "Row": (()=>Row)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$m$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/node_modules/clsx/dist/clsx.m.js [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__ = __turbopack_import__("[externals]/react [external] (react, cjs)");
;
;
;
const Row = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["forwardRef"])(function Row(props, ref) {
    const { children, className, ...rest } = props;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$m$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__["default"])(className, 'flex flex-row'),
        ref: ref,
        ...rest,
        children: children
    }, void 0, false, {
        fileName: "[project]/web/components/layout/row.tsx",
        lineNumber: 10,
        columnNumber: 5
    }, this);
});
}}),
"[externals]/react-dom [external] (react-dom, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("react-dom", () => require("react-dom"));

module.exports = mod;
}}),
"[project]/web/hooks/use-animated-number.ts [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "useAnimatedNumber": (()=>useAnimatedNumber)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__ = __turbopack_import__("[externals]/react [external] (react, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$web$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@react-spring/web/dist/esm/index.js [ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$core$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/@react-spring/core/dist/esm/index.js [ssr] (ecmascript) <locals>");
;
;
const useAnimatedNumber = (value)=>{
    const [initialProb] = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useState"])(value);
    const spring = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$core$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["useSpring"])({
        val: value,
        from: {
            val: initialProb
        }
    });
    return spring.val;
};
}}),
"[externals]/clsx [external] (clsx, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("clsx");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[project]/stonks/components/StonkValue.tsx [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "StonkPrice": (()=>StonkPrice)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$components$2f$layout$2f$row$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/components/layout/row.tsx [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$hooks$2f$use$2d$animated$2d$number$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/hooks/use-animated-number.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$clsx__$5b$external$5d$__$28$clsx$2c$__esm_import$29$__ = __turbopack_import__("[externals]/clsx [external] (clsx, esm_import)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$web$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@react-spring/web/dist/esm/index.js [ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$pseudo$2d$numeric$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/pseudo-numeric.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/calculate.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/common/src/envs/constants.ts [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$web$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/@react-spring/web/dist/esm/index.js [ssr] (ecmascript) <locals>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f$clsx__$5b$external$5d$__$28$clsx$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f$clsx__$5b$external$5d$__$28$clsx$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
;
;
;
function StonkPrice(props) {
    const { contract, className } = props;
    const value = (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$pseudo$2d$numeric$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getMappedValue"])(contract, (0, __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$calculate$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["getProbability"])(contract));
    const spring = (0, __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$hooks$2f$use$2d$animated$2d$number$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["useAnimatedNumber"])(value);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$components$2f$layout$2f$row$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__["Row"], {
        className: (0, __TURBOPACK__imported__module__$5b$externals$5d2f$clsx__$5b$external$5d$__$28$clsx$2c$__esm_import$29$__["default"])('text-ink-1000 items-baseline text-3xl', className),
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$components$2f$layout$2f$row$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__["Row"], {
                children: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$common$2f$src$2f$envs$2f$constants$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__["ENV_CONFIG"].moneyMoniker,
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$react$2d$spring$2f$web$2f$dist$2f$esm$2f$index$2e$js__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["animated"].div, {
                        children: spring.to((val)=>Math.round(val))
                    }, void 0, false, {
                        fileName: "[project]/stonks/components/StonkValue.tsx",
                        lineNumber: 22,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/stonks/components/StonkValue.tsx",
                lineNumber: 20,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
                className: "ml-2 text-base",
                children: "per share"
            }, void 0, false, {
                fileName: "[project]/stonks/components/StonkValue.tsx",
                lineNumber: 24,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/stonks/components/StonkValue.tsx",
        lineNumber: 19,
        columnNumber: 5
    }, this);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/components/StonksList.tsx [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "StonksList": (()=>StonksList)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__ = __turbopack_import__("[externals]/react [external] (react, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/stonks/lib/api/api.ts [ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonkValue$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/stonks/components/StonkValue.tsx [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$web$2f$components$2f$layout$2f$row$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/web/components/layout/row.tsx [ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/stonks/lib/api/api.ts [ssr] (ecmascript) <locals>");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonkValue$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__,
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonkValue$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
;
;
;
function StonksList() {
    const [stonks, setStonks] = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useState"])([]);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useState"])();
    (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useEffect"])(()=>{
        const fetchStonks = async ()=>{
            try {
                const data = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$lib$2f$api$2f$api$2e$ts__$5b$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["api"])('search-markets', {
                    contractType: 'STONK',
                    sort: 'prob-descending',
                    limit: 100
                });
                setStonks(data);
            } catch (e) {
                setError('Failed to load stonks');
                console.error(e);
            }
        };
        fetchStonks();
    }, []);
    if (error) return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
        children: [
            "Error: ",
            error
        ]
    }, void 0, true, {
        fileName: "[project]/stonks/components/StonksList.tsx",
        lineNumber: 29,
        columnNumber: 21
    }, this);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
        children: stonks.map((stonk)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$web$2f$components$2f$layout$2f$row$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__["Row"], {
                children: [
                    stonk.question,
                    ": ",
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonkValue$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__["StonkPrice"], {
                        contract: stonk
                    }, void 0, false, {
                        fileName: "[project]/stonks/components/StonksList.tsx",
                        lineNumber: 35,
                        columnNumber: 29
                    }, this)
                ]
            }, stonk.id, true, {
                fileName: "[project]/stonks/components/StonksList.tsx",
                lineNumber: 34,
                columnNumber: 9
            }, this))
    }, void 0, false, {
        fileName: "[project]/stonks/components/StonksList.tsx",
        lineNumber: 32,
        columnNumber: 5
    }, this);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[project]/stonks/pages/index.tsx [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
__turbopack_esm__({
    "default": (()=>Home)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonksList$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/stonks/components/StonksList.tsx [ssr] (ecmascript)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonksList$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__
]);
([__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonksList$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
;
;
function Home() {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("h1", {
                children: "Stonks Tracker"
            }, void 0, false, {
                fileName: "[project]/stonks/pages/index.tsx",
                lineNumber: 6,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$stonks$2f$components$2f$StonksList$2e$tsx__$5b$ssr$5d$__$28$ecmascript$29$__["StonksList"], {}, void 0, false, {
                fileName: "[project]/stonks/pages/index.tsx",
                lineNumber: 7,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/stonks/pages/index.tsx",
        lineNumber: 5,
        columnNumber: 5
    }, this);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__4e6474._.js.map